var _STRINGS={Ad:{Mobile:{Preroll:{ReadyIn:"The game is ready in ",Loading:"Your game is loading...",Close:"Close"},Header:{ReadyIn:"The game is ready in ",Loading:"Your game is loading...",Close:"Close"}}},Splash:{Loading:"Loading ...",LogoLine1:"Some text here",LogoLine2:"powered by MarketJS",LogoLine3:"none"},Game:{SelectPlayer:"Select Player",Win:"You win!",Lose:"You lose!",Score:"Score",Time:"Time"},FacebookPostToFeed:{Title:"Some title",Caption:"Some Caption",Description:"Some description",
Link:"http://google.com",Picture:"media/splash/desktop/cover.jpg"},Results:{Title:"High score"}};var _SETTINGS={Ad:{Mobile:{Preroll:{Enabled:!1,Duration:5,Width:250,Height:250},Header:{Enabled:!1,Duration:5,Width:320,Height:50},Footer:{Enabled:!1,Duration:5,Width:320,Height:50},End:{Enabled:!1,Duration:1,Width:250,Height:250}}},Language:{Default:"en"},Branding:{Enabled:!1},Gamecenter:{Enabled:!0}};var MobileAdInGamePreroll={ad_duration:_SETTINGS.Ad.Mobile.Preroll.Duration,ad_width:_SETTINGS.Ad.Mobile.Preroll.Width,ad_height:_SETTINGS.Ad.Mobile.Preroll.Height,ready_in:_STRINGS.Ad.Mobile.Preroll.ReadyIn,loading:_STRINGS.Ad.Mobile.Preroll.Loading,close:_STRINGS.Ad.Mobile.Preroll.Close+"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;",Initialize:function(){this.overlay=$("#MobileAdInGamePreroll");this.box=$("#MobileAdInGamePreroll-Box");this.game=$("#game");this.boxContents={footer:$("#MobileAdInGamePreroll-Box-Footer"),
header:$("#MobileAdInGamePreroll-Box-Header"),close:$("#MobileAdInGamePreroll-Box-Close"),body:$("#MobileAdInGamePreroll-Box-Body")};this.box.width(this.ad_width);this.box.height(this.ad_height);this.box.css("left",(this.overlay.width()-this.box.width())/2);this.box.css("top",(this.overlay.height()-this.box.height()-this.boxContents.header.height()-this.boxContents.footer.height())/2);this.overlay.show(this.Timer(this.ad_duration))},Timer:function(a){var b=a,c=setInterval(function(){MobileAdInGamePreroll.boxContents.header.text(MobileAdInGamePreroll.ready_in+
b+"...");MobileAdInGamePreroll.boxContents.footer.text(MobileAdInGamePreroll.loading);b--;0>b&&(clearInterval(c),MobileAdInGamePreroll.boxContents.close.css("left",MobileAdInGamePreroll.boxContents.body.width()-23),MobileAdInGamePreroll.boxContents.close.show(),MobileAdInGamePreroll.boxContents.header.html(MobileAdInGamePreroll.close),MobileAdInGamePreroll.boxContents.footer.text(""))},1E3)},Close:function(){this.overlay.hide()}};var MobileAdInGameHeader={ad_duration:_SETTINGS.Ad.Mobile.Header.Duration,ad_width:_SETTINGS.Ad.Mobile.Header.Width,ad_height:_SETTINGS.Ad.Mobile.Header.Height,Initialize:function(){this.div=$("#MobileAdInGameHeader");this.game=$("#game");this.div.width(this.ad_width);this.div.height(this.ad_height);this.div.css("left",this.game.position().left+(this.game.width()-this.div.width())/2);this.div.css("top",0);this.div.show(this.Timer(this.ad_duration))},Timer:function(a){var b=setInterval(function(){a--;
0>a&&(MobileAdInGameHeader.div.hide(),clearInterval(b))},1E3)}};var MobileAdInGameFooter={ad_duration:_SETTINGS.Ad.Mobile.Footer.Duration,ad_width:_SETTINGS.Ad.Mobile.Footer.Width,ad_height:_SETTINGS.Ad.Mobile.Footer.Height,Initialize:function(){this.div=$("#MobileAdInGameFooter");this.game=$("#game");this.div.width(this.ad_width);this.div.height(this.ad_height);this.div.css("left",this.game.position().left+(this.game.width()-this.div.width())/2);this.div.css("top",this.game.height()-this.div.height()-5);this.div.show(this.Timer(this.ad_duration))},Timer:function(a){var b=
setInterval(function(){a--;0>a&&(MobileAdInGameFooter.div.hide(),clearInterval(b))},1E3)}};var MobileAdInGameEnd={ad_duration:_SETTINGS.Ad.Mobile.End.Duration,ad_width:_SETTINGS.Ad.Mobile.End.Width,ad_height:_SETTINGS.Ad.Mobile.End.Height,ready_in:_STRINGS.Ad.Mobile.Preroll.ReadyIn,loading:_STRINGS.Ad.Mobile.Preroll.Loading,close:_STRINGS.Ad.Mobile.Preroll.Close+"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;",Initialize:function(){this.overlay=$("#MobileAdInGameEnd");this.box=$("#MobileAdInGameEnd-Box");this.game=$("#game");this.boxContents={footer:$("#MobileAdInGameEnd-Box-Footer"),
header:$("#MobileAdInGameEnd-Box-Header"),close:$("#MobileAdInGameEnd-Box-Close"),body:$("#MobileAdInGameEnd-Box-Body")};this.box.width(this.ad_width);this.box.height(this.ad_height);this.box.css("left",(this.overlay.width()-this.box.width())/2);this.box.css("top",(this.overlay.height()-this.box.height()-this.boxContents.header.height()-this.boxContents.footer.height())/2);this.overlay.show(this.Timer(this.ad_duration))},Timer:function(a){var b=a,c=setInterval(function(){MobileAdInGameEnd.boxContents.header.text(MobileAdInGameEnd.ready_in+
b+"...");MobileAdInGameEnd.boxContents.footer.text(MobileAdInGameEnd.loading);b--;0>b&&(clearInterval(c),MobileAdInGameEnd.boxContents.close.css("left",MobileAdInGameEnd.boxContents.body.width()-23),MobileAdInGameEnd.boxContents.close.show(),MobileAdInGameEnd.boxContents.header.html(MobileAdInGameEnd.close),MobileAdInGameEnd.boxContents.footer.text(""))},1E3)},Close:function(){this.overlay.hide()}};(function(a,b){function c(l,a,g){if(g===b&&1===l.nodeType)if(g="data-"+a.replace(tc,"-$1").toLowerCase(),g=l.getAttribute(g),"string"==typeof g){try{g="true"===g?!0:"false"===g?!1:"null"===g?null:+g+""===g?+g:uc.test(g)?d.parseJSON(g):g}catch(E){}d.data(l,a,g)}else g=b;return g}function f(l){for(var a in l)if(!("data"===a&&d.isEmptyObject(l[a]))&&"toJSON"!==a)return!1;return!0}function e(){return!1}function j(){return!0}function p(l){return!l||!l.parentNode||11===l.parentNode.nodeType}function q(l,
a){do l=l[a];while(l&&1!==l.nodeType);return l}function m(l,a,g){a=a||0;if(d.isFunction(a))return d.grep(l,function(l,d){return!!a.call(l,d,l)===g});if(a.nodeType)return d.grep(l,function(l){return l===a===g});if("string"==typeof a){var b=d.grep(l,function(l){return 1===l.nodeType});if(vc.test(a))return d.filter(a,b,!g);a=d.filter(a,b)}return d.grep(l,function(l){return 0<=d.inArray(l,a)===g})}function t(l){var a=sb.split("|");l=l.createDocumentFragment();if(l.createElement)for(;a.length;)l.createElement(a.pop());
return l}function u(l,a){if(1===a.nodeType&&d.hasData(l)){var g,b,W;b=d._data(l);var e=d._data(a,b),v=b.events;if(v)for(g in delete e.handle,e.events={},v){b=0;for(W=v[g].length;b<W;b++)d.event.add(a,g,v[g][b])}e.data&&(e.data=d.extend({},e.data))}}function s(l,a){var g;1===a.nodeType&&(a.clearAttributes&&a.clearAttributes(),a.mergeAttributes&&a.mergeAttributes(l),g=a.nodeName.toLowerCase(),"object"===g?(a.parentNode&&(a.outerHTML=l.outerHTML),d.support.html5Clone&&l.innerHTML&&!d.trim(a.innerHTML)&&
(a.innerHTML=l.innerHTML)):"input"===g&&tb.test(l.type)?(a.defaultChecked=a.checked=l.checked,a.value!==l.value&&(a.value=l.value)):"option"===g?a.selected=l.defaultSelected:"input"===g||"textarea"===g?a.defaultValue=l.defaultValue:"script"===g&&a.text!==l.text&&(a.text=l.text),a.removeAttribute(d.expando))}function r(l){return"undefined"!=typeof l.getElementsByTagName?l.getElementsByTagName("*"):"undefined"!=typeof l.querySelectorAll?l.querySelectorAll("*"):[]}function A(l){tb.test(l.type)&&(l.defaultChecked=
l.checked)}function L(l,a){if(a in l)return a;for(var g=a.charAt(0).toUpperCase()+a.slice(1),d=a,b=ub.length;b--;)if(a=ub[b]+g,a in l)return a;return d}function I(l,a){return l=a||l,"none"===d.css(l,"display")||!d.contains(l.ownerDocument,l)}function F(l,a){for(var g,b,W=[],e=0,v=l.length;e<v;e++)g=l[e],g.style&&(W[e]=d._data(g,"olddisplay"),a?(!W[e]&&"none"===g.style.display&&(g.style.display=""),""===g.style.display&&I(g)&&(W[e]=d._data(g,"olddisplay",vb(g.nodeName)))):(b=N(g,"display"),!W[e]&&
"none"!==b&&d._data(g,"olddisplay",b)));for(e=0;e<v;e++)if(g=l[e],g.style&&(!a||"none"===g.style.display||""===g.style.display))g.style.display=a?W[e]||"":"none";return l}function z(l,a,g){return(l=wc.exec(a))?Math.max(0,l[1]-(g||0))+(l[2]||"px"):a}function wb(l,a,g,b){a=g===(b?"border":"content")?4:"width"===a?1:0;for(var e=0;4>a;a+=2)"margin"===g&&(e+=d.css(l,g+ca[a],!0)),b?("content"===g&&(e-=parseFloat(N(l,"padding"+ca[a]))||0),"margin"!==g&&(e-=parseFloat(N(l,"border"+ca[a]+"Width"))||0)):(e+=
parseFloat(N(l,"padding"+ca[a]))||0,"padding"!==g&&(e+=parseFloat(N(l,"border"+ca[a]+"Width"))||0));return e}function xb(l,a,g){var b="width"===a?l.offsetWidth:l.offsetHeight,e=!0,c=d.support.boxSizing&&"border-box"===d.css(l,"boxSizing");if(0>=b||null==b){b=N(l,a);if(0>b||null==b)b=l.style[a];if(ua.test(b))return b;e=c&&(d.support.boxSizingReliable||b===l.style[a]);b=parseFloat(b)||0}return b+wb(l,a,g||(c?"border":"content"),e)+"px"}function vb(l){if(Ta[l])return Ta[l];var a=d("<"+l+">").appendTo(x.body),
g=a.css("display");a.remove();if("none"===g||""===g){ja=x.body.appendChild(ja||d.extend(x.createElement("iframe"),{frameBorder:0,width:0,height:0}));if(!ka||!ja.createElement)ka=(ja.contentWindow||ja.contentDocument).document,ka.write("<!doctype html><html><body>"),ka.close();a=ka.body.appendChild(ka.createElement(l));g=N(a,"display");x.body.removeChild(ja)}return Ta[l]=g,g}function Ua(l,a,g,b){var e;if(d.isArray(a))d.each(a,function(a,n){g||xc.test(l)?b(l,n):Ua(l+"["+("object"==typeof n?a:"")+"]",
n,g,b)});else if(!g&&"object"===d.type(a))for(e in a)Ua(l+"["+e+"]",a[e],g,b);else b(l,a)}function yb(l){return function(a,g){"string"!=typeof a&&(g=a,a="*");var b,e,c=a.toLowerCase().split(da),v=0,f=c.length;if(d.isFunction(g))for(;v<f;v++)b=c[v],(e=/^\+/.test(b))&&(b=b.substr(1)||"*"),b=l[b]=l[b]||[],b[e?"unshift":"push"](g)}}function va(l,a,g,d,e,c){e=e||a.dataTypes[0];c=c||{};c[e]=!0;var v;e=l[e];for(var f=0,j=e?e.length:0,m=l===Va;f<j&&(m||!v);f++)v=e[f](a,g,d),"string"==typeof v&&(!m||c[v]?
v=b:(a.dataTypes.unshift(v),v=va(l,a,g,d,v,c)));return(m||!v)&&!c["*"]&&(v=va(l,a,g,d,"*",c)),v}function zb(l,a){var g,E,e=d.ajaxSettings.flatOptions||{};for(g in a)a[g]!==b&&((e[g]?l:E||(E={}))[g]=a[g]);E&&d.extend(!0,l,E)}function Ab(){try{return new a.XMLHttpRequest}catch(l){}}function Bb(){return setTimeout(function(){wa=b},0),wa=d.now()}function Cb(l,a,g){var b,e=0,c=xa.length,v=d.Deferred().always(function(){delete f.elem}),f=function(){for(var a=wa||Bb(),a=Math.max(0,j.startTime+j.duration-
a),n=1-(a/j.duration||0),g=0,b=j.tweens.length;g<b;g++)j.tweens[g].run(n);return v.notifyWith(l,[j,n,a]),1>n&&b?a:(v.resolveWith(l,[j]),!1)},j=v.promise({elem:l,props:d.extend({},a),opts:d.extend(!0,{specialEasing:{}},g),originalProperties:a,originalOptions:g,startTime:wa||Bb(),duration:g.duration,tweens:[],createTween:function(a,n){var g=d.Tween(l,j.opts,a,n,j.opts.specialEasing[a]||j.opts.easing);return j.tweens.push(g),g},stop:function(a){for(var n=0,g=a?j.tweens.length:0;n<g;n++)j.tweens[n].run(1);
return a?v.resolveWith(l,[j,a]):v.rejectWith(l,[j,a]),this}});a=j.props;g=j.opts.specialEasing;var m,p,y,s;for(b in a)if(m=d.camelCase(b),p=g[m],y=a[b],d.isArray(y)&&(p=y[1],y=a[b]=y[0]),b!==m&&(a[m]=y,delete a[b]),(s=d.cssHooks[m])&&"expand"in s)for(b in y=s.expand(y),delete a[m],y)b in a||(a[b]=y[b],g[b]=p);else g[m]=p;for(;e<c;e++)if(b=xa[e].call(j,l,a,j.opts))return b;var t=j;d.each(a,function(l,a){for(var n=(pa[l]||[]).concat(pa["*"]),g=0,b=n.length;g<b&&!n[g].call(t,l,a);g++);});return d.isFunction(j.opts.start)&&
j.opts.start.call(l,j),d.fx.timer(d.extend(f,{anim:j,queue:j.opts.queue,elem:l})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}function M(l,a,g,b,d){return new M.prototype.init(l,a,g,b,d)}function ya(l,a){var g,b={height:l},d=0;for(a=a?1:0;4>d;d+=2-a)g=ca[d],b["margin"+g]=b["padding"+g]=l;return a&&(b.opacity=b.width=l),b}function Db(l){return d.isWindow(l)?l:9===l.nodeType?l.defaultView||l.parentWindow:!1}var Eb,za,x=a.document,zc=a.location,
Ac=a.navigator,Bc=a.jQuery,Cc=a.$,Fb=Array.prototype.push,Y=Array.prototype.slice,Gb=Array.prototype.indexOf,Dc=Object.prototype.toString,Wa=Object.prototype.hasOwnProperty,Xa=String.prototype.trim,d=function(l,a){return new d.fn.init(l,a,Eb)},Aa=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,Ec=/\S/,da=/\s+/,Fc=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,Gc=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,Hb=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,Hc=/^[\],:{}\s]*$/,Ic=/(?:^|:|,)(?:\s*\[)+/g,Jc=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,
Kc=/"[^"\\\r\n]*"|true|false|null|-?(?:\d\d*\.|)\d+(?:[eE][\-+]?\d+|)/g,Lc=/^-ms-/,Mc=/-([\da-z])/gi,Nc=function(l,a){return(a+"").toUpperCase()},Ba=function(){x.addEventListener?(x.removeEventListener("DOMContentLoaded",Ba,!1),d.ready()):"complete"===x.readyState&&(x.detachEvent("onreadystatechange",Ba),d.ready())},Ib={};d.fn=d.prototype={constructor:d,init:function(l,a,g){var E,e;if(!l)return this;if(l.nodeType)return this.context=this[0]=l,this.length=1,this;if("string"==typeof l){"<"===l.charAt(0)&&
">"===l.charAt(l.length-1)&&3<=l.length?E=[null,l,null]:E=Gc.exec(l);if(E&&(E[1]||!a)){if(E[1])return a=a instanceof d?a[0]:a,e=a&&a.nodeType?a.ownerDocument||a:x,l=d.parseHTML(E[1],e,!0),Hb.test(E[1])&&d.isPlainObject(a)&&this.attr.call(l,a,!0),d.merge(this,l);if((a=x.getElementById(E[2]))&&a.parentNode){if(a.id!==E[2])return g.find(l);this.length=1;this[0]=a}return this.context=x,this.selector=l,this}return!a||a.jquery?(a||g).find(l):this.constructor(a).find(l)}return d.isFunction(l)?g.ready(l):
(l.selector!==b&&(this.selector=l.selector,this.context=l.context),d.makeArray(l,this))},selector:"",jquery:"1.8.2",length:0,size:function(){return this.length},toArray:function(){return Y.call(this)},get:function(l){return null==l?this.toArray():0>l?this[this.length+l]:this[l]},pushStack:function(l,a,g){l=d.merge(this.constructor(),l);return l.prevObject=this,l.context=this.context,"find"===a?l.selector=this.selector+(this.selector?" ":"")+g:a&&(l.selector=this.selector+"."+a+"("+g+")"),l},each:function(l,
a){return d.each(this,l,a)},ready:function(l){return d.ready.promise().done(l),this},eq:function(l){return l=+l,-1===l?this.slice(l):this.slice(l,l+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(Y.apply(this,arguments),"slice",Y.call(arguments).join(","))},map:function(l){return this.pushStack(d.map(this,function(a,g){return l.call(a,g,a)}))},end:function(){return this.prevObject||this.constructor(null)},push:Fb,sort:[].sort,splice:[].splice};
d.fn.init.prototype=d.fn;d.extend=d.fn.extend=function(){var l,a,g,E,e,c,v=arguments[0]||{},f=1,j=arguments.length,m=!1;"boolean"==typeof v&&(m=v,v=arguments[1]||{},f=2);"object"!=typeof v&&!d.isFunction(v)&&(v={});for(j===f&&(v=this,--f);f<j;f++)if(null!=(l=arguments[f]))for(a in l)g=v[a],E=l[a],v!==E&&(m&&E&&(d.isPlainObject(E)||(e=d.isArray(E)))?(e?(e=!1,c=g&&d.isArray(g)?g:[]):c=g&&d.isPlainObject(g)?g:{},v[a]=d.extend(m,c,E)):E!==b&&(v[a]=E));return v};d.extend({noConflict:function(l){return a.$===
d&&(a.$=Cc),l&&a.jQuery===d&&(a.jQuery=Bc),d},isReady:!1,readyWait:1,holdReady:function(l){l?d.readyWait++:d.ready(!0)},ready:function(l){if(!(!0===l?--d.readyWait:d.isReady)){if(!x.body)return setTimeout(d.ready,1);d.isReady=!0;!0!==l&&0<--d.readyWait||(za.resolveWith(x,[d]),d.fn.trigger&&d(x).trigger("ready").off("ready"))}},isFunction:function(l){return"function"===d.type(l)},isArray:Array.isArray||function(l){return"array"===d.type(l)},isWindow:function(l){return null!=l&&l==l.window},isNumeric:function(l){return!isNaN(parseFloat(l))&&
isFinite(l)},type:function(l){return null==l?String(l):Ib[Dc.call(l)]||"object"},isPlainObject:function(l){if(!l||"object"!==d.type(l)||l.nodeType||d.isWindow(l))return!1;try{if(l.constructor&&!Wa.call(l,"constructor")&&!Wa.call(l.constructor.prototype,"isPrototypeOf"))return!1}catch(a){return!1}for(var g in l);return g===b||Wa.call(l,g)},isEmptyObject:function(l){for(var a in l)return!1;return!0},error:function(l){throw Error(l);},parseHTML:function(l,a,g){var b;return!l||"string"!=typeof l?null:
("boolean"==typeof a&&(g=a,a=0),a=a||x,(b=Hb.exec(l))?[a.createElement(b[1])]:(b=d.buildFragment([l],a,g?null:[]),d.merge([],(b.cacheable?d.clone(b.fragment):b.fragment).childNodes)))},parseJSON:function(l){if(!l||"string"!=typeof l)return null;l=d.trim(l);if(a.JSON&&a.JSON.parse)return a.JSON.parse(l);if(Hc.test(l.replace(Jc,"@").replace(Kc,"]").replace(Ic,"")))return(new Function("return "+l))();d.error("Invalid JSON: "+l)},parseXML:function(l){var n,g;if(!l||"string"!=typeof l)return null;try{a.DOMParser?
(g=new DOMParser,n=g.parseFromString(l,"text/xml")):(n=new ActiveXObject("Microsoft.XMLDOM"),n.async="false",n.loadXML(l))}catch(E){n=b}return(!n||!n.documentElement||n.getElementsByTagName("parsererror").length)&&d.error("Invalid XML: "+l),n},noop:function(){},globalEval:function(l){l&&Ec.test(l)&&(a.execScript||function(l){a.eval.call(a,l)})(l)},camelCase:function(l){return l.replace(Lc,"ms-").replace(Mc,Nc)},nodeName:function(l,a){return l.nodeName&&l.nodeName.toLowerCase()===a.toLowerCase()},
each:function(l,a,g){var E,e=0,c=l.length,v=c===b||d.isFunction(l);if(g)if(v)for(E in l){if(!1===a.apply(l[E],g))break}else for(;e<c&&!1!==a.apply(l[e++],g););else if(v)for(E in l){if(!1===a.call(l[E],E,l[E]))break}else for(;e<c&&!1!==a.call(l[e],e,l[e++]););return l},trim:Xa&&!Xa.call("\ufeff\u00a0")?function(l){return null==l?"":Xa.call(l)}:function(l){return null==l?"":(l+"").replace(Fc,"")},makeArray:function(l,a){var g,b=a||[];return null!=l&&(g=d.type(l),null==l.length||"string"===g||"function"===
g||"regexp"===g||d.isWindow(l)?Fb.call(b,l):d.merge(b,l)),b},inArray:function(l,a,g){var b;if(a){if(Gb)return Gb.call(a,l,g);b=a.length;for(g=g?0>g?Math.max(0,b+g):g:0;g<b;g++)if(g in a&&a[g]===l)return g}return-1},merge:function(l,a){var g=a.length,d=l.length,e=0;if("number"==typeof g)for(;e<g;e++)l[d++]=a[e];else for(;a[e]!==b;)l[d++]=a[e++];return l.length=d,l},grep:function(l,a,g){var b,d=[],e=0,c=l.length;for(g=!!g;e<c;e++)b=!!a(l[e],e),g!==b&&d.push(l[e]);return d},map:function(l,a,g){var e,
c,f=[],v=0,j=l.length;if(l instanceof d||j!==b&&"number"==typeof j&&(0<j&&l[0]&&l[j-1]||0===j||d.isArray(l)))for(;v<j;v++)e=a(l[v],v,g),null!=e&&(f[f.length]=e);else for(c in l)e=a(l[c],c,g),null!=e&&(f[f.length]=e);return f.concat.apply([],f)},guid:1,proxy:function(l,a){var g,e,c;return"string"==typeof a&&(g=l[a],a=l,l=g),d.isFunction(l)?(e=Y.call(arguments,2),c=function(){return l.apply(a,e.concat(Y.call(arguments)))},c.guid=l.guid=l.guid||d.guid++,c):b},access:function(l,a,g,e,c,f,v){var j,m=null==
g,p=0,s=l.length;if(g&&"object"==typeof g){for(p in g)d.access(l,a,p,g[p],1,f,e);c=1}else if(e!==b){j=v===b&&d.isFunction(e);m&&(j?(j=a,a=function(l,a,n){return j.call(d(l),n)}):(a.call(l,e),a=null));if(a)for(;p<s;p++)a(l[p],g,j?e.call(l[p],p,a(l[p],g)):e,v);c=1}return c?l:m?a.call(l):s?a(l[0],g):f},now:function(){return(new Date).getTime()}});d.ready.promise=function(l){if(!za)if(za=d.Deferred(),"complete"===x.readyState)setTimeout(d.ready,1);else if(x.addEventListener)x.addEventListener("DOMContentLoaded",
Ba,!1),a.addEventListener("load",d.ready,!1);else{x.attachEvent("onreadystatechange",Ba);a.attachEvent("onload",d.ready);var n=!1;try{n=null==a.frameElement&&x.documentElement}catch(g){}n&&n.doScroll&&function W(){if(!d.isReady){try{n.doScroll("left")}catch(l){return setTimeout(W,50)}d.ready()}}()}return za.promise(l)};d.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(l,a){Ib["[object "+a+"]"]=a.toLowerCase()});Eb=d(x);var Jb={};d.Callbacks=function(l){var a;if("string"==
typeof l){if(!(a=Jb[l])){a=l;var g=Jb[a]={};a=(d.each(a.split(da),function(l,a){g[a]=!0}),g)}}else a=d.extend({},l);l=a;var e,c,f,v,j,m,p=[],s=!l.once&&[],y=function(a){e=l.memory&&a;c=!0;m=v||0;v=0;j=p.length;for(f=!0;p&&m<j;m++)if(!1===p[m].apply(a[0],a[1])&&l.stopOnFalse){e=!1;break}f=!1;p&&(s?s.length&&y(s.shift()):e?p=[]:t.disable())},t={add:function(){if(p){var a=p.length;(function yc(a){d.each(a,function(a,n){var g=d.type(n);"function"===g&&(!l.unique||!t.has(n))?p.push(n):n&&n.length&&"string"!==
g&&yc(n)})})(arguments);f?j=p.length:e&&(v=a,y(e))}return this},remove:function(){return p&&d.each(arguments,function(l,a){for(var n;-1<(n=d.inArray(a,p,n));)p.splice(n,1),f&&(n<=j&&j--,n<=m&&m--)}),this},has:function(l){return-1<d.inArray(l,p)},empty:function(){return p=[],this},disable:function(){return p=s=e=b,this},disabled:function(){return!p},lock:function(){return s=b,e||t.disable(),this},locked:function(){return!s},fireWith:function(l,a){return a=a||[],a=[l,a.slice?a.slice():a],p&&(!c||s)&&
(f?s.push(a):y(a)),this},fire:function(){return t.fireWith(this,arguments),this},fired:function(){return!!c}};return t};d.extend({Deferred:function(l){var a=[["resolve","done",d.Callbacks("once memory"),"resolved"],["reject","fail",d.Callbacks("once memory"),"rejected"],["notify","progress",d.Callbacks("memory")]],g="pending",b={state:function(){return g},always:function(){return e.done(arguments).fail(arguments),this},then:function(){var l=arguments;return d.Deferred(function(g){d.each(a,function(a,
n){var b=n[0],E=l[a];e[n[1]](d.isFunction(E)?function(){var l=E.apply(this,arguments);l&&d.isFunction(l.promise)?l.promise().done(g.resolve).fail(g.reject).progress(g.notify):g[b+"With"](this===e?g:this,[l])}:g[b])});l=null}).promise()},promise:function(l){return null!=l?d.extend(l,b):b}},e={};return b.pipe=b.then,d.each(a,function(l,d){var c=d[2],f=d[3];b[d[1]]=c.add;f&&c.add(function(){g=f},a[l^1][2].disable,a[2][2].lock);e[d[0]]=c.fire;e[d[0]+"With"]=c.fireWith}),b.promise(e),l&&l.call(e,e),e},
when:function(l){var a=0,g=Y.call(arguments),b=g.length,e=1!==b||l&&d.isFunction(l.promise)?b:0,c=1===e?l:d.Deferred(),v=function(l,a,n){return function(g){a[l]=this;n[l]=1<arguments.length?Y.call(arguments):g;n===f?c.notifyWith(a,n):--e||c.resolveWith(a,n)}},f,j,m;if(1<b){f=Array(b);j=Array(b);for(m=Array(b);a<b;a++)g[a]&&d.isFunction(g[a].promise)?g[a].promise().done(v(a,m,g)).fail(c.reject).progress(v(a,j,f)):--e}return e||c.resolveWith(m,g),c.promise()}});var Oc=d,Ya,G,Ca,ea,Da,Ea,O,fa,Fa,Za,
qa,Kb,C=x.createElement("div");C.setAttribute("className","t");C.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>";Ca=C.getElementsByTagName("*");ea=C.getElementsByTagName("a")[0];ea.style.cssText="top:1px;float:left;opacity:.5";if(!Ca||!Ca.length)Ya={};else{Da=x.createElement("select");Ea=Da.appendChild(x.createElement("option"));O=C.getElementsByTagName("input")[0];G={leadingWhitespace:3===C.firstChild.nodeType,tbody:!C.getElementsByTagName("tbody").length,htmlSerialize:!!C.getElementsByTagName("link").length,
style:/top/.test(ea.getAttribute("style")),hrefNormalized:"/a"===ea.getAttribute("href"),opacity:/^0.5/.test(ea.style.opacity),cssFloat:!!ea.style.cssFloat,checkOn:"on"===O.value,optSelected:Ea.selected,getSetAttribute:"t"!==C.className,enctype:!!x.createElement("form").enctype,html5Clone:"<:nav></:nav>"!==x.createElement("nav").cloneNode(!0).outerHTML,boxModel:"CSS1Compat"===x.compatMode,submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,
shrinkWrapBlocks:!1,reliableMarginRight:!0,boxSizingReliable:!0,pixelPosition:!1};O.checked=!0;G.noCloneChecked=O.cloneNode(!0).checked;Da.disabled=!0;G.optDisabled=!Ea.disabled;try{delete C.test}catch(Qd){G.deleteExpando=!1}!C.addEventListener&&C.attachEvent&&C.fireEvent&&(C.attachEvent("onclick",Kb=function(){G.noCloneEvent=!1}),C.cloneNode(!0).fireEvent("onclick"),C.detachEvent("onclick",Kb));O=x.createElement("input");O.value="t";O.setAttribute("type","radio");G.radioValue="t"===O.value;O.setAttribute("checked",
"checked");O.setAttribute("name","t");C.appendChild(O);fa=x.createDocumentFragment();fa.appendChild(C.lastChild);G.checkClone=fa.cloneNode(!0).cloneNode(!0).lastChild.checked;G.appendChecked=O.checked;fa.removeChild(O);fa.appendChild(C);if(C.attachEvent)for(Za in{submit:!0,change:!0,focusin:!0})Fa="on"+Za,(qa=Fa in C)||(C.setAttribute(Fa,"return;"),qa="function"==typeof C[Fa]),G[Za+"Bubbles"]=qa;Ya=(d(function(){var l,n,g,b,d=x.getElementsByTagName("body")[0];d&&(l=x.createElement("div"),l.style.cssText=
"visibility:hidden;border:0;width:0;height:0;position:static;top:0;margin-top:1px",d.insertBefore(l,d.firstChild),n=x.createElement("div"),l.appendChild(n),n.innerHTML="<table><tr><td></td><td>t</td></tr></table>",g=n.getElementsByTagName("td"),g[0].style.cssText="padding:0;margin:0;border:0;display:none",qa=0===g[0].offsetHeight,g[0].style.display="",g[1].style.display="none",G.reliableHiddenOffsets=qa&&0===g[0].offsetHeight,n.innerHTML="",n.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",
G.boxSizing=4===n.offsetWidth,G.doesNotIncludeMarginInBodyOffset=1!==d.offsetTop,a.getComputedStyle&&(G.pixelPosition="1%"!==(a.getComputedStyle(n,null)||{}).top,G.boxSizingReliable="4px"===(a.getComputedStyle(n,null)||{width:"4px"}).width,b=x.createElement("div"),b.style.cssText=n.style.cssText="padding:0;margin:0;border:0;display:block;overflow:hidden;",b.style.marginRight=b.style.width="0",n.style.width="1px",n.appendChild(b),G.reliableMarginRight=!parseFloat((a.getComputedStyle(b,null)||{}).marginRight)),
"undefined"!=typeof n.style.zoom&&(n.innerHTML="",n.style.cssText="padding:0;margin:0;border:0;display:block;overflow:hidden;width:1px;padding:1px;display:inline;zoom:1",G.inlineBlockNeedsLayout=3===n.offsetWidth,n.style.display="block",n.style.overflow="visible",n.innerHTML="<div></div>",n.firstChild.style.width="5px",G.shrinkWrapBlocks=3!==n.offsetWidth,l.style.zoom=1),d.removeChild(l))}),fa.removeChild(C),Ca=ea=Da=Ea=O=fa=C=null,G)}Oc.support=Ya;var uc=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,tc=/([A-Z])/g;
d.extend({cache:{},deletedIds:[],uuid:0,expando:"jQuery"+(d.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(l){return l=l.nodeType?d.cache[l[d.expando]]:l[d.expando],!!l&&!f(l)},data:function(l,a,g,e){if(d.acceptData(l)){var c,f,v=d.expando,j="string"==typeof a,m=l.nodeType,p=m?d.cache:l,s=m?l[v]:l[v]&&v;if(s&&p[s]&&(e||p[s].data)||!(j&&g===b)){s||(m?l[v]=s=d.deletedIds.pop()||d.guid++:s=v);p[s]||(p[s]={},
m||(p[s].toJSON=d.noop));if("object"==typeof a||"function"==typeof a)e?p[s]=d.extend(p[s],a):p[s].data=d.extend(p[s].data,a);return c=p[s],e||(c.data||(c.data={}),c=c.data),g!==b&&(c[d.camelCase(a)]=g),j?(f=c[a],null==f&&(f=c[d.camelCase(a)])):f=c,f}}},removeData:function(l,a,g){if(d.acceptData(l)){var b,e,c,v=l.nodeType,j=v?d.cache:l,m=v?l[d.expando]:d.expando;if(j[m]){if(a&&(b=g?j[m]:j[m].data)){d.isArray(a)||(a in b?a=[a]:(a=d.camelCase(a),a in b?a=[a]:a=a.split(" ")));e=0;for(c=a.length;e<c;e++)delete b[a[e]];
if(!(g?f:d.isEmptyObject)(b))return}if(g||!(delete j[m].data,!f(j[m])))v?d.cleanData([l],!0):d.support.deleteExpando||j!=j.window?delete j[m]:j[m]=null}}},_data:function(a,n,g){return d.data(a,n,g,!0)},acceptData:function(a){var n=a.nodeName&&d.noData[a.nodeName.toLowerCase()];return!n||!0!==n&&a.getAttribute("classid")===n}});d.fn.extend({data:function(a,n){var g,e,f,j,v,m=this[0],p=0,s=null;if(a===b){if(this.length&&(s=d.data(m),1===m.nodeType&&!d._data(m,"parsedAttrs"))){f=m.attributes;for(v=f.length;p<
v;p++)j=f[p].name,j.indexOf("data-")||(j=d.camelCase(j.substring(5)),c(m,j,s[j]));d._data(m,"parsedAttrs",!0)}return s}return"object"==typeof a?this.each(function(){d.data(this,a)}):(g=a.split(".",2),g[1]=g[1]?"."+g[1]:"",e=g[1]+"!",d.access(this,function(n){if(n===b)return s=this.triggerHandler("getData"+e,[g[0]]),s===b&&m&&(s=d.data(m,a),s=c(m,a,s)),s===b&&g[1]?this.data(g[0]):s;g[1]=n;this.each(function(){var b=d(this);b.triggerHandler("setData"+e,g);d.data(this,a,n);b.triggerHandler("changeData"+
e,g)})},null,n,1<arguments.length,null,!1))},removeData:function(a){return this.each(function(){d.removeData(this,a)})}});d.extend({queue:function(a,n,g){var b;if(a)return n=(n||"fx")+"queue",b=d._data(a,n),g&&(!b||d.isArray(g)?b=d._data(a,n,d.makeArray(g)):b.push(g)),b||[]},dequeue:function(a,n){n=n||"fx";var g=d.queue(a,n),b=g.length,e=g.shift(),c=d._queueHooks(a,n),v=function(){d.dequeue(a,n)};"inprogress"===e&&(e=g.shift(),b--);e&&("fx"===n&&g.unshift("inprogress"),delete c.stop,e.call(a,v,c));
!b&&c&&c.empty.fire()},_queueHooks:function(a,n){var g=n+"queueHooks";return d._data(a,g)||d._data(a,g,{empty:d.Callbacks("once memory").add(function(){d.removeData(a,n+"queue",!0);d.removeData(a,g,!0)})})}});d.fn.extend({queue:function(a,n){var g=2;return"string"!=typeof a&&(n=a,a="fx",g--),arguments.length<g?d.queue(this[0],a):n===b?this:this.each(function(){var g=d.queue(this,a,n);d._queueHooks(this,a);"fx"===a&&"inprogress"!==g[0]&&d.dequeue(this,a)})},dequeue:function(a){return this.each(function(){d.dequeue(this,
a)})},delay:function(a,n){return a=d.fx?d.fx.speeds[a]||a:a,n=n||"fx",this.queue(n,function(n,b){var d=setTimeout(n,a);b.stop=function(){clearTimeout(d)}})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,n){var g,e=1,c=d.Deferred(),f=this,v=this.length,j=function(){--e||c.resolveWith(f,[f])};"string"!=typeof a&&(n=a,a=b);for(a=a||"fx";v--;)(g=d._data(f[v],a+"queueHooks"))&&g.empty&&(e++,g.empty.add(j));return j(),c.promise(n)}});var Z,Lb,Mb,Nb=/[\t\r\n]/g,Pc=/\r/g,Qc=/^(?:button|input)$/i,
Rc=/^(?:button|input|object|select|textarea)$/i,Sc=/^a(?:rea|)$/i,Ob=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,Pb=d.support.getSetAttribute;d.fn.extend({attr:function(a,n){return d.access(this,d.attr,a,n,1<arguments.length)},removeAttr:function(a){return this.each(function(){d.removeAttr(this,a)})},prop:function(a,n){return d.access(this,d.prop,a,n,1<arguments.length)},removeProp:function(a){return a=d.propFix[a]||
a,this.each(function(){try{this[a]=b,delete this[a]}catch(n){}})},addClass:function(a){var n,g,b,e,c,v,f;if(d.isFunction(a))return this.each(function(n){d(this).addClass(a.call(this,n,this.className))});if(a&&"string"==typeof a){n=a.split(da);g=0;for(b=this.length;g<b;g++)if(e=this[g],1===e.nodeType)if(!e.className&&1===n.length)e.className=a;else{c=" "+e.className+" ";v=0;for(f=n.length;v<f;v++)0>c.indexOf(" "+n[v]+" ")&&(c+=n[v]+" ");e.className=d.trim(c)}}return this},removeClass:function(a){var n,
g,e,c,f,v,j;if(d.isFunction(a))return this.each(function(n){d(this).removeClass(a.call(this,n,this.className))});if(a&&"string"==typeof a||a===b){n=(a||"").split(da);v=0;for(j=this.length;v<j;v++)if(e=this[v],1===e.nodeType&&e.className){g=(" "+e.className+" ").replace(Nb," ");c=0;for(f=n.length;c<f;c++)for(;0<=g.indexOf(" "+n[c]+" ");)g=g.replace(" "+n[c]+" "," ");e.className=a?d.trim(g):""}}return this},toggleClass:function(a,n){var g=typeof a,b="boolean"==typeof n;return d.isFunction(a)?this.each(function(g){d(this).toggleClass(a.call(this,
g,this.className,n),n)}):this.each(function(){if("string"===g)for(var e,c=0,v=d(this),f=n,j=a.split(da);e=j[c++];)f=b?f:!v.hasClass(e),v[f?"addClass":"removeClass"](e);else if("undefined"===g||"boolean"===g)this.className&&d._data(this,"__className__",this.className),this.className=this.className||!1===a?"":d._data(this,"__className__")||""})},hasClass:function(a){a=" "+a+" ";for(var n=0,g=this.length;n<g;n++)if(1===this[n].nodeType&&0<=(" "+this[n].className+" ").replace(Nb," ").indexOf(a))return!0;
return!1},val:function(a){var n,g,e,c=this[0];if(arguments.length)return e=d.isFunction(a),this.each(function(g){var c,f=d(this);if(1===this.nodeType&&(e?c=a.call(this,g,f.val()):c=a,null==c?c="":"number"==typeof c?c+="":d.isArray(c)&&(c=d.map(c,function(a){return null==a?"":a+""})),n=d.valHooks[this.type]||d.valHooks[this.nodeName.toLowerCase()],!n||!("set"in n)||n.set(this,c,"value")===b))this.value=c});if(c)return n=d.valHooks[c.type]||d.valHooks[c.nodeName.toLowerCase()],n&&"get"in n&&(g=n.get(c,
"value"))!==b?g:(g=c.value,"string"==typeof g?g.replace(Pc,""):null==g?"":g)}});d.extend({valHooks:{option:{get:function(a){var n=a.attributes.value;return!n||n.specified?a.value:a.text}},select:{get:function(a){var n,g,b=a.selectedIndex,e=[],c=a.options,f="select-one"===a.type;if(0>b)return null;a=f?b:0;for(g=f?b+1:c.length;a<g;a++)if(n=c[a],n.selected&&(d.support.optDisabled?!n.disabled:null===n.getAttribute("disabled"))&&(!n.parentNode.disabled||!d.nodeName(n.parentNode,"optgroup"))){n=d(n).val();
if(f)return n;e.push(n)}return f&&!e.length&&c.length?d(c[b]).val():e},set:function(a,n){var g=d.makeArray(n);return d(a).find("option").each(function(){this.selected=0<=d.inArray(d(this).val(),g)}),g.length||(a.selectedIndex=-1),g}}},attrFn:{},attr:function(a,n,g,e){var c,f,v=a.nodeType;if(a&&!(3===v||8===v||2===v)){if(e&&d.isFunction(d.fn[n]))return d(a)[n](g);if("undefined"==typeof a.getAttribute)return d.prop(a,n,g);(e=1!==v||!d.isXMLDoc(a))&&(n=n.toLowerCase(),f=d.attrHooks[n]||(Ob.test(n)?Lb:
Z));if(g!==b){if(null===g){d.removeAttr(a,n);return}return f&&"set"in f&&e&&(c=f.set(a,g,n))!==b?c:(a.setAttribute(n,g+""),g)}return f&&"get"in f&&e&&null!==(c=f.get(a,n))?c:(c=a.getAttribute(n),null===c?b:c)}},removeAttr:function(a,n){var g,b,e,c,f=0;if(n&&1===a.nodeType)for(b=n.split(da);f<b.length;f++)(e=b[f])&&(g=d.propFix[e]||e,c=Ob.test(e),c||d.attr(a,e,""),a.removeAttribute(Pb?e:g),c&&g in a&&(a[g]=!1))},attrHooks:{type:{set:function(a,n){if(Qc.test(a.nodeName)&&a.parentNode)d.error("type property can't be changed");
else if(!d.support.radioValue&&"radio"===n&&d.nodeName(a,"input")){var g=a.value;return a.setAttribute("type",n),g&&(a.value=g),n}}},value:{get:function(a,n){return Z&&d.nodeName(a,"button")?Z.get(a,n):n in a?a.value:null},set:function(a,n,g){if(Z&&d.nodeName(a,"button"))return Z.set(a,n,g);a.value=n}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",
frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(a,n,g){var e,c,f,v=a.nodeType;if(a&&!(3===v||8===v||2===v))return f=1!==v||!d.isXMLDoc(a),f&&(n=d.propFix[n]||n,c=d.propHooks[n]),g!==b?c&&"set"in c&&(e=c.set(a,g,n))!==b?e:a[n]=g:c&&"get"in c&&null!==(e=c.get(a,n))?e:a[n]},propHooks:{tabIndex:{get:function(a){var n=a.getAttributeNode("tabindex");return n&&n.specified?parseInt(n.value,10):Rc.test(a.nodeName)||Sc.test(a.nodeName)&&a.href?0:b}}}});Lb={get:function(a,n){var g,
e=d.prop(a,n);return!0===e||"boolean"!=typeof e&&(g=a.getAttributeNode(n))&&!1!==g.nodeValue?n.toLowerCase():b},set:function(a,n,g){var b;return!1===n?d.removeAttr(a,g):(b=d.propFix[g]||g,b in a&&(a[b]=!0),a.setAttribute(g,g.toLowerCase())),g}};Pb||(Mb={name:!0,id:!0,coords:!0},Z=d.valHooks.button={get:function(a,n){var g;return g=a.getAttributeNode(n),g&&(Mb[n]?""!==g.value:g.specified)?g.value:b},set:function(a,n,g){var b=a.getAttributeNode(g);return b||(b=x.createAttribute(g),a.setAttributeNode(b)),
b.value=n+""}},d.each(["width","height"],function(a,n){d.attrHooks[n]=d.extend(d.attrHooks[n],{set:function(a,l){if(""===l)return a.setAttribute(n,"auto"),l}})}),d.attrHooks.contenteditable={get:Z.get,set:function(a,n,g){""===n&&(n="false");Z.set(a,n,g)}});d.support.hrefNormalized||d.each(["href","src","width","height"],function(a,n){d.attrHooks[n]=d.extend(d.attrHooks[n],{get:function(a){a=a.getAttribute(n,2);return null===a?b:a}})});d.support.style||(d.attrHooks.style={get:function(a){return a.style.cssText.toLowerCase()||
b},set:function(a,n){return a.style.cssText=n+""}});d.support.optSelected||(d.propHooks.selected=d.extend(d.propHooks.selected,{get:function(a){a=a.parentNode;return a&&(a.selectedIndex,a.parentNode&&a.parentNode.selectedIndex),null}}));d.support.enctype||(d.propFix.enctype="encoding");d.support.checkOn||d.each(["radio","checkbox"],function(){d.valHooks[this]={get:function(a){return null===a.getAttribute("value")?"on":a.value}}});d.each(["radio","checkbox"],function(){d.valHooks[this]=d.extend(d.valHooks[this],
{set:function(a,n){if(d.isArray(n))return a.checked=0<=d.inArray(d(a).val(),n)}})});var $a=/^(?:textarea|input|select)$/i,Qb=/^([^\.]*|)(?:\.(.+)|)$/,Tc=/(?:^|\s)hover(\.\S+|)\b/,Uc=/^key/,Vc=/^(?:mouse|contextmenu)|click/,Rb=/^(?:focusinfocus|focusoutblur)$/,Sb=function(a){return d.event.special.hover?a:a.replace(Tc,"mouseenter$1 mouseleave$1")};d.event={add:function(a,n,g,e,c){var f,v,j,m,p,s,y,t,q;if(!(3===a.nodeType||8===a.nodeType||!n||!g||!(f=d._data(a)))){g.handler&&(y=g,g=y.handler,c=y.selector);
g.guid||(g.guid=d.guid++);(j=f.events)||(f.events=j={});(v=f.handle)||(f.handle=v=function(a){return"undefined"!=typeof d&&(!a||d.event.triggered!==a.type)?d.event.dispatch.apply(v.elem,arguments):b},v.elem=a);n=d.trim(Sb(n)).split(" ");for(f=0;f<n.length;f++){m=Qb.exec(n[f])||[];p=m[1];s=(m[2]||"").split(".").sort();q=d.event.special[p]||{};p=(c?q.delegateType:q.bindType)||p;q=d.event.special[p]||{};m=d.extend({type:p,origType:m[1],data:e,handler:g,guid:g.guid,selector:c,needsContext:c&&d.expr.match.needsContext.test(c),
namespace:s.join(".")},y);t=j[p];if(!t&&(t=j[p]=[],t.delegateCount=0,!q.setup||!1===q.setup.call(a,e,s,v)))a.addEventListener?a.addEventListener(p,v,!1):a.attachEvent&&a.attachEvent("on"+p,v);q.add&&(q.add.call(a,m),m.handler.guid||(m.handler.guid=g.guid));c?t.splice(t.delegateCount++,0,m):t.push(m);d.event.global[p]=!0}a=null}},global:{},remove:function(a,n,g,b,e){var c,f,j,m,p,s,t,q,u,r,A=d.hasData(a)&&d._data(a);if(A&&(t=A.events)){n=d.trim(Sb(n||"")).split(" ");for(c=0;c<n.length;c++)if(f=Qb.exec(n[c])||
[],j=m=f[1],f=f[2],j){q=d.event.special[j]||{};j=(b?q.delegateType:q.bindType)||j;u=t[j]||[];p=u.length;f=f?RegExp("(^|\\.)"+f.split(".").sort().join("\\.(?:.*\\.|)")+"(\\.|$)"):null;for(s=0;s<u.length;s++)r=u[s],(e||m===r.origType)&&(!g||g.guid===r.guid)&&(!f||f.test(r.namespace))&&(!b||b===r.selector||"**"===b&&r.selector)&&(u.splice(s--,1),r.selector&&u.delegateCount--,q.remove&&q.remove.call(a,r));0===u.length&&p!==u.length&&((!q.teardown||!1===q.teardown.call(a,f,A.handle))&&d.removeEvent(a,
j,A.handle),delete t[j])}else for(j in t)d.event.remove(a,j+n[c],g,b,!0);d.isEmptyObject(t)&&(delete A.handle,d.removeData(a,"events",!0))}},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(l,n,g,e){if(!g||3!==g.nodeType&&8!==g.nodeType){var c,f,j,m,p,s,t,y=l.type||l;m=[];if(!Rb.test(y+d.event.triggered)&&(0<=y.indexOf("!")&&(y=y.slice(0,-1),c=!0),0<=y.indexOf(".")&&(m=y.split("."),y=m.shift(),m.sort()),g&&!d.event.customEvent[y]||d.event.global[y]))if(l="object"==typeof l?l[d.expando]?
l:new d.Event(y,l):new d.Event(y),l.type=y,l.isTrigger=!0,l.exclusive=c,l.namespace=m.join("."),l.namespace_re=l.namespace?RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,m=0>y.indexOf(":")?"on"+y:"",g){if(l.result=b,l.target||(l.target=g),n=null!=n?d.makeArray(n):[],n.unshift(l),p=d.event.special[y]||{},!(p.trigger&&!1===p.trigger.apply(g,n))){t=[[g,p.bindType||y]];if(!e&&!p.noBubble&&!d.isWindow(g)){f=p.delegateType||y;c=Rb.test(f+y)?g:g.parentNode;for(j=g;c;c=c.parentNode)t.push([c,f]),
j=c;j===(g.ownerDocument||x)&&t.push([j.defaultView||j.parentWindow||a,f])}for(f=0;f<t.length&&!l.isPropagationStopped();f++)c=t[f][0],l.type=t[f][1],(s=(d._data(c,"events")||{})[l.type]&&d._data(c,"handle"))&&s.apply(c,n),(s=m&&c[m])&&d.acceptData(c)&&s.apply&&!1===s.apply(c,n)&&l.preventDefault();return l.type=y,!e&&!l.isDefaultPrevented()&&(!p._default||!1===p._default.apply(g.ownerDocument,n))&&("click"!==y||!d.nodeName(g,"a"))&&d.acceptData(g)&&m&&g[y]&&("focus"!==y&&"blur"!==y||0!==l.target.offsetWidth)&&
!d.isWindow(g)&&(j=g[m],j&&(g[m]=null),d.event.triggered=y,g[y](),d.event.triggered=b,j&&(g[m]=j)),l.result}}else for(f in g=d.cache,g)g[f].events&&g[f].events[y]&&d.event.trigger(l,n,g[f].handle.elem,!0)}},dispatch:function(l){l=d.event.fix(l||a.event);var n,g,e,c,f,j,m=(d._data(this,"events")||{})[l.type]||[],p=m.delegateCount,s=Y.call(arguments),t=!l.exclusive&&!l.namespace,y=d.event.special[l.type]||{},q=[];s[0]=l;l.delegateTarget=this;if(!(y.preDispatch&&!1===y.preDispatch.call(this,l))){if(p&&
(!l.button||"click"!==l.type))for(g=l.target;g!=this;g=g.parentNode||this)if(!0!==g.disabled||"click"!==l.type){c={};f=[];for(n=0;n<p;n++)e=m[n],j=e.selector,c[j]===b&&(c[j]=e.needsContext?0<=d(j,this).index(g):d.find(j,this,null,[g]).length),c[j]&&f.push(e);f.length&&q.push({elem:g,matches:f})}m.length>p&&q.push({elem:this,matches:m.slice(p)});for(n=0;n<q.length&&!l.isPropagationStopped();n++){c=q[n];l.currentTarget=c.elem;for(g=0;g<c.matches.length&&!l.isImmediatePropagationStopped();g++)if(e=c.matches[g],
t||!l.namespace&&!e.namespace||l.namespace_re&&l.namespace_re.test(e.namespace))l.data=e.data,l.handleObj=e,e=((d.event.special[e.origType]||{}).handle||e.handler).apply(c.elem,s),e!==b&&(l.result=e,!1===e&&(l.preventDefault(),l.stopPropagation()))}return y.postDispatch&&y.postDispatch.call(this,l),l.result}},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},
keyHooks:{props:["char","charCode","key","keyCode"],filter:function(a,n){return null==a.which&&(a.which=null!=n.charCode?n.charCode:n.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,n){var g,d,e,c=n.button,f=n.fromElement;return null==a.pageX&&null!=n.clientX&&(g=a.target.ownerDocument||x,d=g.documentElement,e=g.body,a.pageX=n.clientX+(d&&d.scrollLeft||e&&e.scrollLeft||0)-(d&&d.clientLeft||
e&&e.clientLeft||0),a.pageY=n.clientY+(d&&d.scrollTop||e&&e.scrollTop||0)-(d&&d.clientTop||e&&e.clientTop||0)),!a.relatedTarget&&f&&(a.relatedTarget=f===a.target?n.toElement:f),!a.which&&c!==b&&(a.which=c&1?1:c&2?3:c&4?2:0),a}},fix:function(a){if(a[d.expando])return a;var n,b,e=a,c=d.event.fixHooks[a.type]||{},f=c.props?this.props.concat(c.props):this.props;a=d.Event(e);for(n=f.length;n;)b=f[--n],a[b]=e[b];return a.target||(a.target=e.srcElement||x),3===a.target.nodeType&&(a.target=a.target.parentNode),
a.metaKey=!!a.metaKey,c.filter?c.filter(a,e):a},special:{load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(a,n,b){d.isWindow(this)&&(this.onbeforeunload=b)},teardown:function(a,n){this.onbeforeunload===n&&(this.onbeforeunload=null)}}},simulate:function(a,n,b,e){a=d.extend(new d.Event,b,{type:a,isSimulated:!0,originalEvent:{}});e?d.event.trigger(a,null,n):d.event.dispatch.call(n,a);a.isDefaultPrevented()&&b.preventDefault()}};d.event.handle=
d.event.dispatch;d.removeEvent=x.removeEventListener?function(a,n,b){a.removeEventListener&&a.removeEventListener(n,b,!1)}:function(a,n,b){n="on"+n;a.detachEvent&&("undefined"==typeof a[n]&&(a[n]=null),a.detachEvent(n,b))};d.Event=function(a,n){if(this instanceof d.Event)a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||!1===a.returnValue||a.getPreventDefault&&a.getPreventDefault()?j:e):this.type=a,n&&d.extend(this,n),this.timeStamp=a&&a.timeStamp||d.now(),
this[d.expando]=!0;else return new d.Event(a,n)};d.Event.prototype={preventDefault:function(){this.isDefaultPrevented=j;var a=this.originalEvent;a&&(a.preventDefault?a.preventDefault():a.returnValue=!1)},stopPropagation:function(){this.isPropagationStopped=j;var a=this.originalEvent;a&&(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=j;this.stopPropagation()},isDefaultPrevented:e,isPropagationStopped:e,isImmediatePropagationStopped:e};
d.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,n){d.event.special[a]={delegateType:n,bindType:n,handle:function(a){var l,b=a.relatedTarget,e=a.handleObj;if(!b||b!==this&&!d.contains(this,b))a.type=e.origType,l=e.handler.apply(this,arguments),a.type=n;return l}}});d.support.submitBubbles||(d.event.special.submit={setup:function(){if(d.nodeName(this,"form"))return!1;d.event.add(this,"click._submit keypress._submit",function(a){a=a.target;(a=d.nodeName(a,"input")||d.nodeName(a,"button")?
a.form:b)&&!d._data(a,"_submit_attached")&&(d.event.add(a,"submit._submit",function(a){a._submit_bubble=!0}),d._data(a,"_submit_attached",!0))})},postDispatch:function(a){a._submit_bubble&&(delete a._submit_bubble,this.parentNode&&!a.isTrigger&&d.event.simulate("submit",this.parentNode,a,!0))},teardown:function(){if(d.nodeName(this,"form"))return!1;d.event.remove(this,"._submit")}});d.support.changeBubbles||(d.event.special.change={setup:function(){if($a.test(this.nodeName)){if("checkbox"===this.type||
"radio"===this.type)d.event.add(this,"propertychange._change",function(a){"checked"===a.originalEvent.propertyName&&(this._just_changed=!0)}),d.event.add(this,"click._change",function(a){this._just_changed&&!a.isTrigger&&(this._just_changed=!1);d.event.simulate("change",this,a,!0)});return!1}d.event.add(this,"beforeactivate._change",function(a){a=a.target;$a.test(a.nodeName)&&!d._data(a,"_change_attached")&&(d.event.add(a,"change._change",function(a){this.parentNode&&!a.isSimulated&&!a.isTrigger&&
d.event.simulate("change",this.parentNode,a,!0)}),d._data(a,"_change_attached",!0))})},handle:function(a){var n=a.target;if(this!==n||a.isSimulated||a.isTrigger||"radio"!==n.type&&"checkbox"!==n.type)return a.handleObj.handler.apply(this,arguments)},teardown:function(){return d.event.remove(this,"._change"),!$a.test(this.nodeName)}});d.support.focusinBubbles||d.each({focus:"focusin",blur:"focusout"},function(a,n){var b=0,e=function(a){d.event.simulate(n,a.target,d.event.fix(a),!0)};d.event.special[n]=
{setup:function(){0===b++&&x.addEventListener(a,e,!0)},teardown:function(){0===--b&&x.removeEventListener(a,e,!0)}}});d.fn.extend({on:function(a,n,g,c,f){var j,v;if("object"==typeof a){"string"!=typeof n&&(g=g||n,n=b);for(v in a)this.on(v,n,g,a[v],f);return this}null==g&&null==c?(c=n,g=n=b):null==c&&("string"==typeof n?(c=g,g=b):(c=g,g=n,n=b));if(!1===c)c=e;else if(!c)return this;return 1===f&&(j=c,c=function(a){return d().off(a),j.apply(this,arguments)},c.guid=j.guid||(j.guid=d.guid++)),this.each(function(){d.event.add(this,
a,c,g,n)})},one:function(a,n,b,d){return this.on(a,n,b,d,1)},off:function(a,n,g){var c,f;if(a&&a.preventDefault&&a.handleObj)return c=a.handleObj,d(a.delegateTarget).off(c.namespace?c.origType+"."+c.namespace:c.origType,c.selector,c.handler),this;if("object"==typeof a){for(f in a)this.off(f,n,a[f]);return this}if(!1===n||"function"==typeof n)g=n,n=b;return!1===g&&(g=e),this.each(function(){d.event.remove(this,a,g,n)})},bind:function(a,n,b){return this.on(a,null,n,b)},unbind:function(a,b){return this.off(a,
null,b)},live:function(a,b,g){return d(this.context).on(a,this.selector,b,g),this},die:function(a,b){return d(this.context).off(a,this.selector||"**",b),this},delegate:function(a,b,g,d){return this.on(b,a,g,d)},undelegate:function(a,b,g){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",g)},trigger:function(a,b){return this.each(function(){d.event.trigger(a,b,this)})},triggerHandler:function(a,b){if(this[0])return d.event.trigger(a,b,this[0],!0)},toggle:function(a){var b=arguments,g=
a.guid||d.guid++,e=0,c=function(g){var c=(d._data(this,"lastToggle"+a.guid)||0)%e;return d._data(this,"lastToggle"+a.guid,c+1),g.preventDefault(),b[c].apply(this,arguments)||!1};for(c.guid=g;e<b.length;)b[e++].guid=g;return this.click(c)},hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}});d.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),
function(a,b){d.fn[b]=function(a,l){return null==l&&(l=a,a=null),0<arguments.length?this.on(b,null,a,l):this.trigger(b)};Uc.test(b)&&(d.event.fixHooks[b]=d.event.keyHooks);Vc.test(b)&&(d.event.fixHooks[b]=d.event.mouseHooks)});var Wc=a,B=function(a,b,g,d){g=g||[];b=b||U;var e,c,f,j,m=b.nodeType;if(!a||"string"!=typeof a)return g;if(1!==m&&9!==m)return[];f=Ga(b);if(!f&&!d&&(e=Xc.exec(a)))if(j=e[1])if(9===m){c=b.getElementById(j);if(!c||!c.parentNode)return g;if(c.id===j)return g.push(c),g}else{if(b.ownerDocument&&
(c=b.ownerDocument.getElementById(j))&&Tb(b,c)&&c.id===j)return g.push(c),g}else{if(e[2])return la.apply(g,ma.call(b.getElementsByTagName(a),0)),g;if((j=e[3])&&Ub&&b.getElementsByClassName)return la.apply(g,ma.call(b.getElementsByClassName(j),0)),g}return ab(a.replace(Ha,"$1"),b,g,d,f)},ra=function(a){return function(b){return"input"===b.nodeName.toLowerCase()&&b.type===a}},Vb=function(a){return function(b){var g=b.nodeName.toLowerCase();return("input"===g||"button"===g)&&b.type===a}},ga=function(a){return V(function(b){return b=
+b,V(function(g,d){for(var e,c=a([],g.length,b),f=c.length;f--;)g[e=c[f]]&&(g[e]=!(d[e]=g[e]))})})},Ia=function(a,b,g){if(a===b)return g;for(a=a.nextSibling;a;){if(a===b)return-1;a=a.nextSibling}return 1},Ka=function(a,b){var g,d,e,c,f,j,m;if(f=Wb[J][a])return b?0:f.slice(0);f=a;j=[];for(m=H.preFilter;f;){if(!g||(d=Yc.exec(f)))d&&(f=f.slice(d[0].length)),j.push(e=[]);g=!1;if(d=Zc.exec(f))e.push(g=new Xb(d.shift())),f=f.slice(g.length),g.type=d[0].replace(Ha," ");for(c in H.filter)(d=Ja[c].exec(f))&&
(!m[c]||(d=m[c](d,U,!0)))&&(e.push(g=new Xb(d.shift())),f=f.slice(g.length),g.type=c,g.matches=d);if(!g)break}return b?f.length:f?B.error(a):Wb(a,j).slice(0)},cb=function(a,b,g){var d=b.dir,e=g&&"parentNode"===b.dir,c=$c++;return b.first?function(b,g,n){for(;b=b[d];)if(e||1===b.nodeType)return a(b,g,n)}:function(b,g,n){if(n)for(;b=b[d];){if((e||1===b.nodeType)&&a(b,g,n))return b}else for(var f,j=sa+" "+c+" ",m=j+bb;b=b[d];)if(e||1===b.nodeType){if((f=b[J])===m)return b.sizset;if("string"==typeof f&&
0===f.indexOf(j)){if(b.sizset)return b}else{b[J]=m;if(a(b,g,n))return b.sizset=!0,b;b.sizset=!1}}}},db=function(a){return 1<a.length?function(b,g,d){for(var e=a.length;e--;)if(!a[e](b,g,d))return!1;return!0}:a[0]},La=function(a,b,g,d,e){for(var c,f=[],j=0,m=a.length,p=null!=b;j<m;j++)if(c=a[j])if(!g||g(c,d,e))f.push(c),p&&b.push(j);return f},eb=function(a,b,g,d,e,c){return d&&!d[J]&&(d=eb(d)),e&&!e[J]&&(e=eb(e,c)),V(function(c,f,j,m){if(!c||!e){var p,s,K=[],t=[],q=f.length;if(!(s=c)){s=b||"*";var u=
j.nodeType?[j]:j,r=[];p=0;for(var A=u.length;p<A;p++)B(s,u[p],r,c);s=r}u=a&&(c||!b)?La(s,K,a,j,m):s;r=g?e||(c?a:q||d)?[]:f:u;g&&g(u,r,j,m);if(d){s=La(r,t);d(s,[],j,m);for(j=s.length;j--;)if(p=s[j])r[t[j]]=!(u[t[j]]=p)}if(c)for(j=a&&r.length;j--;){if(p=r[j])c[K[j]]=!(f[K[j]]=p)}else r=La(r===f?r.splice(q,r.length):r),e?e(null,f,r,m):la.apply(f,r)}})},fb=function(a){var b,g,d,e=a.length,c=H.relative[a[0].type];g=c||H.relative[" "];for(var f=c?1:0,j=cb(function(a){return a===b},g,!0),m=cb(function(a){return-1<
Yb.call(b,a)},g,!0),p=[function(a,l,g){return!c&&(g||l!==Ma)||((b=l).nodeType?j(a,l,g):m(a,l,g))}];f<e;f++)if(g=H.relative[a[f].type])p=[cb(db(p),g)];else{g=H.filter[a[f].type].apply(null,a[f].matches);if(g[J]){for(d=++f;d<e&&!H.relative[a[d].type];d++);return eb(1<f&&db(p),1<f&&a.slice(0,f-1).join("").replace(Ha,"$1"),g,f<d&&fb(a.slice(f,d)),d<e&&fb(a=a.slice(d)),d<e&&a.join(""))}p.push(g)}return db(p)},ab=function(a,b,g,d,e){var c,f,j,m,p=Ka(a);if(!d&&1===p.length){f=p[0]=p[0].slice(0);if(2<f.length&&
"ID"===(j=f[0]).type&&9===b.nodeType&&!e&&H.relative[f[1].type]){b=H.find.ID(j.matches[0].replace(ha,""),b,e)[0];if(!b)return g;a=a.slice(f.shift().length)}for(c=Ja.POS.test(a)?-1:f.length-1;0<=c;c--){j=f[c];if(H.relative[m=j.type])break;if(m=H.find[m])if(d=m(j.matches[0].replace(ha,""),gb.test(f[0].type)&&b.parentNode||b,e)){f.splice(c,1);a=d.length&&f.join("");if(!a)return la.apply(g,ma.call(d,0)),g;break}}}return hb(a,p)(d,b,e,g,gb.test(a)),g},Zb=function(){},bb,ib,H,Na,Ga,Tb,hb,jb,ta,Ma,$b=!0,
J=("sizcache"+Math.random()).replace(".",""),Xb=String,U=Wc.document,T=U.documentElement,sa=0,$c=0,ad=[].pop,la=[].push,ma=[].slice,Yb=[].indexOf||function(a){for(var b=0,g=this.length;b<g;b++)if(this[b]===a)return b;return-1},V=function(a,b){return a[J]=null==b||b,a},kb=function(){var a={},b=[];return V(function(g,d){return b.push(g)>H.cacheLength&&delete a[b.shift()],a[g]=d},a)},ac=kb(),Wb=kb(),bc=kb(),cc="\\[[\\x20\\t\\r\\n\\f]*((?:\\\\.|[-\\w]|[^\\x00-\\xa0])+)[\\x20\\t\\r\\n\\f]*(?:([*^$|!~]?=)[\\x20\\t\\r\\n\\f]*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+
"(?:\\\\.|[-\\w]|[^\\x00-\\xa0])+".replace("w","w#")+")|)|)[\\x20\\t\\r\\n\\f]*\\]",lb=":((?:\\\\.|[-\\w]|[^\\x00-\\xa0])+)(?:\\((?:(['\"])((?:\\\\.|[^\\\\])*?)\\2|([^()[\\]]*|(?:(?:"+cc+")|[^:]|\\\\.)*|.*))\\)|)",Ha=/^[\x20\t\r\n\f]+|((?:^|[^\\])(?:\\.)*)[\x20\t\r\n\f]+$/g,Yc=/^[\x20\t\r\n\f]*,[\x20\t\r\n\f]*/,Zc=/^[\x20\t\r\n\f]*([\x20\t\r\n\f>+~])[\x20\t\r\n\f]*/,bd=RegExp(lb),Xc=/^(?:#([\w\-]+)|(\w+)|\.([\w\-]+))$/,gb=/[\x20\t\r\n\f]*[+~]/,cd=/h\d/i,dd=/input|select|textarea|button/i,ha=/\\(?!\\)/g,
Ja={ID:/^#((?:\\.|[-\w]|[^\x00-\xa0])+)/,CLASS:/^\.((?:\\.|[-\w]|[^\x00-\xa0])+)/,NAME:/^\[name=['"]?((?:\\.|[-\w]|[^\x00-\xa0])+)['"]?\]/,TAG:RegExp("^("+"(?:\\\\.|[-\\w]|[^\\x00-\\xa0])+".replace("w","w*")+")"),ATTR:RegExp("^"+cc),PSEUDO:RegExp("^"+lb),POS:/:(even|odd|eq|gt|lt|nth|first|last)(?:\([\x20\t\r\n\f]*((?:-\d)?\d*)[\x20\t\r\n\f]*\)|)(?=[^-]|$)/i,CHILD:RegExp("^:(only|nth|first|last)-child(?:\\([\\x20\\t\\r\\n\\f]*(even|odd|(([+-]|)(\\d*)n|)[\\x20\\t\\r\\n\\f]*(?:([+-]|)[\\x20\\t\\r\\n\\f]*(\\d+)|))[\\x20\\t\\r\\n\\f]*\\)|)",
"i"),needsContext:RegExp("^[\\x20\\t\\r\\n\\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\([\\x20\\t\\r\\n\\f]*((?:-\\d)?\\d*)[\\x20\\t\\r\\n\\f]*\\)|)(?=[^-]|$)","i")},aa=function(a){var b=U.createElement("div");try{return a(b)}catch(g){return!1}finally{}},ed=aa(function(a){return a.appendChild(U.createComment("")),!a.getElementsByTagName("*").length}),fd=aa(function(a){return a.innerHTML="<a href='#'></a>",a.firstChild&&"undefined"!==typeof a.firstChild.getAttribute&&"#"===a.firstChild.getAttribute("href")}),
gd=aa(function(a){a.innerHTML="<select></select>";a=typeof a.lastChild.getAttribute("multiple");return"boolean"!==a&&"string"!==a}),Ub=aa(function(a){return a.innerHTML="<div class='hidden e'></div><div class='hidden'></div>",!a.getElementsByClassName||!a.getElementsByClassName("e").length?!1:(a.lastChild.className="e",2===a.getElementsByClassName("e").length)}),hd=aa(function(a){a.id=J+0;a.innerHTML="<a name='"+J+"'></a><div name='"+J+"'></div>";T.insertBefore(a,T.firstChild);var b=U.getElementsByName&&
U.getElementsByName(J).length===2+U.getElementsByName(J+0).length;return ib=!U.getElementById(J),T.removeChild(a),b});try{ma.call(T.childNodes,0)[0].nodeType}catch(Rd){ma=function(a){for(var b,g=[];b=this[a];a++)g.push(b);return g}}B.matches=function(a,b){return B(a,null,null,b)};B.matchesSelector=function(a,b){return 0<B(b,null,null,[a]).length};Na=B.getText=function(a){var b,g="",d=0;if(b=a.nodeType)if(1===b||9===b||11===b){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=
a.nextSibling)g+=Na(a)}else{if(3===b||4===b)return a.nodeValue}else for(;b=a[d];d++)g+=Na(b);return g};Ga=B.isXML=function(a){return(a=a&&(a.ownerDocument||a).documentElement)?"HTML"!==a.nodeName:!1};Tb=B.contains=T.contains?function(a,b){var g=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||!(1===d.nodeType&&g.contains&&g.contains(d)))}:T.compareDocumentPosition?function(a,b){return b&&!!(a.compareDocumentPosition(b)&16)}:function(a,b){for(;b=b.parentNode;)if(b===a)return!0;
return!1};B.attr=function(a,b){var g,d=Ga(a);return d||(b=b.toLowerCase()),(g=H.attrHandle[b])?g(a):d||gd?a.getAttribute(b):(g=a.getAttributeNode(b),g?"boolean"==typeof a[b]?a[b]?b:null:g.specified?g.value:null:null)};H=B.selectors={cacheLength:50,createPseudo:V,match:Ja,attrHandle:fd?{}:{href:function(a){return a.getAttribute("href",2)},type:function(a){return a.getAttribute("type")}},find:{ID:ib?function(a,b,g){if("undefined"!==typeof b.getElementById&&!g)return(a=b.getElementById(a))&&a.parentNode?
[a]:[]}:function(a,b,g){if("undefined"!==typeof b.getElementById&&!g)return(b=b.getElementById(a))?b.id===a||"undefined"!==typeof b.getAttributeNode&&b.getAttributeNode("id").value===a?[b]:void 0:[]},TAG:ed?function(a,b){if("undefined"!==typeof b.getElementsByTagName)return b.getElementsByTagName(a)}:function(a,b){var g=b.getElementsByTagName(a);if("*"===a){for(var d,e=[],c=0;d=g[c];c++)1===d.nodeType&&e.push(d);return e}return g},NAME:hd&&function(a,b){if("undefined"!==typeof b.getElementsByName)return b.getElementsByName(name)},
CLASS:Ub&&function(a,b,g){if("undefined"!==typeof b.getElementsByClassName&&!g)return b.getElementsByClassName(a)}},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(ha,""),a[3]=(a[4]||a[5]||"").replace(ha,""),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1]?(a[2]||B.error(a[0]),a[3]=+(a[3]?a[4]+(a[5]||1):
2*("even"===a[2]||"odd"===a[2])),a[4]=+(a[6]+a[7]||"odd"===a[2])):a[2]&&B.error(a[0]),a},PSEUDO:function(a){var b,g;if(Ja.CHILD.test(a[0]))return null;if(a[3])a[2]=a[3];else if(b=a[4])bd.test(b)&&(g=Ka(b,!0))&&(g=b.indexOf(")",b.length-g)-b.length)&&(b=b.slice(0,g),a[0]=a[0].slice(0,g)),a[2]=b;return a.slice(0,3)}},filter:{ID:ib?function(a){return a=a.replace(ha,""),function(b){return b.getAttribute("id")===a}}:function(a){return a=a.replace(ha,""),function(b){return(b="undefined"!==typeof b.getAttributeNode&&
b.getAttributeNode("id"))&&b.value===a}},TAG:function(a){return"*"===a?function(){return!0}:(a=a.replace(ha,"").toLowerCase(),function(b){return b.nodeName&&b.nodeName.toLowerCase()===a})},CLASS:function(a){var b=ac[J][a];return b||(b=ac(a,RegExp("(^|[\\x20\\t\\r\\n\\f])"+a+"([\\x20\\t\\r\\n\\f]|$)"))),function(a){return b.test(a.className||"undefined"!==typeof a.getAttribute&&a.getAttribute("class")||"")}},ATTR:function(a,b,g){return function(d){d=B.attr(d,a);return null==d?"!="===b:b?(d+="","="===
b?d===g:"!="===b?d!==g:"^="===b?g&&0===d.indexOf(g):"*="===b?g&&-1<d.indexOf(g):"$="===b?g&&d.substr(d.length-g.length)===g:"~="===b?-1<(" "+d+" ").indexOf(g):"|="===b?d===g||d.substr(0,g.length+1)===g+"-":!1):!0}},CHILD:function(a,b,d,e){return"nth"===a?function(a){var b,l;b=a.parentNode;if(1===d&&0===e)return!0;if(b){l=0;for(b=b.firstChild;b&&!(1===b.nodeType&&(l++,a===b));b=b.nextSibling);}return l-=e,l===d||0===l%d&&0<=l/d}:function(b){var d=b;switch(a){case "only":case "first":for(;d=d.previousSibling;)if(1===
d.nodeType)return!1;if("first"===a)return!0;d=b;case "last":for(;d=d.nextSibling;)if(1===d.nodeType)return!1;return!0}}},PSEUDO:function(a,b){var d,e=H.pseudos[a]||H.setFilters[a.toLowerCase()]||B.error("unsupported pseudo: "+a);return e[J]?e(b):1<e.length?(d=[a,a,"",b],H.setFilters.hasOwnProperty(a.toLowerCase())?V(function(a,l){for(var d,g=e(a,b),c=g.length;c--;)d=Yb.call(a,g[c]),a[d]=!(l[d]=g[c])}):function(a){return e(a,0,d)}):e}},pseudos:{not:V(function(a){var b=[],d=[],e=hb(a.replace(Ha,"$1"));
return e[J]?V(function(a,b,l,d){d=e(a,null,d,[]);for(var g=a.length;g--;)if(l=d[g])a[g]=!(b[g]=l)}):function(a,l,c){return b[0]=a,e(b,null,c,d),!d.pop()}}),has:V(function(a){return function(b){return 0<B(a,b).length}}),contains:V(function(a){return function(b){return-1<(b.textContent||b.innerText||Na(b)).indexOf(a)}}),enabled:function(a){return!1===a.disabled},disabled:function(a){return!0===a.disabled},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===
b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,!0===a.selected},parent:function(a){return!H.pseudos.empty(a)},empty:function(a){var b;for(a=a.firstChild;a;){if("@"<a.nodeName||3===(b=a.nodeType)||4===b)return!1;a=a.nextSibling}return!0},header:function(a){return cd.test(a.nodeName)},text:function(a){var b,d;return"input"===a.nodeName.toLowerCase()&&"text"===(b=a.type)&&(null==(d=a.getAttribute("type"))||d.toLowerCase()===b)},radio:ra("radio"),checkbox:ra("checkbox"),
file:ra("file"),password:ra("password"),image:ra("image"),submit:Vb("submit"),reset:Vb("reset"),button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},input:function(a){return dd.test(a.nodeName)},focus:function(a){var b=a.ownerDocument;return a===b.activeElement&&(!b.hasFocus||b.hasFocus())&&(!!a.type||!!a.href)},active:function(a){return a===a.ownerDocument.activeElement},first:ga(function(){return[0]}),last:ga(function(a,b){return[b-1]}),eq:ga(function(a,
b,d){return[0>d?d+b:d]}),even:ga(function(a,b){for(var d=0;d<b;d+=2)a.push(d);return a}),odd:ga(function(a,b){for(var d=1;d<b;d+=2)a.push(d);return a}),lt:ga(function(a,b,d){for(b=0>d?d+b:d;0<=--b;)a.push(b);return a}),gt:ga(function(a,b,d){for(d=0>d?d+b:d;++d<b;)a.push(d);return a})}};jb=T.compareDocumentPosition?function(a,b){return a===b?(ta=!0,0):(!a.compareDocumentPosition||!b.compareDocumentPosition?a.compareDocumentPosition:a.compareDocumentPosition(b)&4)?-1:1}:function(a,b){if(a===b)return ta=
!0,0;if(a.sourceIndex&&b.sourceIndex)return a.sourceIndex-b.sourceIndex;var d,e,c=[],f=[];d=a.parentNode;e=b.parentNode;var j=d;if(d===e)return Ia(a,b);if(!d)return-1;if(!e)return 1;for(;j;)c.unshift(j),j=j.parentNode;for(j=e;j;)f.unshift(j),j=j.parentNode;d=c.length;e=f.length;for(j=0;j<d&&j<e;j++)if(c[j]!==f[j])return Ia(c[j],f[j]);return j===d?Ia(a,f[j],-1):Ia(c[j],b,1)};[0,0].sort(jb);$b=!ta;B.uniqueSort=function(a){var b,d=1;ta=$b;a.sort(jb);if(ta)for(;b=a[d];d++)b===a[d-1]&&a.splice(d--,1);
return a};B.error=function(a){throw Error("Syntax error, unrecognized expression: "+a);};hb=B.compile=function(a,b){var d,e=[],c=[],f=bc[J][a];if(!f){b||(b=Ka(a));for(d=b.length;d--;)f=fb(b[d]),f[J]?e.push(f):c.push(f);var j=0<e.length,m=0<c.length,p=function(a,b,l,d,g){var n,f,s=[],t=0,q="0",K=a&&[],u=null!=g,r=Ma,A=a||m&&H.find.TAG("*",g&&b.parentNode||b),x=sa+=null==r?1:Math.E;for(u&&(Ma=b!==U&&b,bb=p.el);null!=(g=A[q]);q++){if(m&&g){for(n=0;f=c[n];n++)if(f(g,b,l)){d.push(g);break}u&&(sa=x,bb=
++p.el)}j&&((g=!f&&g)&&t--,a&&K.push(g))}t+=q;if(j&&q!==t){for(n=0;f=e[n];n++)f(K,s,b,l);if(a){if(0<t)for(;q--;)!K[q]&&!s[q]&&(s[q]=ad.call(d));s=La(s)}la.apply(d,s);u&&!a&&0<s.length&&1<t+e.length&&B.uniqueSort(d)}return u&&(sa=x,Ma=r),K};d=(p.el=0,j?V(p):p);f=bc(a,d)}return f};if(U.querySelectorAll){var dc,id=ab,jd=/'|\\/g,kd=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,X=[":focus"],Oa=[":active",":focus"],Pa=T.matchesSelector||T.mozMatchesSelector||T.webkitMatchesSelector||T.oMatchesSelector||
T.msMatchesSelector;aa(function(a){a.innerHTML="<select><option selected=''></option></select>";a.querySelectorAll("[selected]").length||X.push("\\[[\\x20\\t\\r\\n\\f]*(?:checked|disabled|ismap|multiple|readonly|selected|value)");a.querySelectorAll(":checked").length||X.push(":checked")});aa(function(a){a.innerHTML="<p test=''></p>";a.querySelectorAll("[test^='']").length&&X.push("[*^$]=[\\x20\\t\\r\\n\\f]*(?:\"\"|'')");a.innerHTML="<input type='hidden'/>";a.querySelectorAll(":enabled").length||X.push(":enabled",
":disabled")});X=RegExp(X.join("|"));ab=function(a,b,d,e,c){if(!e&&!c&&(!X||!X.test(a))){var f,j,m=!0,p=J;j=b;f=9===b.nodeType&&a;if(1===b.nodeType&&"object"!==b.nodeName.toLowerCase()){f=Ka(a);(m=b.getAttribute("id"))?p=m.replace(jd,"\\$&"):b.setAttribute("id",p);p="[id='"+p+"'] ";for(j=f.length;j--;)f[j]=p+f[j].join("");j=gb.test(a)&&b.parentNode||b;f=f.join(",")}if(f)try{return la.apply(d,ma.call(j.querySelectorAll(f),0)),d}catch(s){}finally{m||b.removeAttribute("id")}}return id(a,b,d,e,c)};Pa&&
(aa(function(a){dc=Pa.call(a,"div");try{Pa.call(a,"[test!='']:sizzle"),Oa.push("!=",lb)}catch(b){}}),Oa=RegExp(Oa.join("|")),B.matchesSelector=function(a,b){b=b.replace(kd,"='$1']");if(!Ga(a)&&!Oa.test(b)&&(!X||!X.test(b)))try{var d=Pa.call(a,b);if(d||dc||a.document&&11!==a.document.nodeType)return d}catch(e){}return 0<B(b,null,null,[a]).length})}H.pseudos.nth=H.pseudos.eq;H.filters=Zb.prototype=H.pseudos;H.setFilters=new Zb;B.attr=d.attr;d.find=B;d.expr=B.selectors;d.expr[":"]=d.expr.pseudos;d.unique=
B.uniqueSort;d.text=B.getText;d.isXMLDoc=B.isXML;d.contains=B.contains;var ld=/Until$/,md=/^(?:parents|prev(?:Until|All))/,vc=/^.[^:#\[\.,]*$/,ec=d.expr.match.needsContext,nd={children:!0,contents:!0,next:!0,prev:!0};d.fn.extend({find:function(a){var b,g,e,c,f,j,m=this;if("string"!=typeof a)return d(a).filter(function(){b=0;for(g=m.length;b<g;b++)if(d.contains(m[b],this))return!0});j=this.pushStack("","find",a);b=0;for(g=this.length;b<g;b++)if(e=j.length,d.find(a,this[b],j),0<b)for(c=e;c<j.length;c++)for(f=
0;f<e;f++)if(j[f]===j[c]){j.splice(c--,1);break}return j},has:function(a){var b,g=d(a,this),e=g.length;return this.filter(function(){for(b=0;b<e;b++)if(d.contains(this,g[b]))return!0})},not:function(a){return this.pushStack(m(this,a,!1),"not",a)},filter:function(a){return this.pushStack(m(this,a,!0),"filter",a)},is:function(a){return!!a&&("string"==typeof a?ec.test(a)?0<=d(a,this.context).index(this[0]):0<d.filter(a,this).length:0<this.filter(a).length)},closest:function(a,b){for(var g,e=0,c=this.length,
f=[],j=ec.test(a)||"string"!=typeof a?d(a,b||this.context):0;e<c;e++)for(g=this[e];g&&g.ownerDocument&&g!==b&&11!==g.nodeType;){if(j?-1<j.index(g):d.find.matchesSelector(g,a)){f.push(g);break}g=g.parentNode}return f=1<f.length?d.unique(f):f,this.pushStack(f,"closest",a)},index:function(a){return a?"string"==typeof a?d.inArray(this[0],d(a)):d.inArray(a.jquery?a[0]:a,this):this[0]&&this[0].parentNode?this.prevAll().length:-1},add:function(a,b){var g="string"==typeof a?d(a,b):d.makeArray(a&&a.nodeType?
[a]:a),e=d.merge(this.get(),g);return this.pushStack(p(g[0])||p(e[0])?e:d.unique(e))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}});d.fn.andSelf=d.fn.addBack;d.each({parent:function(a){return(a=a.parentNode)&&11!==a.nodeType?a:null},parents:function(a){return d.dir(a,"parentNode")},parentsUntil:function(a,b,g){return d.dir(a,"parentNode",g)},next:function(a){return q(a,"nextSibling")},prev:function(a){return q(a,"previousSibling")},nextAll:function(a){return d.dir(a,
"nextSibling")},prevAll:function(a){return d.dir(a,"previousSibling")},nextUntil:function(a,b,g){return d.dir(a,"nextSibling",g)},prevUntil:function(a,b,g){return d.dir(a,"previousSibling",g)},siblings:function(a){return d.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return d.sibling(a.firstChild)},contents:function(a){return d.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:d.merge([],a.childNodes)}},function(a,b){d.fn[a]=function(g,e){var c=d.map(this,b,g);return ld.test(a)||
(e=g),e&&"string"==typeof e&&(c=d.filter(e,c)),c=1<this.length&&!nd[a]?d.unique(c):c,1<this.length&&md.test(a)&&(c=c.reverse()),this.pushStack(c,a,Y.call(arguments).join(","))}});d.extend({filter:function(a,b,g){return g&&(a=":not("+a+")"),1===b.length?d.find.matchesSelector(b[0],a)?[b[0]]:[]:d.find.matches(a,b)},dir:function(a,e,g){var c=[];for(a=a[e];a&&9!==a.nodeType&&(g===b||1!==a.nodeType||!d(a).is(g));)1===a.nodeType&&c.push(a),a=a[e];return c},sibling:function(a,b){for(var d=[];a;a=a.nextSibling)1===
a.nodeType&&a!==b&&d.push(a);return d}});var sb="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",od=/ jQuery\d+="(?:null|\d+)"/g,mb=/^\s+/,fc=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,gc=/<([\w:]+)/,pd=/<tbody/i,qd=/<|&#?\w+;/,rd=/<(?:script|style|link)/i,sd=/<(?:script|object|embed|option|style)/i,nb=RegExp("<(?:"+sb+")[\\s/>]","i"),tb=/^(?:checkbox|radio)$/,
hc=/checked\s*(?:[^=]|=\s*.checked.)/i,td=/\/(java|ecma)script/i,ud=/^\s*<!(?:\[CDATA\[|\-\-)|[\]\-]{2}>\s*$/g,S={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},ic=t(x),ob=ic.appendChild(x.createElement("div"));S.optgroup=
S.option;S.tbody=S.tfoot=S.colgroup=S.caption=S.thead;S.th=S.td;d.support.htmlSerialize||(S._default=[1,"X<div>","</div>"]);d.fn.extend({text:function(a){return d.access(this,function(a){return a===b?d.text(this):this.empty().append((this[0]&&this[0].ownerDocument||x).createTextNode(a))},null,a,arguments.length)},wrapAll:function(a){if(d.isFunction(a))return this.each(function(b){d(this).wrapAll(a.call(this,b))});if(this[0]){var b=d(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]);
b.map(function(){for(var a=this;a.firstChild&&1===a.firstChild.nodeType;)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){return d.isFunction(a)?this.each(function(b){d(this).wrapInner(a.call(this,b))}):this.each(function(){var b=d(this),e=b.contents();e.length?e.wrapAll(a):b.append(a)})},wrap:function(a){var b=d.isFunction(a);return this.each(function(e){d(this).wrapAll(b?a.call(this,e):a)})},unwrap:function(){return this.parent().each(function(){d.nodeName(this,"body")||
d(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(a){(1===this.nodeType||11===this.nodeType)&&this.appendChild(a)})},prepend:function(){return this.domManip(arguments,!0,function(a){(1===this.nodeType||11===this.nodeType)&&this.insertBefore(a,this.firstChild)})},before:function(){if(!p(this[0]))return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this)});if(arguments.length){var a=d.clean(arguments);return this.pushStack(d.merge(a,
this),"before",this.selector)}},after:function(){if(!p(this[0]))return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this.nextSibling)});if(arguments.length){var a=d.clean(arguments);return this.pushStack(d.merge(this,a),"after",this.selector)}},remove:function(a,b){for(var e,c=0;null!=(e=this[c]);c++)if(!a||d.filter(a,[e]).length)!b&&1===e.nodeType&&(d.cleanData(e.getElementsByTagName("*")),d.cleanData([e])),e.parentNode&&e.parentNode.removeChild(e);return this},empty:function(){for(var a,
b=0;null!=(a=this[b]);b++)for(1===a.nodeType&&d.cleanData(a.getElementsByTagName("*"));a.firstChild;)a.removeChild(a.firstChild);return this},clone:function(a,b){return a=null==a?!1:a,b=null==b?a:b,this.map(function(){return d.clone(this,a,b)})},html:function(a){return d.access(this,function(a){var l=this[0]||{},e=0,c=this.length;if(a===b)return 1===l.nodeType?l.innerHTML.replace(od,""):b;if("string"==typeof a&&!rd.test(a)&&(d.support.htmlSerialize||!nb.test(a))&&(d.support.leadingWhitespace||!mb.test(a))&&
!S[(gc.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(fc,"<$1></$2>");try{for(;e<c;e++)l=this[e]||{},1===l.nodeType&&(d.cleanData(l.getElementsByTagName("*")),l.innerHTML=a);l=0}catch(f){}}l&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(a){return p(this[0])?this.length?this.pushStack(d(d.isFunction(a)?a():a),"replaceWith",a):this:d.isFunction(a)?this.each(function(b){var e=d(this),c=e.html();e.replaceWith(a.call(this,b,c))}):("string"!=typeof a&&(a=d(a).detach()),this.each(function(){var b=
this.nextSibling,e=this.parentNode;d(this).remove();b?d(b).before(a):d(e).append(a)}))},detach:function(a){return this.remove(a,!0)},domManip:function(a,e,g){a=[].concat.apply([],a);var c,f,j,m=0,p=a[0],s=[],t=this.length;if(!d.support.checkClone&&1<t&&"string"==typeof p&&hc.test(p))return this.each(function(){d(this).domManip(a,e,g)});if(d.isFunction(p))return this.each(function(c){var f=d(this);a[0]=p.call(this,c,e?f.html():b);f.domManip(a,e,g)});if(this[0]){c=d.buildFragment(a,this,s);j=c.fragment;
f=j.firstChild;1===j.childNodes.length&&(j=f);if(f){e=e&&d.nodeName(f,"tr");for(c=c.cacheable||t-1;m<t;m++)g.call(e&&d.nodeName(this[m],"table")?this[m].getElementsByTagName("tbody")[0]||this[m].appendChild(this[m].ownerDocument.createElement("tbody")):this[m],m===c?j:d.clone(j,!0,!0))}j=f=null;s.length&&d.each(s,function(a,b){b.src?d.ajax?d.ajax({url:b.src,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0}):d.error("no ajax"):d.globalEval((b.text||b.textContent||b.innerHTML||"").replace(ud,
""));b.parentNode&&b.parentNode.removeChild(b)})}return this}});d.buildFragment=function(a,e,g){var c,f,j,m=a[0];return e=e||x,e=!e.nodeType&&e[0]||e,e=e.ownerDocument||e,1===a.length&&"string"==typeof m&&512>m.length&&e===x&&"<"===m.charAt(0)&&!sd.test(m)&&(d.support.checkClone||!hc.test(m))&&(d.support.html5Clone||!nb.test(m))&&(f=!0,c=d.fragments[m],j=c!==b),c||(c=e.createDocumentFragment(),d.clean(a,e,c,g),f&&(d.fragments[m]=j&&c)),{fragment:c,cacheable:f}};d.fragments={};d.each({appendTo:"append",
prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){d.fn[a]=function(e){var c,f=0,j=[];e=d(e);var m=e.length;c=1===this.length&&this[0].parentNode;if((null==c||c&&11===c.nodeType&&1===c.childNodes.length)&&1===m)return e[b](this[0]),this;for(;f<m;f++)c=(0<f?this.clone(!0):this).get(),d(e[f])[b](c),j=j.concat(c);return this.pushStack(j,a,e.selector)}});d.extend({clone:function(a,b,e){var c,f,j,m;d.support.html5Clone||d.isXMLDoc(a)||!nb.test("<"+a.nodeName+
">")?m=a.cloneNode(!0):(ob.innerHTML=a.outerHTML,ob.removeChild(m=ob.firstChild));if((!d.support.noCloneEvent||!d.support.noCloneChecked)&&(1===a.nodeType||11===a.nodeType)&&!d.isXMLDoc(a)){s(a,m);c=r(a);f=r(m);for(j=0;c[j];++j)f[j]&&s(c[j],f[j])}if(b&&(u(a,m),e)){c=r(a);f=r(m);for(j=0;c[j];++j)u(c[j],f[j])}return m},clean:function(a,b,e,c){var f,j,m,p,s,q,u,r=b===x&&ic,z=[];if(!b||"undefined"==typeof b.createDocumentFragment)b=x;for(f=0;null!=(m=a[f]);f++)if("number"==typeof m&&(m+=""),m){if("string"==
typeof m)if(qd.test(m)){r=r||t(b);q=b.createElement("div");r.appendChild(q);m=m.replace(fc,"<$1></$2>");j=(gc.exec(m)||["",""])[1].toLowerCase();p=S[j]||S._default;s=p[0];for(q.innerHTML=p[1]+m+p[2];s--;)q=q.lastChild;if(!d.support.tbody){s=pd.test(m);p="table"===j&&!s?q.firstChild&&q.firstChild.childNodes:"<table>"===p[1]&&!s?q.childNodes:[];for(j=p.length-1;0<=j;--j)d.nodeName(p[j],"tbody")&&!p[j].childNodes.length&&p[j].parentNode.removeChild(p[j])}!d.support.leadingWhitespace&&mb.test(m)&&q.insertBefore(b.createTextNode(mb.exec(m)[0]),
q.firstChild);m=q.childNodes;q.parentNode.removeChild(q)}else m=b.createTextNode(m);m.nodeType?z.push(m):d.merge(z,m)}q&&(m=q=r=null);if(!d.support.appendChecked)for(f=0;null!=(m=z[f]);f++)d.nodeName(m,"input")?A(m):"undefined"!=typeof m.getElementsByTagName&&d.grep(m.getElementsByTagName("input"),A);if(e){a=function(a){if(!a.type||td.test(a.type))return c?c.push(a.parentNode?a.parentNode.removeChild(a):a):e.appendChild(a)};for(f=0;null!=(m=z[f]);f++)if(!d.nodeName(m,"script")||!a(m))e.appendChild(m),
"undefined"!=typeof m.getElementsByTagName&&(u=d.grep(d.merge([],m.getElementsByTagName("script")),a),z.splice.apply(z,[f+1,0].concat(u)),f+=u.length)}return z},cleanData:function(a,b){for(var e,c,f,j,m=0,p=d.expando,s=d.cache,t=d.support.deleteExpando,q=d.event.special;null!=(f=a[m]);m++)if(b||d.acceptData(f))if(e=(c=f[p])&&s[c]){if(e.events)for(j in e.events)q[j]?d.event.remove(f,j):d.removeEvent(f,j,e.handle);s[c]&&(delete s[c],t?delete f[p]:f.removeAttribute?f.removeAttribute(p):f[p]=null,d.deletedIds.push(c))}}});
var Qa,ba;d.uaMatch=function(a){a=a.toLowerCase();a=/(chrome)[ \/]([\w.]+)/.exec(a)||/(webkit)[ \/]([\w.]+)/.exec(a)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(a)||/(msie) ([\w.]+)/.exec(a)||0>a.indexOf("compatible")&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(a)||[];return{browser:a[1]||"",version:a[2]||"0"}};Qa=d.uaMatch(Ac.userAgent);ba={};Qa.browser&&(ba[Qa.browser]=!0,ba.version=Qa.version);ba.chrome?ba.webkit=!0:ba.webkit&&(ba.safari=!0);d.browser=ba;d.sub=function(){function a(b,d){return new a.fn.init(b,
d)}d.extend(!0,a,this);a.superclass=this;a.fn=a.prototype=this();a.fn.constructor=a;a.sub=this.sub;a.fn.init=function(e,c){return c&&c instanceof d&&!(c instanceof a)&&(c=a(c)),d.fn.init.call(this,e,c,b)};a.fn.init.prototype=a.fn;var b=a(x);return a};var N,ja,ka,pb=/alpha\([^)]*\)/i,vd=/opacity=([^)]*)/,wd=/^(top|right|bottom|left)$/,xd=/^(none|table(?!-c[ea]).+)/,jc=/^margin/,wc=RegExp("^("+Aa+")(.*)$","i"),ua=RegExp("^("+Aa+")(?!px)[a-z%]+$","i"),yd=RegExp("^([-+])=("+Aa+")","i"),Ta={},zd={position:"absolute",
visibility:"hidden",display:"block"},kc={letterSpacing:0,fontWeight:400},ca=["Top","Right","Bottom","Left"],ub=["Webkit","O","Moz","ms"],Ad=d.fn.toggle;d.fn.extend({css:function(a,e){return d.access(this,function(a,e,c){return c!==b?d.style(a,e,c):d.css(a,e)},a,e,1<arguments.length)},show:function(){return F(this,!0)},hide:function(){return F(this)},toggle:function(a,b){var e="boolean"==typeof a;return d.isFunction(a)&&d.isFunction(b)?Ad.apply(this,arguments):this.each(function(){(e?a:I(this))?d(this).show():
d(this).hide()})}});d.extend({cssHooks:{opacity:{get:function(a,b){if(b){var d=N(a,"opacity");return""===d?"1":d}}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":d.support.cssFloat?"cssFloat":"styleFloat"},style:function(a,e,c,f){if(a&&!(3===a.nodeType||8===a.nodeType||!a.style)){var j,m,p,s=d.camelCase(e),t=a.style;e=d.cssProps[s]||(d.cssProps[s]=L(t,s));p=d.cssHooks[e]||d.cssHooks[s];if(c===b)return p&&"get"in p&&(j=p.get(a,
!1,f))!==b?j:t[e];m=typeof c;"string"===m&&(j=yd.exec(c))&&(c=(j[1]+1)*j[2]+parseFloat(d.css(a,e)),m="number");if(!(null==c||"number"===m&&isNaN(c)))if("number"===m&&!d.cssNumber[s]&&(c+="px"),!p||!("set"in p)||(c=p.set(a,c,f))!==b)try{t[e]=c}catch(q){}}},css:function(a,e,c,f){var j,m,p,s=d.camelCase(e);return e=d.cssProps[s]||(d.cssProps[s]=L(a.style,s)),p=d.cssHooks[e]||d.cssHooks[s],p&&"get"in p&&(j=p.get(a,!0,f)),j===b&&(j=N(a,e)),"normal"===j&&e in kc&&(j=kc[e]),c||f!==b?(m=parseFloat(j),c||
d.isNumeric(m)?m||0:j):j},swap:function(a,b,d){var e,c={};for(e in b)c[e]=a.style[e],a.style[e]=b[e];d=d.call(a);for(e in b)a.style[e]=c[e];return d}});a.getComputedStyle?N=function(b,e){var c,f,j,m,p=a.getComputedStyle(b,null),s=b.style;return p&&(c=p[e],""===c&&!d.contains(b.ownerDocument,b)&&(c=d.style(b,e)),ua.test(c)&&jc.test(e)&&(f=s.width,j=s.minWidth,m=s.maxWidth,s.minWidth=s.maxWidth=s.width=c,c=p.width,s.width=f,s.minWidth=j,s.maxWidth=m)),c}:x.documentElement.currentStyle&&(N=function(a,
b){var d,e,c=a.currentStyle&&a.currentStyle[b],f=a.style;return null==c&&f&&f[b]&&(c=f[b]),ua.test(c)&&!wd.test(b)&&(d=f.left,e=a.runtimeStyle&&a.runtimeStyle.left,e&&(a.runtimeStyle.left=a.currentStyle.left),f.left="fontSize"===b?"1em":c,c=f.pixelLeft+"px",f.left=d,e&&(a.runtimeStyle.left=e)),""===c?"auto":c});d.each(["height","width"],function(a,b){d.cssHooks[b]={get:function(a,e,c){if(e)return 0===a.offsetWidth&&xd.test(N(a,"display"))?d.swap(a,zd,function(){return xb(a,b,c)}):xb(a,b,c)},set:function(a,
e,c){return z(a,e,c?wb(a,b,c,d.support.boxSizing&&"border-box"===d.css(a,"boxSizing")):0)}}});d.support.opacity||(d.cssHooks.opacity={get:function(a,b){return vd.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?0.01*parseFloat(RegExp.$1)+"":b?"1":""},set:function(a,b){var e=a.style,c=a.currentStyle,f=d.isNumeric(b)?"alpha(opacity="+100*b+")":"",j=c&&c.filter||e.filter||"";e.zoom=1;if(!(1<=b&&""===d.trim(j.replace(pb,""))&&e.removeAttribute&&(e.removeAttribute("filter"),c&&!c.filter)))e.filter=
pb.test(j)?j.replace(pb,f):j+" "+f}});d(function(){d.support.reliableMarginRight||(d.cssHooks.marginRight={get:function(a,b){return d.swap(a,{display:"inline-block"},function(){if(b)return N(a,"marginRight")})}});!d.support.pixelPosition&&d.fn.position&&d.each(["top","left"],function(a,b){d.cssHooks[b]={get:function(a,e){if(e){var c=N(a,b);return ua.test(c)?d(a).position()[b]+"px":c}}}})});d.expr&&d.expr.filters&&(d.expr.filters.hidden=function(a){return 0===a.offsetWidth&&0===a.offsetHeight||!d.support.reliableHiddenOffsets&&
"none"===(a.style&&a.style.display||N(a,"display"))},d.expr.filters.visible=function(a){return!d.expr.filters.hidden(a)});d.each({margin:"",padding:"",border:"Width"},function(a,b){d.cssHooks[a+b]={expand:function(d){var e="string"==typeof d?d.split(" "):[d],c={};for(d=0;4>d;d++)c[a+ca[d]+b]=e[d]||e[d-2]||e[0];return c}};jc.test(a)||(d.cssHooks[a+b].set=z)});var Bd=/%20/g,xc=/\[\]$/,lc=/\r?\n/g,Cd=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,
Dd=/^(?:select|textarea)/i;d.fn.extend({serialize:function(){return d.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?d.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||Dd.test(this.nodeName)||Cd.test(this.type))}).map(function(a,b){var e=d(this).val();return null==e?null:d.isArray(e)?d.map(e,function(a){return{name:b.name,value:a.replace(lc,"\r\n")}}):{name:b.name,value:e.replace(lc,"\r\n")}}).get()}});
d.param=function(a,e){var c,f=[],j=function(a,b){b=d.isFunction(b)?b():null==b?"":b;f[f.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};e===b&&(e=d.ajaxSettings&&d.ajaxSettings.traditional);if(d.isArray(a)||a.jquery&&!d.isPlainObject(a))d.each(a,function(){j(this.name,this.value)});else for(c in a)Ua(c,a[c],e,j);return f.join("&").replace(Bd,"+")};var na,ia,Ed=/#.*$/,Fd=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,Gd=/^(?:GET|HEAD)$/,Hd=/^\/\//,mc=/\?/,Id=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,
Jd=/([?&])_=[^&]*/,nc=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,oc=d.fn.load,Va={},pc={},qc=["*/"]+["*"];try{ia=zc.href}catch(Sd){ia=x.createElement("a"),ia.href="",ia=ia.href}na=nc.exec(ia.toLowerCase())||[];d.fn.load=function(a,e,c){if("string"!=typeof a&&oc)return oc.apply(this,arguments);if(!this.length)return this;var f,j,m,p=this,s=a.indexOf(" ");return 0<=s&&(f=a.slice(s,a.length),a=a.slice(0,s)),d.isFunction(e)?(c=e,e=b):e&&"object"==typeof e&&(j="POST"),d.ajax({url:a,type:j,dataType:"html",
data:e,complete:function(a,b){c&&p.each(c,m||[a.responseText,b,a])}}).done(function(a){m=arguments;p.html(f?d("<div>").append(a.replace(Id,"")).find(f):a)}),this};d.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(a,b){d.fn[b]=function(a){return this.on(b,a)}});d.each(["get","post"],function(a,e){d[e]=function(a,c,l,f){return d.isFunction(c)&&(f=f||l,l=c,c=b),d.ajax({type:e,url:a,data:c,success:l,dataType:f})}});d.extend({getScript:function(a,e){return d.get(a,
b,e,"script")},getJSON:function(a,b,e){return d.get(a,b,e,"json")},ajaxSetup:function(a,b){return b?zb(a,d.ajaxSettings):(b=a,a=d.ajaxSettings),zb(a,b),a},ajaxSettings:{url:ia,isLocal:/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/.test(na[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":qc},contents:{xml:/xml/,
html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":a.String,"text html":!0,"text json":d.parseJSON,"text xml":d.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:yb(Va),ajaxTransport:yb(pc),ajax:function(a,e){function c(a,e,l,g){var n,m,t,u,K,Q=e;if(2!==C){C=2;s&&clearTimeout(s);p=b;j=g||"";D.readyState=0<a?4:0;if(l){u=r;g=D;var R,B,F,H,J=u.contents,G=u.dataTypes,N=u.responseFields;for(B in N)B in l&&(g[N[B]]=l[B]);for(;"*"===G[0];)G.shift(),
R===b&&(R=u.mimeType||g.getResponseHeader("content-type"));if(R)for(B in J)if(J[B]&&J[B].test(R)){G.unshift(B);break}if(G[0]in l)F=G[0];else{for(B in l){if(!G[0]||u.converters[B+" "+G[0]]){F=B;break}H||(H=B)}F=F||H}u=l=F?(F!==G[0]&&G.unshift(F),l[F]):void 0}if(200<=a&&300>a||304===a)if(r.ifModified&&(K=D.getResponseHeader("Last-Modified"),K&&(d.lastModified[f]=K),K=D.getResponseHeader("Etag"),K&&(d.etag[f]=K)),304===a)Q="notmodified",n=!0;else{var P;a:{n=r;m=u;var M,Q=n.dataTypes.slice();l=Q[0];R=
{};B=0;n.dataFilter&&(m=n.dataFilter(m,n.dataType));if(Q[1])for(P in n.converters)R[P.toLowerCase()]=n.converters[P];for(;t=Q[++B];)if("*"!==t){if("*"!==l&&l!==t){P=R[l+" "+t]||R["* "+t];if(!P)for(M in R)if(K=M.split(" "),K[1]===t&&(P=R[l+" "+K[0]]||R["* "+K[0]])){!0===P?P=R[M]:!0!==R[M]&&(t=K[0],Q.splice(B--,0,t));break}if(!0!==P)if(P&&n["throws"])m=P(m);else try{m=P(m)}catch(O){P={state:"parsererror",error:P?O:"No conversion from "+l+" to "+t};break a}}l=t}P={state:"success",data:m}}n=P;Q=n.state;
m=n.data;t=n.error;n=!t}else if(t=Q,!Q||a)Q="error",0>a&&(a=0);D.status=a;D.statusText=(e||Q)+"";n?z.resolveWith(A,[m,Q,D]):z.rejectWith(A,[D,Q,t]);D.statusCode(L);L=b;q&&x.trigger("ajax"+(n?"Success":"Error"),[D,r,n?m:t]);I.fireWith(A,[D,Q]);q&&(x.trigger("ajaxComplete",[D,r]),--d.active||d.event.trigger("ajaxStop"))}}"object"==typeof a&&(e=a,a=b);e=e||{};var f,j,m,p,s,t,q,u,r=d.ajaxSetup({},e),A=r.context||r,x=A!==r&&(A.nodeType||A instanceof d)?d(A):d.event,z=d.Deferred(),I=d.Callbacks("once memory"),
L=r.statusCode||{},B={},F={},C=0,H="canceled",D={readyState:0,setRequestHeader:function(a,b){if(!C){var d=a.toLowerCase();a=F[d]=F[d]||a;B[a]=b}return this},getAllResponseHeaders:function(){return 2===C?j:null},getResponseHeader:function(a){var d;if(2===C){if(!m)for(m={};d=Fd.exec(j);)m[d[1].toLowerCase()]=d[2];d=m[a.toLowerCase()]}return d===b?null:d},overrideMimeType:function(a){return C||(r.mimeType=a),this},abort:function(a){return a=a||H,p&&p.abort(a),c(0,a),this}};z.promise(D);D.success=D.done;
D.error=D.fail;D.complete=I.add;D.statusCode=function(a){if(a){var b;if(2>C)for(b in a)L[b]=[L[b],a[b]];else b=a[D.status],D.always(b)}return this};r.url=((a||r.url)+"").replace(Ed,"").replace(Hd,na[1]+"//");r.dataTypes=d.trim(r.dataType||"*").toLowerCase().split(da);null==r.crossDomain&&(t=nc.exec(r.url.toLowerCase())||!1,r.crossDomain=t&&t.join(":")+(t[3]?"":"http:"===t[1]?80:443)!==na.join(":")+(na[3]?"":"http:"===na[1]?80:443));r.data&&r.processData&&"string"!=typeof r.data&&(r.data=d.param(r.data,
r.traditional));va(Va,r,e,D);if(2===C)return D;q=r.global;r.type=r.type.toUpperCase();r.hasContent=!Gd.test(r.type);q&&0===d.active++&&d.event.trigger("ajaxStart");if(!r.hasContent&&(r.data&&(r.url+=(mc.test(r.url)?"&":"?")+r.data,delete r.data),f=r.url,!1===r.cache)){t=d.now();var J=r.url.replace(Jd,"$1_="+t);r.url=J+(J===r.url?(mc.test(r.url)?"&":"?")+"_="+t:"")}(r.data&&r.hasContent&&!1!==r.contentType||e.contentType)&&D.setRequestHeader("Content-Type",r.contentType);r.ifModified&&(f=f||r.url,
d.lastModified[f]&&D.setRequestHeader("If-Modified-Since",d.lastModified[f]),d.etag[f]&&D.setRequestHeader("If-None-Match",d.etag[f]));D.setRequestHeader("Accept",r.dataTypes[0]&&r.accepts[r.dataTypes[0]]?r.accepts[r.dataTypes[0]]+("*"!==r.dataTypes[0]?", "+qc+"; q=0.01":""):r.accepts["*"]);for(u in r.headers)D.setRequestHeader(u,r.headers[u]);if(!r.beforeSend||!1!==r.beforeSend.call(A,D,r)&&2!==C){H="abort";for(u in{success:1,error:1,complete:1})D[u](r[u]);if(p=va(pc,r,e,D)){D.readyState=1;q&&x.trigger("ajaxSend",
[D,r]);r.async&&0<r.timeout&&(s=setTimeout(function(){D.abort("timeout")},r.timeout));try{C=1,p.send(B,c)}catch(G){if(2>C)c(-1,G);else throw G;}}else c(-1,"No Transport");return D}return D.abort()},active:0,lastModified:{},etag:{}});var rc=[],Kd=/\?/,Ra=/(=)\?(?=&|$)|\?\?/,Ld=d.now();d.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=rc.pop()||d.expando+"_"+Ld++;return this[a]=!0,a}});d.ajaxPrefilter("json jsonp",function(e,c,f){var j,m,p,s=e.data,t=e.url,r=!1!==e.jsonp,q=r&&Ra.test(t),
u=r&&!q&&"string"==typeof s&&!(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Ra.test(s);if("jsonp"===e.dataTypes[0]||q||u)return j=e.jsonpCallback=d.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,m=a[j],q?e.url=t.replace(Ra,"$1"+j):u?e.data=s.replace(Ra,"$1"+j):r&&(e.url+=(Kd.test(t)?"&":"?")+e.jsonp+"="+j),e.converters["script json"]=function(){return p||d.error(j+" was not called"),p[0]},e.dataTypes[0]="json",a[j]=function(){p=arguments},f.always(function(){a[j]=
m;e[j]&&(e.jsonpCallback=c.jsonpCallback,rc.push(j));p&&d.isFunction(m)&&m(p[0]);p=m=b}),"script"});d.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(a){return d.globalEval(a),a}}});d.ajaxPrefilter("script",function(a){a.cache===b&&(a.cache=!1);a.crossDomain&&(a.type="GET",a.global=!1)});d.ajaxTransport("script",function(a){if(a.crossDomain){var d,e=
x.head||x.getElementsByTagName("head")[0]||x.documentElement;return{send:function(c,f){d=x.createElement("script");d.async="async";a.scriptCharset&&(d.charset=a.scriptCharset);d.src=a.url;d.onload=d.onreadystatechange=function(a,c){if(c||!d.readyState||/loaded|complete/.test(d.readyState))d.onload=d.onreadystatechange=null,e&&d.parentNode&&e.removeChild(d),d=b,c||f(200,"success")};e.insertBefore(d,e.firstChild)},abort:function(){d&&d.onload(0,1)}}}});var oa,qb=a.ActiveXObject?function(){for(var a in oa)oa[a](0,
1)}:!1,Md=0;d.ajaxSettings.xhr=a.ActiveXObject?function(){var b;if(!(b=!this.isLocal&&Ab()))a:{try{b=new a.ActiveXObject("Microsoft.XMLHTTP");break a}catch(d){}b=void 0}return b}:Ab;var rb=d.ajaxSettings.xhr();d.extend(d.support,{ajax:!!rb,cors:!!rb&&"withCredentials"in rb});d.support.ajax&&d.ajaxTransport(function(e){if(!e.crossDomain||d.support.cors){var c;return{send:function(f,j){var m,p,s=e.xhr();e.username?s.open(e.type,e.url,e.async,e.username,e.password):s.open(e.type,e.url,e.async);if(e.xhrFields)for(p in e.xhrFields)s[p]=
e.xhrFields[p];e.mimeType&&s.overrideMimeType&&s.overrideMimeType(e.mimeType);!e.crossDomain&&!f["X-Requested-With"]&&(f["X-Requested-With"]="XMLHttpRequest");try{for(p in f)s.setRequestHeader(p,f[p])}catch(t){}s.send(e.hasContent&&e.data||null);c=function(a,f){var g,p,t,r,q;try{if(c&&(f||4===s.readyState))if(c=b,m&&(s.onreadystatechange=d.noop,qb&&delete oa[m]),f)4!==s.readyState&&s.abort();else{g=s.status;t=s.getAllResponseHeaders();r={};(q=s.responseXML)&&q.documentElement&&(r.xml=q);try{r.text=
s.responseText}catch(u){}try{p=s.statusText}catch(A){p=""}!g&&e.isLocal&&!e.crossDomain?g=r.text?200:404:1223===g&&(g=204)}}catch(K){f||j(-1,K)}r&&j(g,p,r,t)};e.async?4===s.readyState?setTimeout(c,0):(m=++Md,qb&&(oa||(oa={},d(a).unload(qb)),oa[m]=c),s.onreadystatechange=c):c()},abort:function(){c&&c(0,1)}}}});var wa,Sa,Nd=/^(?:toggle|show|hide)$/,Od=RegExp("^(?:([-+])=|)("+Aa+")([a-z%]*)$","i"),Pd=/queueHooks$/,xa=[function(a,b,e){var c,f,j,m,p,s,t=this,r=a.style,q={},u=[],A=a.nodeType&&I(a);e.queue||
(p=d._queueHooks(a,"fx"),null==p.unqueued&&(p.unqueued=0,s=p.empty.fire,p.empty.fire=function(){p.unqueued||s()}),p.unqueued++,t.always(function(){t.always(function(){p.unqueued--;d.queue(a,"fx").length||p.empty.fire()})}));1===a.nodeType&&("height"in b||"width"in b)&&(e.overflow=[r.overflow,r.overflowX,r.overflowY],"inline"===d.css(a,"display")&&"none"===d.css(a,"float")&&(!d.support.inlineBlockNeedsLayout||"inline"===vb(a.nodeName)?r.display="inline-block":r.zoom=1));e.overflow&&(r.overflow="hidden",
d.support.shrinkWrapBlocks||t.done(function(){r.overflow=e.overflow[0];r.overflowX=e.overflow[1];r.overflowY=e.overflow[2]}));for(c in b)f=b[c],Nd.exec(f)&&(delete b[c],f!==(A?"hide":"show")&&u.push(c));if(f=u.length){j=d._data(a,"fxshow")||d._data(a,"fxshow",{});A?d(a).show():t.done(function(){d(a).hide()});t.done(function(){var b;d.removeData(a,"fxshow",!0);for(b in q)d.style(a,b,q[b])});for(c=0;c<f;c++)b=u[c],m=t.createTween(b,A?j[b]:0),q[b]=j[b]||d.style(a,b),b in j||(j[b]=m.start,A&&(m.end=m.start,
m.start="width"===b||"height"===b?1:0))}}],pa={"*":[function(a,b){var e,c,f=this.createTween(a,b),j=Od.exec(b),m=f.cur(),p=+m||0,s=1,t=20;if(j){e=+j[2];c=j[3]||(d.cssNumber[a]?"":"px");if("px"!==c&&p){p=d.css(f.elem,a,!0)||e||1;do s=s||".5",p/=s,d.style(f.elem,a,p+c);while(s!==(s=f.cur()/m)&&1!==s&&--t)}f.unit=c;f.start=p;f.end=j[1]?p+(j[1]+1)*e:e}return f}]};d.Animation=d.extend(Cb,{tweener:function(a,b){d.isFunction(a)?(b=a,a=["*"]):a=a.split(" ");for(var e,c=0,f=a.length;c<f;c++)e=a[c],pa[e]=pa[e]||
[],pa[e].unshift(b)},prefilter:function(a,b){b?xa.unshift(a):xa.push(a)}});d.Tween=M;M.prototype={constructor:M,init:function(a,b,e,c,f,j){this.elem=a;this.prop=e;this.easing=f||"swing";this.options=b;this.start=this.now=this.cur();this.end=c;this.unit=j||(d.cssNumber[e]?"":"px")},cur:function(){var a=M.propHooks[this.prop];return a&&a.get?a.get(this):M.propHooks._default.get(this)},run:function(a){var b,e=M.propHooks[this.prop];return this.options.duration?this.pos=b=d.easing[this.easing](a,this.options.duration*
a,0,1,this.options.duration):this.pos=b=a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),e&&e.set?e.set(this):M.propHooks._default.set(this),this}};M.prototype.init.prototype=M.prototype;M.propHooks={_default:{get:function(a){var b;return null==a.elem[a.prop]||a.elem.style&&null!=a.elem.style[a.prop]?(b=d.css(a.elem,a.prop,!1,""),!b||"auto"===b?0:b):a.elem[a.prop]},set:function(a){d.fx.step[a.prop]?d.fx.step[a.prop](a):a.elem.style&&
(null!=a.elem.style[d.cssProps[a.prop]]||d.cssHooks[a.prop])?d.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}};M.propHooks.scrollTop=M.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}};d.each(["toggle","show","hide"],function(a,b){var e=d.fn[b];d.fn[b]=function(c,f,j){return null==c||"boolean"==typeof c||!a&&d.isFunction(c)&&d.isFunction(f)?e.apply(this,arguments):this.animate(ya(b,!0),c,f,j)}});d.fn.extend({fadeTo:function(a,b,e,d){return this.filter(I).css("opacity",
0).show().end().animate({opacity:b},a,e,d)},animate:function(a,b,e,c){var f=d.isEmptyObject(a),j=d.speed(b,e,c);b=function(){var b=Cb(this,d.extend({},a),j);f&&b.stop(!0)};return f||!1===j.queue?this.each(b):this.queue(j.queue,b)},stop:function(a,e,c){var f=function(a){var b=a.stop;delete a.stop;b(c)};return"string"!=typeof a&&(c=e,e=a,a=b),e&&!1!==a&&this.queue(a||"fx",[]),this.each(function(){var b=!0,e=null!=a&&a+"queueHooks",j=d.timers,m=d._data(this);if(e)m[e]&&m[e].stop&&f(m[e]);else for(e in m)m[e]&&
m[e].stop&&Pd.test(e)&&f(m[e]);for(e=j.length;e--;)j[e].elem===this&&(null==a||j[e].queue===a)&&(j[e].anim.stop(c),b=!1,j.splice(e,1));(b||!c)&&d.dequeue(this,a)})}});d.each({slideDown:ya("show"),slideUp:ya("hide"),slideToggle:ya("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){d.fn[a]=function(a,e,d){return this.animate(b,a,e,d)}});d.speed=function(a,b,e){var c=a&&"object"==typeof a?d.extend({},a):{complete:e||!e&&b||d.isFunction(a)&&a,duration:a,
easing:e&&b||b&&!d.isFunction(b)&&b};c.duration=d.fx.off?0:"number"==typeof c.duration?c.duration:c.duration in d.fx.speeds?d.fx.speeds[c.duration]:d.fx.speeds._default;if(null==c.queue||!0===c.queue)c.queue="fx";return c.old=c.complete,c.complete=function(){d.isFunction(c.old)&&c.old.call(this);c.queue&&d.dequeue(this,c.queue)},c};d.easing={linear:function(a){return a},swing:function(a){return 0.5-Math.cos(a*Math.PI)/2}};d.timers=[];d.fx=M.prototype.init;d.fx.tick=function(){for(var a,b=d.timers,
e=0;e<b.length;e++)a=b[e],!a()&&b[e]===a&&b.splice(e--,1);b.length||d.fx.stop()};d.fx.timer=function(a){a()&&d.timers.push(a)&&!Sa&&(Sa=setInterval(d.fx.tick,d.fx.interval))};d.fx.interval=13;d.fx.stop=function(){clearInterval(Sa);Sa=null};d.fx.speeds={slow:600,fast:200,_default:400};d.fx.step={};d.expr&&d.expr.filters&&(d.expr.filters.animated=function(a){return d.grep(d.timers,function(b){return a===b.elem}).length});var sc=/^(?:body|html)$/i;d.fn.offset=function(a){if(arguments.length)return a===
b?this:this.each(function(b){d.offset.setOffset(this,a,b)});var e,c,f,j,m,p,s,t={top:0,left:0},r=this[0],q=r&&r.ownerDocument;if(q)return(c=q.body)===r?d.offset.bodyOffset(r):(e=q.documentElement,d.contains(e,r)?("undefined"!=typeof r.getBoundingClientRect&&(t=r.getBoundingClientRect()),f=Db(q),j=e.clientTop||c.clientTop||0,m=e.clientLeft||c.clientLeft||0,p=f.pageYOffset||e.scrollTop,s=f.pageXOffset||e.scrollLeft,{top:t.top+p-j,left:t.left+s-m}):t)};d.offset={bodyOffset:function(a){var b=a.offsetTop,
e=a.offsetLeft;return d.support.doesNotIncludeMarginInBodyOffset&&(b+=parseFloat(d.css(a,"marginTop"))||0,e+=parseFloat(d.css(a,"marginLeft"))||0),{top:b,left:e}},setOffset:function(a,b,e){var c=d.css(a,"position");"static"===c&&(a.style.position="relative");var f=d(a),j=f.offset(),m=d.css(a,"top"),p=d.css(a,"left"),s={},t={},r,q;("absolute"===c||"fixed"===c)&&-1<d.inArray("auto",[m,p])?(t=f.position(),r=t.top,q=t.left):(r=parseFloat(m)||0,q=parseFloat(p)||0);d.isFunction(b)&&(b=b.call(a,e,j));null!=
b.top&&(s.top=b.top-j.top+r);null!=b.left&&(s.left=b.left-j.left+q);"using"in b?b.using.call(a,s):f.css(s)}};d.fn.extend({position:function(){if(this[0]){var a=this[0],b=this.offsetParent(),e=this.offset(),c=sc.test(b[0].nodeName)?{top:0,left:0}:b.offset();return e.top-=parseFloat(d.css(a,"marginTop"))||0,e.left-=parseFloat(d.css(a,"marginLeft"))||0,c.top+=parseFloat(d.css(b[0],"borderTopWidth"))||0,c.left+=parseFloat(d.css(b[0],"borderLeftWidth"))||0,{top:e.top-c.top,left:e.left-c.left}}},offsetParent:function(){return this.map(function(){for(var a=
this.offsetParent||x.body;a&&!sc.test(a.nodeName)&&"static"===d.css(a,"position");)a=a.offsetParent;return a||x.body})}});d.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,e){var c=/Y/.test(e);d.fn[a]=function(f){return d.access(this,function(a,f,j){var l=Db(a);if(j===b)return l?e in l?l[e]:l.document.documentElement[f]:a[f];l?l.scrollTo(c?d(l).scrollLeft():j,c?j:d(l).scrollTop()):a[f]=j},a,f,arguments.length,null)}});d.each({Height:"height",Width:"width"},function(a,e){d.each({padding:"inner"+
a,content:e,"":"outer"+a},function(c,f){d.fn[f]=function(f,j){var m=arguments.length&&(c||"boolean"!=typeof f),p=c||(!0===f||!0===j?"margin":"border");return d.access(this,function(e,c,f){var j;return d.isWindow(e)?e.document.documentElement["client"+a]:9===e.nodeType?(j=e.documentElement,Math.max(e.body["scroll"+a],j["scroll"+a],e.body["offset"+a],j["offset"+a],j["client"+a])):f===b?d.css(e,c,f,p):d.style(e,c,f,p)},e,m?f:b,m,null)}})});a.jQuery=a.$=d;"function"==typeof define&&define.amd&&define.amd.jQuery&&
define("jquery",[],function(){return d})})(window);
var portraitMode,mobilePortraitWidth=480,mobilePortraitHeight=640,mobileLandscapeWidth=640,mobileLandscapeHeight=480,mobileWidth=mobilePortraitWidth,mobileHeight=mobilePortraitHeight,desktopWidth=640,desktopHeight=480,w,h,multiplier,destW,destH,dynamicClickableEntityDivs={},coreDivsToResize=["game","play","orientate"],advancedDivsToResize={MobileAdInGamePreroll:{"box-width":_SETTINGS.Ad.Mobile.Preroll.Width+2,"box-height":_SETTINGS.Ad.Mobile.Preroll.Height+20},MobileAdInGameEnd:{"box-width":_SETTINGS.Ad.Mobile.End.Width+
2,"box-height":_SETTINGS.Ad.Mobile.End.Height+20}};
function adjustLayers(a){for(key in dynamicClickableEntityDivs){$("#"+key).width(dynamicClickableEntityDivs[key].width*multiplier);$("#"+key).height(dynamicClickableEntityDivs[key].height*multiplier);var b=w/2-destW/2,c=h/2-destH/2;$("#"+key).css("left",b+dynamicClickableEntityDivs[key].entity_pos_x*multiplier);$("#"+key).css("top",c+dynamicClickableEntityDivs[key].entity_pos_y*multiplier)}for(i=0;i<coreDivsToResize.length;i++)ig.ua.mobile?($("#"+coreDivsToResize[i]).width(w),$("#"+coreDivsToResize[i]).height(h)):
($("#"+coreDivsToResize[i]).width(destW),$("#"+coreDivsToResize[i]).height(destH),$("#"+coreDivsToResize[i]).css("left",a?0:w/2-destW/2));for(key in advancedDivsToResize)$("#"+key).width(w),$("#"+key).height(h),$("#"+key+"-Box").css("left",(w-advancedDivsToResize[key]["box-width"])/2),$("#"+key+"-Box").css("top",(h-advancedDivsToResize[key]["box-height"])/2);$("#ajaxbar").width(w);$("#ajaxbar").height(h)}
function sizeHandler(){window.scrollTo(0,1);!("undefined"!=typeof DESKTOP_LANDING_PAGE&&DESKTOP_LANDING_PAGE)&&$("#game")&&(w=window.innerWidth,h=window.innerHeight,ig.ua.mobile?(multiplier=Math.min(h/mobileHeight,w/mobileWidth),destW=mobileWidth*multiplier,destH=mobileHeight*multiplier):(multiplier=Math.min(h/desktopHeight,w/desktopWidth),destW=desktopWidth*multiplier,destH=desktopHeight*multiplier),adjustLayers())}
function orientationHandler(){console.log("changing orientation ...");switch(window.orientation){case 0:$("#orientate").hide();$("#game").show();break;case 90:$("#orientate").show();$("#game").hide();break;case -90:$("#orientate").show();$("#game").hide();break;case 180:$("#orientate").hide(),$("#game").show()}sizeHandler()}window.addEventListener("resize",function(){sizeHandler()},!1);window.addEventListener("orientationchange",function(){orientationHandler();sizeHandler()},!1);
document.ontouchmove=function(){window.scrollTo(0,1)};var ie=function(){for(var a=3,b=document.createElement("div"),c=b.getElementsByTagName("i");b.innerHTML="\x3c!--[if gt IE "+ ++a+"]><i></i><![endif]--\x3e",c[0];);return 4<a?a:void 0}();function getQueryVariable(a){for(var b=window.location.search.substring(1).split("&"),c=0;c<b.length;c++){var f=b[c].split("=");if(decodeURIComponent(f[0])==a)return decodeURIComponent(f[1])}}
var nohtml5_message={en:'This game is best experienced with HTML5 capable browsers. We recommend downloading <a href="http://www.google.com/chrome" target="_blank">Google Chrome</a>, or <a href="http://www.mozilla.org" target="_blank">Mozilla Firefox</a>',hk:'\u6b64\u7a0b\u5f0f\u53ea\u80fd\u652f\u63f4 HTML5 \u7684\u700f\u89bd\u5668\u4e0a\u904b\u884c\uff0c\u5982\u672a\u80fd\u958b\u59cb\u904a\u6232\uff0c\u8acb\u6309\u6b64\u4e0b\u8f09 <a href="http://www.google.com/chrome" target="_blank">Google Chrome</a>, or <a href="http://www.mozilla.org" target="_blank">Mozilla Firefox</a>',
tw:'\u6b64\u7a0b\u5f0f\u53ea\u80fd\u652f\u63f4 HTML5 \u7684\u700f\u89bd\u5668\u4e0a\u904b\u884c\uff0c\u5982\u672a\u80fd\u958b\u59cb\u904a\u6232\uff0c\u8acb\u6309\u6b64\u4e0b\u8f09 <a href="http://www.google.com/chrome" target="_blank">Google Chrome</a>, or <a href="http://www.mozilla.org" target="_blank">Mozilla Firefox</a>'};
if(9>ie){var message,lang=getQueryVariable("lang");if(lang)switch(lang.toLowerCase()){case "en":message=nohtml5_message.en;break;case "hk":message=nohtml5_message.hk;break;case "tw":message=nohtml5_message.tw;break;default:message=nohtml5_message.en}else message=nohtml5_message.en;document.getElementById("nohtml5-text").innerHTML=message;document.getElementById("nohtml5").style.visibility="visible"}this.jukebox={};
jukebox.Player=function(a,b){this.id=++jukebox.__jukeboxId;this.origin=b||null;this.settings={};for(var c in this.defaults)this.settings[c]=this.defaults[c];if("[object Object]"===Object.prototype.toString.call(a))for(var f in a)this.settings[f]=a[f];"[object Function]"===Object.prototype.toString.call(jukebox.Manager)&&(jukebox.Manager=new jukebox.Manager);this.resource=this.isPlaying=null;this.resource="[object Object]"===Object.prototype.toString.call(jukebox.Manager)?jukebox.Manager.getPlayableResource(this.settings.resources):
this.settings.resources[0]||null;if(null===this.resource)throw"Your browser can't playback the given resources - or you have missed to include jukebox.Manager";this.__init();return this};jukebox.__jukeboxId=0;
jukebox.Player.prototype={defaults:{resources:[],autoplay:!1,spritemap:{},flashMediaElement:"./swf/FlashMediaElement.swf",timeout:1E3},__addToManager:function(){!0!==this.__wasAddedToManager&&(jukebox.Manager.add(this),this.__wasAddedToManager=!0)},__init:function(){var a=this,b=this.settings,c={},f;jukebox.Manager&&void 0!==jukebox.Manager.features&&(c=jukebox.Manager.features);if(!0===c.html5audio){this.context=new Audio;this.context.src=this.resource;if(null===this.origin){var e=function(b){a.__addToManager(b)};
this.context.addEventListener("canplaythrough",e,!0);window.setTimeout(function(){a.context.removeEventListener("canplaythrough",e,!0);e("timeout")},b.timeout)}this.context.autobuffer=!0;this.context.preload=!0;for(f in this.HTML5API)this[f]=this.HTML5API[f];1<c.channels?!0===b.autoplay?this.context.autoplay=!0:void 0!==b.spritemap[b.autoplay]&&this.play(b.autoplay):1===c.channels&&void 0!==b.spritemap[b.autoplay]&&(this.backgroundMusic=b.spritemap[b.autoplay],this.backgroundMusic.started=Date.now?
Date.now():+new Date,this.play(b.autoplay));1==c.channels&&!0!==b.canPlayBackground&&(window.addEventListener("pagehide",function(){null!==a.isPlaying&&(a.pause(),a.__wasAutoPaused=!0)}),window.addEventListener("pageshow",function(){a.__wasAutoPaused&&(a.resume(),delete a._wasAutoPaused)}))}else if(!0===c.flashaudio){for(f in this.FLASHAPI)this[f]=this.FLASHAPI[f];c=["id=jukebox-flashstream-"+this.id,"autoplay="+b.autoplay,"file="+window.encodeURIComponent(this.resource)];this.__initFlashContext(c);
!0===b.autoplay?this.play(0):b.spritemap[b.autoplay]&&this.play(b.autoplay)}else throw"Your Browser does not support Flash Audio or HTML5 Audio.";},__initFlashContext:function(a){var b,c=this.settings.flashMediaElement,f,e={flashvars:a.join("&"),quality:"high",bgcolor:"#000000",wmode:"transparent",allowscriptaccess:"always",allowfullscreen:"true"};if(navigator.userAgent.match(/MSIE/)){b=document.createElement("div");document.getElementsByTagName("body")[0].appendChild(b);var j=document.createElement("object");
j.id="jukebox-flashstream-"+this.id;j.setAttribute("type","application/x-shockwave-flash");j.setAttribute("classid","clsid:d27cdb6e-ae6d-11cf-96b8-444553540000");j.setAttribute("width","0");j.setAttribute("height","0");e.movie=c+"?x="+(Date.now?Date.now():+new Date);e.flashvars=a.join("&amp;");for(f in e)a=document.createElement("param"),a.setAttribute("name",f),a.setAttribute("value",e[f]),j.appendChild(a);b.outerHTML=j.outerHTML;this.context=document.getElementById("jukebox-flashstream-"+this.id)}else{b=
document.createElement("embed");b.id="jukebox-flashstream-"+this.id;b.setAttribute("type","application/x-shockwave-flash");b.setAttribute("width","100");b.setAttribute("height","100");e.play=!1;e.loop=!1;e.src=c+"?x="+(Date.now?Date.now():+new Date);for(f in e)b.setAttribute(f,e[f]);document.getElementsByTagName("body")[0].appendChild(b);this.context=b}},backgroundHackForiOS:function(){if(void 0!==this.backgroundMusic){var a=Date.now?Date.now():+new Date;void 0===this.backgroundMusic.started?(this.backgroundMusic.started=
a,this.setCurrentTime(this.backgroundMusic.start)):(this.backgroundMusic.lastPointer=(a-this.backgroundMusic.started)/1E3%(this.backgroundMusic.end-this.backgroundMusic.start)+this.backgroundMusic.start,this.play(this.backgroundMusic.lastPointer))}},play:function(a,b){if(null!==this.isPlaying&&!0!==b)void 0!==jukebox.Manager&&jukebox.Manager.addToQueue(a,this.id);else{var c=this.settings.spritemap,f;if(void 0!==c[a])f=c[a].start;else if("number"===typeof a){f=a;for(var e in c)if(f>=c[e].start&&f<=
c[e].end){a=e;break}}void 0!==f&&"[object Object]"===Object.prototype.toString.call(c[a])&&(this.isPlaying=this.settings.spritemap[a],this.context.play&&this.context.play(),this.wasReady=this.setCurrentTime(f))}},stop:function(){this.__lastPosition=0;this.isPlaying=null;this.backgroundMusic?this.backgroundHackForiOS():this.context.pause();return!0},pause:function(){this.isPlaying=null;this.__lastPosition=this.getCurrentTime();this.context.pause();return this.__lastPosition},resume:function(a){a="number"===
typeof a?a:this.__lastPosition;if(null!==a)return this.play(a),this.__lastPosition=null,!0;this.context.play();return!1},HTML5API:{getVolume:function(){return this.context.volume||1},setVolume:function(a){this.context.volume=a;return 1E-4>Math.abs(this.context.volume-a)?!0:!1},getCurrentTime:function(){return this.context.currentTime||0},setCurrentTime:function(a){try{return this.context.currentTime=a,!0}catch(b){return!1}}},FLASHAPI:{getVolume:function(){return this.context&&"function"===typeof this.context.getVolume?
this.context.getVolume():1},setVolume:function(a){return this.context&&"function"===typeof this.context.setVolume?(this.context.setVolume(a),!0):!1},getCurrentTime:function(){return this.context&&"function"===typeof this.context.getCurrentTime?this.context.getCurrentTime():0},setCurrentTime:function(a){return this.context&&"function"===typeof this.context.setCurrentTime?this.context.setCurrentTime(a):!1}}};
if(void 0===this.jukebox)throw"jukebox.Manager requires jukebox.Player (Player.js) to run properly.";
jukebox.Manager=function(a){this.features={};this.codecs={};this.__players={};this.__playersLength=0;this.__clones={};this.__queue=[];this.settings={};for(var b in this.defaults)this.settings[b]=this.defaults[b];if("[object Object]"===Object.prototype.toString.call(a))for(var c in a)this.settings[c]=a[c];this.__detectFeatures();jukebox.Manager.__initialized=!1===this.settings.useGameLoop?window.setInterval(function(){jukebox.Manager.loop()},20):!0};
jukebox.Manager.prototype={defaults:{useFlash:!1,useGameLoop:!1},__detectFeatures:function(){var a=window.Audio&&new Audio;if(a&&a.canPlayType&&!1===this.settings.useFlash){for(var b=[{e:"3gp",m:["audio/3gpp","audio/amr"]},{e:"aac",m:["audio/aac","audio/aacp"]},{e:"amr",m:["audio/amr","audio/3gpp"]},{e:"caf",m:["audio/IMA-ADPCM","audio/x-adpcm",'audio/x-aiff; codecs="IMA-ADPCM, ADPCM"']},{e:"m4a",m:'audio/mp4{audio/mp4; codecs="mp4a.40.2,avc1.42E01E"{audio/mpeg4{audio/mpeg4-generic{audio/mp4a-latm{audio/MP4A-LATM{audio/x-m4a'.split("{")},
{e:"mp3",m:["audio/mp3","audio/mpeg",'audio/mpeg; codecs="mp3"',"audio/MPA","audio/mpa-robust"]},{e:"mpga",m:["audio/MPA","audio/mpa-robust","audio/mpeg","video/mpeg"]},{e:"mp4",m:["audio/mp4","video/mp4"]},{e:"ogg",m:["application/ogg","audio/ogg",'audio/ogg; codecs="theora, vorbis"',"video/ogg",'video/ogg; codecs="theora, vorbis"']},{e:"wav",m:["audio/wave","audio/wav",'audio/wav; codecs="1"',"audio/x-wav","audio/x-pn-wav"]},{e:"webm",m:["audio/webm",'audio/webm; codecs="vorbis"',"video/webm"]}],
c,f,e=0,j=b.length;e<j;e++)if(f=b[e].e,b[e].m.length&&"object"===typeof b[e].m)for(var p=0,q=b[e].m.length;p<q;p++)if(c=b[e].m[p],""!==a.canPlayType(c)){this.codecs[f]=c;break}else this.codecs[f]||(this.codecs[f]=!1);this.features.html5audio=!(!this.codecs.mp3&&!this.codecs.ogg&&!this.codecs.webm&&!this.codecs.wav);this.features.channels=8;a.volume=0.1337;this.features.volume=!!(1E-4>Math.abs(a.volume-0.1337));navigator.userAgent.match(/iPhone|iPod|iPad/i)&&(this.features.channels=1)}this.features.flashaudio=
!!navigator.mimeTypes["application/x-shockwave-flash"]||!!navigator.plugins["Shockwave Flash"]||!1;if(window.ActiveXObject)try{new ActiveXObject("ShockwaveFlash.ShockwaveFlash.10"),this.features.flashaudio=!0}catch(m){}!0===this.settings.useFlash&&(this.features.flashaudio=!0);!0===this.features.flashaudio&&!this.features.html5audio&&(this.codecs.mp3="audio/mp3",this.codecs.mpga="audio/mpeg",this.codecs.mp4="audio/mp4",this.codecs.m4a="audio/mp4",this.codecs["3gp"]="audio/3gpp",this.codecs.amr="audio/amr",
this.features.volume=!0,this.features.channels=1)},__getPlayerById:function(a){return this.__players&&void 0!==this.__players[a]?this.__players[a]:null},__getClone:function(a,b){for(var c in this.__clones){var f=this.__clones[c];if(null===f.isPlaying&&f.origin===a)return f}if("[object Object]"===Object.prototype.toString.call(b)){c={};for(var e in b)c[e]=b[e];c.autoplay=!1;e=new jukebox.Player(c,a);e.isClone=!0;e.wasReady=!1;return this.__clones[e.id]=e}return null},loop:function(){if(0!==this.__playersLength)if(this.__queue.length&&
this.__playersLength<this.features.channels){var a=this.__queue[0],b=this.__getPlayerById(a.origin);if(null!==b){var c=this.__getClone(a.origin,b.settings);null!==c&&(!0===this.features.volume&&(b=this.__players[a.origin])&&c.setVolume(b.getVolume()),this.add(c),c.play(a.pointer,!0))}this.__queue.splice(0,1)}else for(c in this.__queue.length&&1===this.features.channels&&(a=this.__queue[0],b=this.__getPlayerById(a.origin),null!==b&&b.play(a.pointer,!0),this.__queue.splice(0,1)),this.__players)a=this.__players[c],
b=a.getCurrentTime()||0,a.isPlaying&&!1===a.wasReady?a.wasReady=a.setCurrentTime(a.isPlaying.start):a.isPlaying&&!0===a.wasReady?b>a.isPlaying.end&&(!0===a.isPlaying.loop?a.play(a.isPlaying.start,!0):a.stop()):a.isClone&&null===a.isPlaying?this.remove(a):void 0!==a.backgroundMusic&&null===a.isPlaying&&b>a.backgroundMusic.end&&a.backgroundHackForiOS()},getPlayableResource:function(a){"[object Array]"!==Object.prototype.toString.call(a)&&(a=[a]);for(var b=0,c=a.length;b<c;b++){var f=a[b],e=f.match(/\.([^\.]*)$/)[1];
if(e&&this.codecs[e])return f}return null},add:function(a){return a instanceof jukebox.Player&&void 0===this.__players[a.id]?(this.__playersLength++,this.__players[a.id]=a,!0):!1},remove:function(a){return a instanceof jukebox.Player&&void 0!==this.__players[a.id]?(this.__playersLength--,delete this.__players[a.id],!0):!1},addToQueue:function(a,b){return("string"===typeof a||"number"===typeof a)&&void 0!==this.__players[b]?(this.__queue.push({pointer:a,origin:b}),!0):!1}};var _gaq=_gaq||[];
_gaq.push(["_setAccount","PLEASE_GET_CORRECT_ID_FROM_CLIENT"]);_gaq.push(["_trackPageview"]);(function(){var a=document.createElement("script");a.type="text/javascript";a.async=!0;a.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var b=document.getElementsByTagName("script")[0];b.parentNode.insertBefore(a,b)})();window.onerror=function(a,b,c){_gaq.push(["_trackEvent",a,b,c])};var MarketJS={};
(function(){function a(a,e,j,p){var q=window.XDomainRequest?new XDomainRequest:new XMLHttpRequest,m;switch(a){case "single-metric-write":m=b+"/metric/write/"+c+"/"+e+"/"+j;break;case "single-metric-read":m=b+"/metric/read/single/"+c+"/"+e;break;case "multi-metric-write":break;case "multi-metric-read":m=b+"/metric/read/multi/"+c+"?"+e;break;case "leaderboard-read":m=b+"/leaderboard/read/"+c+"?"+e;break;case "leaderboard-write":break;default:console.log("no mode found")}q.onerror=function(){console.log(q.responseText)};
q.onload=function(){var a=JSON.parse(q.responseText);p?(console.log("passing to callback ..."),p(a)):console.log(a)};window.XDomainRequest?q.open("GET",m):q.open("GET",m,!0);q.send()}var b="http://"+("localhost"==window.location.hostname?"localhost:14095":"marketjs-gamecenter.appspot.com"),c="";MarketJS.Initialize=function(a){c=a;MarketJS.SingleMetric.Write("InitializeGame","1")};MarketJS.SingleMetric={Write:function(b,e){a("single-metric-write",b,e)},Read:function(b){a("single-metric-read",b)}};
MarketJS.MultiMetric={Write:function(a){var e={};e.data=JSON.stringify(a);e.game_key=c;$.post(b+"/write",e,function(a){console.log("Response: "+a)})},Read:function(b,e,c){var p="";for(i=0;i<b.length;i++)p+="metric_name=",p+=b[i],i!=b.length-1&&(p+="&");p+=c?"&rank_ascending=yes":"&rank_ascending=no";console.log(p);a("multi-metric-read",p,0,e)}};MarketJS.Player={};MarketJS.Player.Read={Leaderboard:function(a,e,j){$.get(b+"/read/player/game/leaderboard/"+a+"/"+e+"/"+c,{},j,"json")}};MarketJS.Login=
{Basic:function(a,e){var j={};j.game_key=c;j.login_method="basic";for(var p in a)j[p]=a[p];console.log("login payload:",j);$.post(b+"/login",j,e)}};MarketJS.Leaderboard={Write:function(a,e,j,p){var q={};q.game_key=c;q.player_key=a;q.metric_name=e;q.metric_value=j;q.cumulative=p?"true":"false";$.post(b+"/write/leaderboard",q,function(a){console.log("Response: "+a)})},Read:function(b,e,c,p){b="metric_name="+b+(e?"&rank_ascending=yes":"&rank_ascending=no");b+="&metric_count=";b+=c;a("leaderboard-read",
b,0,p)}};MarketJS.Platform={Read:function(){var a=/iPhone/i.test(navigator.userAgent),b=/iPad/i.test(navigator.userAgent),c=/android/i.test(navigator.userAgent),p=/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(navigator.userAgent);return a?"iPhone":b?"iPad":c?"Android":p?"WebView":"Web"}}})();function localJsonpCallback(a){a.Error?console.log(a.Message):console.log(a)}this.JSON||(this.JSON={});
(function(){function a(a){return 10>a?"0"+a:a}function b(a){e.lastIndex=0;return e.test(a)?'"'+a.replace(e,function(a){var b=q[a];return"string"===typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function c(a,e){var f,r,q,L,I=j,F,z=e[a];z&&"object"===typeof z&&"function"===typeof z.toJSON&&(z=z.toJSON(a));"function"===typeof m&&(z=m.call(e,a,z));switch(typeof z){case "string":return b(z);case "number":return isFinite(z)?String(z):"null";case "boolean":case "null":return String(z);
case "object":if(!z)return"null";j+=p;F=[];if("[object Array]"===Object.prototype.toString.apply(z)){L=z.length;for(f=0;f<L;f+=1)F[f]=c(f,z)||"null";q=0===F.length?"[]":j?"[\n"+j+F.join(",\n"+j)+"\n"+I+"]":"["+F.join(",")+"]";j=I;return q}if(m&&"object"===typeof m){L=m.length;for(f=0;f<L;f+=1)r=m[f],"string"===typeof r&&(q=c(r,z))&&F.push(b(r)+(j?": ":":")+q)}else for(r in z)Object.hasOwnProperty.call(z,r)&&(q=c(r,z))&&F.push(b(r)+(j?": ":":")+q);q=0===F.length?"{}":j?"{\n"+j+F.join(",\n"+j)+"\n"+
I+"}":"{"+F.join(",")+"}";j=I;return q}}"function"!==typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+a(this.getUTCMonth()+1)+"-"+a(this.getUTCDate())+"T"+a(this.getUTCHours())+":"+a(this.getUTCMinutes())+":"+a(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var f=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
e=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,j,p,q={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},m;"function"!==typeof JSON.stringify&&(JSON.stringify=function(a,b,e){var f;p=j="";if("number"===typeof e)for(f=0;f<e;f+=1)p+=" ";else"string"===typeof e&&(p=e);if((m=b)&&"function"!==typeof b&&("object"!==typeof b||"number"!==typeof b.length))throw Error("JSON.stringify");return c("",{"":a})});
"function"!==typeof JSON.parse&&(JSON.parse=function(a,b){function e(a,c){var f,j,m=a[c];if(m&&"object"===typeof m)for(f in m)Object.hasOwnProperty.call(m,f)&&(j=e(m,f),void 0!==j?m[f]=j:delete m[f]);return b.call(a,c,m)}var c;a=String(a);f.lastIndex=0;f.test(a)&&(a=a.replace(f,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return c=eval("("+a+")"),"function"===typeof b?e({"":c},""):c;throw new SyntaxError("JSON.parse");})})();this.createjs=this.createjs||{};
(function(){var a=function(){this.initialize()},b=a.prototype;a.initialize=function(a){a.addEventListener=b.addEventListener;a.removeEventListener=b.removeEventListener;a.removeAllEventListeners=b.removeAllEventListeners;a.hasEventListener=b.hasEventListener;a.dispatchEvent=b.dispatchEvent};b._listeners=null;b.initialize=function(){};b.addEventListener=function(a,b){var e=this._listeners;e?this.removeEventListener(a,b):e=this._listeners={};var j=e[a];j||(j=e[a]=[]);j.push(b);return b};b.removeEventListener=
function(a,b){var e=this._listeners;if(e){var j=e[a];if(j)for(var p=0,q=j.length;p<q;p++)if(j[p]==b){1==q?delete e[a]:j.splice(p,1);break}}};b.removeAllEventListeners=function(a){a?this._listeners&&delete this._listeners[a]:this._listeners=null};b.dispatchEvent=function(a,b){var e=!1,j=this._listeners;if(a&&j){"string"==typeof a&&(a={type:a});a.target=b||this;j=j[a.type];if(!j)return e;for(var j=j.slice(),p=0,q=j.length;p<q;p++){var m=j[p];m instanceof Function?e=e||m.apply(null,[a]):m.handleEvent&&
(e=e||m.handleEvent(a))}}return!!e};b.hasEventListener=function(a){var b=this._listeners;return!(!b||!b[a])};b.toString=function(){return"[EventDispatcher]"};createjs.EventDispatcher=a})();this.createjs=this.createjs||{};
(function(){function a(){throw"Sound cannot be instantiated";}function b(a,b){this.init(a,b)}function c(){}a.DELIMITER="|";a.AUDIO_TIMEOUT=8E3;a.INTERRUPT_ANY="any";a.INTERRUPT_EARLY="early";a.INTERRUPT_LATE="late";a.INTERRUPT_NONE="none";a.PLAY_INITED="playInited";a.PLAY_SUCCEEDED="playSucceeded";a.PLAY_INTERRUPTED="playInterrupted";a.PLAY_FINISHED="playFinished";a.PLAY_FAILED="playFailed";a.SUPPORTED_EXTENSIONS="mp3 ogg mpeg wav m4a mp4 aiff wma mid".split(" ");a.EXTENSION_MAP={m4a:"mp4"};a.FILE_PATTERN=
/(\w+:\/{2})?((?:\w+\.){2}\w+)?(\/?[\S]+\/|\/)?([\w\-%\.]+)(?:\.)(\w+)?(\?\S+)?/i;a.defaultInterruptBehavior=a.INTERRUPT_NONE;a.lastId=0;a.activePlugin=null;a.pluginsRegistered=!1;a.masterVolume=1;a.masterMute=!1;a.instances=[];a.idHash={};a.preloadHash={};a.defaultSoundInstance=null;a.addEventListener=null;a.removeEventListener=null;a.removeAllEventListeners=null;a.dispatchEvent=null;a.hasEventListener=null;a._listeners=null;createjs.EventDispatcher.initialize(a);a.onLoadComplete=null;a.sendLoadComplete=
function(b){if(a.preloadHash[b])for(var c=0,f=a.preloadHash[b].length;c<f;c++){var q=a.preloadHash[b][c],q={target:this,type:"loadComplete",src:q.src,id:q.id,data:q.data};a.preloadHash[b][c]=!0;a.onLoadComplete&&a.onLoadComplete(q);a.dispatchEvent(q)}};a.getPreloadHandlers=function(){return{callback:createjs.proxy(a.initLoad,a),types:["sound"],extensions:a.SUPPORTED_EXTENSIONS}};a.registerPlugin=function(b){a.pluginsRegistered=!0;return null==b?!1:b.isSupported()?(a.activePlugin=new b,!0):!1};a.registerPlugins=
function(b){for(var c=0,f=b.length;c<f;c++)if(a.registerPlugin(b[c]))return!0;return!1};a.initializeDefaultPlugins=function(){return null!=a.activePlugin?!0:a.pluginsRegistered?!1:a.registerPlugins([createjs.WebAudioPlugin,createjs.HTMLAudioPlugin])?!0:!1};a.isReady=function(){return null!=a.activePlugin};a.getCapabilities=function(){return null==a.activePlugin?null:a.activePlugin.capabilities};a.getCapability=function(b){return null==a.activePlugin?null:a.activePlugin.capabilities[b]};a.initLoad=
function(b,c,f,q){b=a.registerSound(b,f,q,!1);return null==b?!1:b};a.registerSound=function(e,c,f,q){if(!a.initializeDefaultPlugins())return!1;e instanceof Object&&(e=e.src,c=e.id,f=e.data);var m=a.parsePath(e,"sound",c,f);if(null==m)return!1;null!=c&&(a.idHash[c]=m.src);var t=null;null!=f&&(isNaN(f.channels)?isNaN(f)||(t=parseInt(f)):t=parseInt(f.channels));var u=a.activePlugin.register(m.src,t);null!=u&&(null!=u.numChannels&&(t=u.numChannels),b.create(m.src,t),null==f||!isNaN(f)?f=m.data=t||b.maxPerChannel():
f.channels=m.data.channels=t||b.maxPerChannel(),null!=u.tag?m.tag=u.tag:u.src&&(m.src=u.src),null!=u.completeHandler&&(m.completeHandler=u.completeHandler),m.type=u.type);!1!=q&&(a.preloadHash[m.src]||(a.preloadHash[m.src]=[]),a.preloadHash[m.src].push({src:e,id:c,data:f}),1==a.preloadHash[m.src].length&&a.activePlugin.preload(m.src,u));return m};a.registerManifest=function(a){for(var b=[],c=0,f=a.length;c<f;c++)b[c]=createjs.Sound.registerSound(a[c].src,a[c].id,a[c].data,a[c].preload);return b};
a.loadComplete=function(b){var c=a.parsePath(b,"sound");b=c?a.getSrcById(c.src):a.getSrcById(b);return!0==a.preloadHash[b][0]};a.parsePath=function(b,c,f,q){"string"!=typeof b&&(b=b.toString());b=b.split(a.DELIMITER);c={type:c||"sound",id:f,data:q};f=a.getCapabilities();q=0;for(var m=b.length;q<m;q++){var t=b[q],u=t.match(a.FILE_PATTERN);if(null==u)return!1;var s=u[4],u=u[5];if(f[u]&&-1<a.SUPPORTED_EXTENSIONS.indexOf(u))return c.name=s,c.src=t,c.extension=u,c}return null};a.play=function(b,c,f,q,
m,t,u){b=a.createInstance(b);a.playInstance(b,c,f,q,m,t,u)||b.playFailed();return b};a.createInstance=function(e){if(!a.initializeDefaultPlugins())return a.defaultSoundInstance;var c=a.parsePath(e,"sound");e=c?a.getSrcById(c.src):a.getSrcById(e);var c=e.lastIndexOf("."),f=e.slice(c+1);-1!=c&&-1<a.SUPPORTED_EXTENSIONS.indexOf(f)?(b.create(e),e=a.activePlugin.create(e)):e=a.defaultSoundInstance;e.uniqueId=a.lastId++;return e};a.setVolume=function(b){if(null==Number(b))return!1;b=Math.max(0,Math.min(1,
b));a.masterVolume=b;if(!this.activePlugin||!this.activePlugin.setVolume||!this.activePlugin.setVolume(b))for(var c=this.instances,f=0,q=c.length;f<q;f++)c[f].setMasterVolume(b)};a.getVolume=function(){return a.masterVolume};a.mute=function(a){this.masterMute=a;if(!this.activePlugin||!this.activePlugin.setMute||!this.activePlugin.setMute(a))for(var b=this.instances,c=0,f=b.length;c<f;c++)b[c].setMasterMute(a)};a.setMute=function(a){if(null==a||void 0==a)return!1;this.masterMute=a;if(!this.activePlugin||
!this.activePlugin.setMute||!this.activePlugin.setMute(a))for(var b=this.instances,c=0,f=b.length;c<f;c++)b[c].setMasterMute(a);return!0};a.getMute=function(){return this.masterMute};a.stop=function(){for(var a=this.instances,b=a.length;0<b;b--)a[b-1].stop()};a.playInstance=function(b,c,f,q,m,t,u){c=c||a.defaultInterruptBehavior;null==f&&(f=0);null==q&&(q=b.getPosition());null==m&&(m=0);null==t&&(t=b.getVolume());null==u&&(u=b.getPan());if(0==f){if(!a.beginPlaying(b,c,q,m,t,u))return!1}else f=setTimeout(function(){a.beginPlaying(b,
c,q,m,t,u)},f),b.delayTimeoutId=f;this.instances.push(b);return!0};a.beginPlaying=function(a,c,f,q,m,t){return!b.add(a,c)?!1:!a.beginPlaying(f,q,m,t)?(a=this.instances.indexOf(a),-1<a&&this.instances.splice(a,1),!1):!0};a.getSrcById=function(b){return null==a.idHash||null==a.idHash[b]?b:a.idHash[b]};a.playFinished=function(a){b.remove(a);a=this.instances.indexOf(a);-1<a&&this.instances.splice(a,1)};a.proxy=function(a,b){return function(){return a.apply(b,arguments)}};createjs.Sound=a;createjs.proxy=
function(a,b){var c=Array.prototype.slice.call(arguments,2);return function(){return a.apply(b,Array.prototype.slice.call(arguments,0).concat(c))}};b.channels={};b.create=function(a,c){return null==b.get(a)?(b.channels[a]=new b(a,c),!0):!1};b.add=function(a,c){var f=b.get(a.src);return null==f?!1:f.add(a,c)};b.remove=function(a){var c=b.get(a.src);if(null==c)return!1;c.remove(a);return!0};b.maxPerChannel=function(){return f.maxDefault};b.get=function(a){return b.channels[a]};var f=b.prototype={src:null,
max:null,maxDefault:100,length:0,init:function(a,b){this.src=a;this.max=b||this.maxDefault;-1==this.max&&this.max==this.maxDefault;this.instances=[]},get:function(a){return this.instances[a]},add:function(a,b){if(!this.getSlot(b,a))return!1;this.instances.push(a);this.length++;return!0},remove:function(a){a=this.instances.indexOf(a);if(-1==a)return!1;this.instances.splice(a,1);this.length--;return!0},getSlot:function(b){for(var c,f,q=0,m=this.max;q<m;q++){c=this.get(q);if(null==c)return!0;if(!(b==
a.INTERRUPT_NONE&&c.playState!=a.PLAY_FINISHED))if(0==q)f=c;else if(c.playState==a.PLAY_FINISHED||c==a.PLAY_INTERRUPTED||c==a.PLAY_FAILED)f=c;else if(b==a.INTERRUPT_EARLY&&c.getPosition()<f.getPosition()||b==a.INTERRUPT_LATE&&c.getPosition()>f.getPosition())f=c}return null!=f?(f.interrupt(),this.remove(f),!0):!1},toString:function(){return"[Sound SoundChannel]"}};a.defaultSoundInstance=new function(){this.isDefault=!0;this.addEventListener=this.removeEventListener=this.removeAllEventListener=this.dispatchEvent=
this.hasEventListener=this._listeners=this.interrupt=this.playFailed=this.pause=this.resume=this.play=this.beginPlaying=this.cleanUp=this.stop=this.setMasterVolume=this.setVolume=this.mute=this.setMute=this.getMute=this.setPan=this.getPosition=this.setPosition=function(){return!1};this.getVolume=this.getPan=this.getDuration=function(){return 0};this.playState=a.PLAY_FAILED;this.toString=function(){return"[Sound Default Sound Instance]"}};c.init=function(){var a=navigator.userAgent;c.isFirefox=-1<
a.indexOf("Firefox");c.isOpera=null!=window.opera;c.isChrome=-1<a.indexOf("Chrome");c.isIOS=-1<a.indexOf("iPod")||-1<a.indexOf("iPhone")||-1<a.indexOf("iPad");c.isAndroid=-1<a.indexOf("Android");c.isBlackberry=-1<a.indexOf("Blackberry")};c.init();createjs.Sound.BrowserDetect=c})();this.createjs=this.createjs||{};
(function(){function a(){this.init()}function b(a,b){this.init(a,b)}function c(a,b){this.init(a,b)}a.capabilities=null;a.isSupported=function(){if("file:"==location.protocol)return!1;a.generateCapabilities();return null==a.context?!1:!0};a.generateCapabilities=function(){if(null==a.capabilities){var b=document.createElement("audio");if(null==b.canPlayType)return null;if(window.webkitAudioContext)a.context=new webkitAudioContext;else if(window.AudioContext)a.context=new AudioContext;else return null;
a.capabilities={panning:!0,volume:!0,tracks:-1};for(var c=createjs.Sound.SUPPORTED_EXTENSIONS,j=createjs.Sound.EXTENSION_MAP,p=0,q=c.length;p<q;p++){var m=c[p],t=j[m]||m;a.capabilities[m]="no"!=b.canPlayType("audio/"+m)&&""!=b.canPlayType("audio/"+m)||"no"!=b.canPlayType("audio/"+t)&&""!=b.canPlayType("audio/"+t)}2>a.context.destination.numberOfChannels&&(a.capabilities.panning=!1);a.dynamicsCompressorNode=a.context.createDynamicsCompressor();a.dynamicsCompressorNode.connect(a.context.destination);
a.gainNode=a.context.createGainNode();a.gainNode.connect(a.dynamicsCompressorNode)}};a.prototype={capabilities:null,volume:1,context:null,dynamicsCompressorNode:null,gainNode:null,arrayBuffers:null,init:function(){this.capabilities=a.capabilities;this.arrayBuffers={};this.context=a.context;this.gainNode=a.gainNode;this.dynamicsCompressorNode=a.dynamicsCompressorNode},register:function(a){this.arrayBuffers[a]=!0;return{tag:new c(a,this)}},isPreloadStarted:function(a){return null!=this.arrayBuffers[a]},
isPreloadComplete:function(a){return!(null==this.arrayBuffers[a]||!0==this.arrayBuffers[a])},removeFromPreload:function(a){delete this.arrayBuffers[a]},addPreloadResults:function(a,b){this.arrayBuffers[a]=b},handlePreloadComplete:function(){createjs.Sound.sendLoadComplete(this.src)},preload:function(a){this.arrayBuffers[a]=!0;a=new c(a,this);a.onload=this.handlePreloadComplete;a.load()},create:function(a){this.isPreloadStarted(a)||this.preload(a);return new b(a,this)},setVolume:function(a){this.volume=
a;this.updateVolume();return!0},updateVolume:function(){var a=createjs.Sound.masterMute?0:this.volume;a!=this.gainNode.gain.value&&(this.gainNode.gain.value=a)},getVolume:function(){return this.volume},setMute:function(){this.updateVolume();return!0},toString:function(){return"[WebAudioPlugin]"}};createjs.WebAudioPlugin=a;b.prototype={src:null,uniqueId:-1,playState:null,owner:null,offset:0,delay:0,volume:1,pan:0,duration:0,remainingLoops:0,delayTimeoutId:null,soundCompleteTimeout:null,panNode:null,
gainNode:null,sourceNode:null,muted:!1,paused:!1,startTime:0,addEventListener:null,removeEventListener:null,removeAllEventListeners:null,dispatchEvent:null,hasEventListener:null,_listeners:null,endedHandler:null,readyHandler:null,stalledHandler:null,onReady:null,onPlaySucceeded:null,onPlayInterrupted:null,onPlayFailed:null,onComplete:null,onLoop:null,sendEvent:function(a){this.dispatchEvent({target:this,type:a})},init:function(a,b){this.owner=b;this.src=a;this.panNode=this.owner.context.createPanner();
this.gainNode=this.owner.context.createGainNode();this.gainNode.connect(this.panNode);this.owner.isPreloadComplete(this.src)&&(this.duration=1E3*this.owner.arrayBuffers[this.src].duration);this.endedHandler=createjs.proxy(this.handleSoundComplete,this);this.readyHandler=createjs.proxy(this.handleSoundReady,this);this.stalledHandler=createjs.proxy(this.handleSoundStalled,this)},cleanUp:function(){this.sourceNode&&this.sourceNode.playbackState!=this.sourceNode.UNSCHEDULED_STATE&&(this.sourceNode.noteOff(0),
this.sourceNode=null);0!=this.panNode.numberOfOutputs&&this.panNode.disconnect(0);clearTimeout(this.delayTimeoutId);clearTimeout(this.soundCompleteTimeout);null!=window.createjs&&createjs.Sound.playFinished(this)},interrupt:function(){this.playState=createjs.Sound.PLAY_INTERRUPTED;if(this.onPlayInterrupted)this.onPlayInterrupted(this);this.sendEvent("interrupted");this.cleanUp();this.paused=!1},handleSoundStalled:function(){if(null!=this.onPlayFailed)this.onPlayFailed(this);this.sendEvent("failed")},
handleSoundReady:function(){null!=window.createjs&&(this.offset>this.getDuration()?this.playFailed():(0>this.offset&&(this.offset=0),this.playState=createjs.Sound.PLAY_SUCCEEDED,this.paused=!1,this.panNode.connect(this.owner.gainNode),this.sourceNode=this.owner.context.createBufferSource(),this.sourceNode.buffer=this.owner.arrayBuffers[this.src],this.duration=1E3*this.owner.arrayBuffers[this.src].duration,this.sourceNode.connect(this.gainNode),this.soundCompleteTimeout=setTimeout(this.endedHandler,
1E3*(this.sourceNode.buffer.duration-this.offset)),this.startTime=this.owner.context.currentTime-this.offset,this.sourceNode.noteGrainOn(0,this.offset,this.sourceNode.buffer.duration-this.offset)))},play:function(a,b,c,p,q,m){this.cleanUp();createjs.Sound.playInstance(this,a,b,c,p,q,m)},beginPlaying:function(a,b,c,p){if(null!=window.createjs&&this.src){this.offset=a/1E3;this.remainingLoops=b;this.setVolume(c);this.setPan(p);if(this.owner.isPreloadComplete(this.src))return this.handleSoundReady(null),
this.onPlaySucceeded&&this.onPlaySucceeded(this),this.sendEvent("succeeded"),1;this.playFailed()}},pause:function(){return!this.paused&&this.playState==createjs.Sound.PLAY_SUCCEEDED?(this.paused=!0,this.offset=this.owner.context.currentTime-this.startTime,this.sourceNode.noteOff(0),0!=this.panNode.numberOfOutputs&&this.panNode.disconnect(),clearTimeout(this.delayTimeoutId),clearTimeout(this.soundCompleteTimeout),!0):!1},resume:function(){if(!this.paused)return!1;this.handleSoundReady(null);return!0},
stop:function(){this.playState=createjs.Sound.PLAY_FINISHED;this.cleanUp();this.offset=0;return!0},setVolume:function(a){if(null==Number(a))return!1;this.volume=Math.max(0,Math.min(1,a));this.updateVolume();return!0},updateVolume:function(){var a=this.muted?0:this.volume;return a!=this.gainNode.gain.value?(this.gainNode.gain.value=a,!0):!1},getVolume:function(){return this.volume},mute:function(a){this.muted=a;this.updateVolume();return!0},setMute:function(a){if(null==a||void 0==a)return!1;this.muted=
a;this.updateVolume();return!0},getMute:function(){return this.muted},setPan:function(a){if(this.owner.capabilities.panning)this.panNode.setPosition(a,0,-0.5),this.pan=a;else return!1},getPan:function(){return this.pan},getPosition:function(){return 1E3*(this.paused||null==this.sourceNode?this.offset:this.owner.context.currentTime-this.startTime)},setPosition:function(a){this.offset=a/1E3;this.sourceNode&&this.sourceNode.playbackState!=this.sourceNode.UNSCHEDULED_STATE&&(this.sourceNode.noteOff(0),
clearTimeout(this.soundCompleteTimeout));!this.paused&&this.playState==createjs.Sound.PLAY_SUCCEEDED&&this.handleSoundReady(null);return!0},getDuration:function(){return this.duration},handleSoundComplete:function(){this.offset=0;if(0!=this.remainingLoops){this.remainingLoops--;this.handleSoundReady(null);if(null!=this.onLoop)this.onLoop(this);this.sendEvent("loop")}else if(null!=window.createjs){this.playState=createjs.Sound.PLAY_FINISHED;if(null!=this.onComplete)this.onComplete(this);this.sendEvent("complete");
this.cleanUp()}},playFailed:function(){if(null!=window.createjs){this.playState=createjs.Sound.PLAY_FAILED;if(null!=this.onPlayFailed)this.onPlayFailed(this);this.sendEvent("failed");this.cleanUp()}},toString:function(){return"[WebAudioPlugin SoundInstance]"}};createjs.EventDispatcher.initialize(b.prototype);c.prototype={request:null,owner:null,progress:-1,src:null,result:null,onload:null,onprogress:null,onError:null,init:function(a,b){this.src=a;this.owner=b},load:function(a){null!=a&&(this.src=
a);this.request=new XMLHttpRequest;this.request.open("GET",this.src,!0);this.request.responseType="arraybuffer";this.request.onload=createjs.proxy(this.handleLoad,this);this.request.onError=createjs.proxy(this.handleError,this);this.request.onprogress=createjs.proxy(this.handleProgress,this);this.request.send()},handleProgress:function(a,b){this.progress=a/b;if(null!=this.onprogress)this.onprogress({loaded:a,total:b,progress:this.progress})},handleLoad:function(){a.context.decodeAudioData(this.request.response,
createjs.proxy(this.handleAudioDecoded,this),createjs.proxy(this.handleError,this))},handleAudioDecoded:function(a){this.progress=1;this.result=a;this.owner.addPreloadResults(this.src,this.result);this.onload&&this.onload()},handleError:function(a){this.owner.removeFromPreload(this.src);this.onerror&&this.onerror(a)},toString:function(){return"[WebAudioPlugin WebAudioLoader]"}}})();this.createjs=this.createjs||{};
(function(){function a(){this.init()}function b(a,b){this.init(a,b)}function c(a,b){this.init(a,b)}function f(a){this.init(a)}a.MAX_INSTANCES=30;a.capabilities=null;a.AUDIO_READY="canplaythrough";a.AUDIO_ENDED="ended";a.AUDIO_ERROR="error";a.AUDIO_STALLED="stalled";a.isSupported=function(){if(createjs.Sound.BrowserDetect.isIOS)return!1;a.generateCapabilities();return null==a.tag||null==a.capabilities?!1:!0};a.generateCapabilities=function(){if(null==a.capabilities){var b=a.tag=document.createElement("audio");
if(null==b.canPlayType)return null;a.capabilities={panning:!0,volume:!0,tracks:-1};for(var c=createjs.Sound.SUPPORTED_EXTENSIONS,f=createjs.Sound.EXTENSION_MAP,q=0,m=c.length;q<m;q++){var t=c[q],u=f[t]||t;a.capabilities[t]="no"!=b.canPlayType("audio/"+t)&&""!=b.canPlayType("audio/"+t)||"no"!=b.canPlayType("audio/"+u)&&""!=b.canPlayType("audio/"+u)}}};a.prototype={capabilities:null,audioSources:null,defaultNumChannels:2,init:function(){this.capabilities=a.capabilities;this.audioSources={}},register:function(a,
b){this.audioSources[a]=!0;for(var c=f.get(a),q=null,m=b||this.defaultNumChannels,t=0;t<m;t++)q=this.createTag(a),c.add(q);return{tag:q,numChannels:m}},createTag:function(a){var b=document.createElement("audio");b.autoplay=!1;b.preload="none";b.src=a;return b},create:function(a){if(!this.isPreloadStarted(a)){var c=f.get(a),p=this.createTag(a);c.add(p);this.preload(a,{tag:p})}return new b(a,this)},isPreloadStarted:function(a){return null!=this.audioSources[a]},preload:function(a,b){this.audioSources[a]=
!0;new c(a,b.tag)},toString:function(){return"[HTMLAudioPlugin]"}};createjs.HTMLAudioPlugin=a;b.prototype={src:null,uniqueId:-1,playState:null,owner:null,loaded:!1,offset:0,delay:0,volume:1,pan:0,duration:0,remainingLoops:0,delayTimeoutId:null,tag:null,muted:!1,paused:!1,addEventListener:null,removeEventListener:null,removeAllEventListeners:null,dispatchEvent:null,hasEventListener:null,_listeners:null,onComplete:null,onLoop:null,onReady:null,onPlayFailed:null,onPlayInterrupted:null,onPlaySucceeded:null,
endedHandler:null,readyHandler:null,stalledHandler:null,init:function(a,b){this.src=a;this.owner=b;this.endedHandler=createjs.proxy(this.handleSoundComplete,this);this.readyHandler=createjs.proxy(this.handleSoundReady,this);this.stalledHandler=createjs.proxy(this.handleSoundStalled,this)},sendEvent:function(a){this.dispatchEvent({target:this,type:a})},cleanUp:function(){var a=this.tag;if(null!=a){a.pause();try{a.currentTime=0}catch(b){}a.removeEventListener(createjs.HTMLAudioPlugin.AUDIO_ENDED,this.endedHandler,
!1);a.removeEventListener(createjs.HTMLAudioPlugin.AUDIO_READY,this.readyHandler,!1);f.setInstance(this.src,a);this.tag=null}clearTimeout(this.delayTimeoutId);null!=window.createjs&&createjs.Sound.playFinished(this)},interrupt:function(){if(null!=this.tag){this.playState=createjs.Sound.PLAY_INTERRUPTED;if(this.onPlayInterrupted)this.onPlayInterrupted(this);this.sendEvent("interrupted");this.cleanUp();this.paused=!1}},play:function(a,b,c,f,m,t){this.cleanUp();createjs.Sound.playInstance(this,a,b,c,
f,m,t)},beginPlaying:function(a,b,c){if(null==window.createjs)return-1;var q=this.tag=f.getInstance(this.src);if(null==q)return this.playFailed(),-1;this.duration=1E3*this.tag.duration;q.addEventListener(createjs.HTMLAudioPlugin.AUDIO_ENDED,this.endedHandler,!1);this.offset=a;this.volume=c;this.updateVolume();this.remainingLoops=b;4!==q.readyState?(q.addEventListener(createjs.HTMLAudioPlugin.AUDIO_READY,this.readyHandler,!1),q.addEventListener(createjs.HTMLAudioPlugin.AUDIO_STALLED,this.stalledHandler,
!1),q.load()):this.handleSoundReady(null);this.onPlaySucceeded&&this.onPlaySucceeded(this);this.sendEvent("succeeded");return 1},handleSoundStalled:function(){if(null!=this.onPlayFailed)this.onPlayFailed(this);this.sendEvent("failed");this.cleanUp()},handleSoundReady:function(){null!=window.createjs&&(this.playState=createjs.Sound.PLAY_SUCCEEDED,this.paused=!1,this.tag.removeEventListener(createjs.HTMLAudioPlugin.AUDIO_READY,this.readyHandler,!1),this.offset>=this.getDuration()?this.playFailed():
(0<this.offset&&(this.tag.currentTime=0.0010*this.offset),-1==this.remainingLoops&&(this.tag.loop=!0),this.tag.play()))},pause:function(){return!this.paused&&this.playState==createjs.Sound.PLAY_SUCCEEDED&&null!=this.tag?(this.paused=!0,this.tag.pause(),clearTimeout(this.delayTimeoutId),!0):!1},resume:function(){if(!this.paused||null==this.tag)return!1;this.paused=!1;this.tag.play();return!0},stop:function(){this.offset=0;this.pause();this.playState=createjs.Sound.PLAY_FINISHED;this.cleanUp();return!0},
setMasterVolume:function(){this.updateVolume();return!0},setVolume:function(a){if(null==Number(a))return!1;this.volume=Math.max(0,Math.min(1,a));this.updateVolume();return!0},updateVolume:function(){if(null!=this.tag){var a=this.muted||createjs.Sound.masterMute?0:this.volume*createjs.Sound.masterVolume;a!=this.tag.volume&&(this.tag.volume=a);return!0}return!1},getVolume:function(){return this.volume},mute:function(a){this.muted=a;this.updateVolume();return!0},setMasterMute:function(){this.updateVolume();
return!0},setMute:function(a){if(null==a||void 0==a)return!1;this.muted=a;this.updateVolume();return!0},getMute:function(){return this.muted},setPan:function(){return!1},getPan:function(){return 0},getPosition:function(){return null==this.tag?this.offset:1E3*this.tag.currentTime},setPosition:function(a){if(null==this.tag)this.offset=a;else try{this.tag.currentTime=0.0010*a}catch(b){return!1}return!0},getDuration:function(){return this.duration},handleSoundComplete:function(){this.offset=0;if(0!=this.remainingLoops){this.remainingLoops--;
this.tag.play();if(null!=this.onLoop)this.onLoop(this);this.sendEvent("loop")}else if(null!=window.createjs){this.playState=createjs.Sound.PLAY_FINISHED;if(null!=this.onComplete)this.onComplete(this);this.sendEvent("complete");this.cleanUp()}},playFailed:function(){if(null!=window.createjs){this.playState=createjs.Sound.PLAY_FAILED;if(null!=this.onPlayFailed)this.onPlayFailed(this);this.sendEvent("failed");this.cleanUp()}},toString:function(){return"[HTMLAudioPlugin SoundInstance]"}};createjs.EventDispatcher.initialize(b.prototype);
c.prototype={src:null,tag:null,preloadTimer:null,loadedHandler:null,init:function(a,b){this.src=a;this.tag=b;this.preloadTimer=setInterval(createjs.proxy(this.preloadTick,this),200);this.loadedHandler=createjs.proxy(this.sendLoadedEvent,this);this.tag.addEventListener&&this.tag.addEventListener("canplaythrough",this.loadedHandler);this.tag.onreadystatechange=createjs.proxy(this.sendLoadedEvent,this);this.tag.preload="auto";this.tag.src=a;this.tag.load()},preloadTick:function(){var a=this.tag.buffered,
b=this.tag.duration;0<a.length&&a.end(0)>=b-1&&this.handleTagLoaded()},handleTagLoaded:function(){clearInterval(this.preloadTimer)},sendLoadedEvent:function(){this.tag.removeEventListener&&this.tag.removeEventListener("canplaythrough",this.loadedHandler);this.tag.onreadystatechange=null;createjs.Sound.sendLoadComplete(this.src)},toString:function(){return"[HTMLAudioPlugin HTMLAudioLoader]"}};f.tags={};f.get=function(a){var b=f.tags[a];null==b&&(b=f.tags[a]=new f(a));return b};f.getInstance=function(a){a=
f.tags[a];return null==a?null:a.get()};f.setInstance=function(a,b){var c=f.tags[a];return null==c?null:c.set(b)};f.prototype={src:null,length:0,available:0,tags:null,init:function(a){this.src=a;this.tags=[]},add:function(a){this.tags.push(a);this.length++;this.available++},get:function(){if(0==this.tags.length)return null;this.available=this.tags.length;var a=this.tags.pop();null==a.parentNode&&document.body.appendChild(a);return a},set:function(a){-1==this.tags.indexOf(a)&&this.tags.push(a);this.available=
this.tags.length},toString:function(){return"[HTMLAudioPlugin TagPool]"}}})();var manifest=[{src:"media/sounds/desktop/background.ogg|media/sounds/desktop/background.mp3",id:"BGM"},{src:"media/sounds/desktop/start.ogg|media/sounds/desktop/start.mp3",id:"start"}];createjs.Sound.registerPlugins([createjs.HTMLAudioPlugin,createjs.WebAudioPlugin]);createjs.Sound.registerManifest(manifest);
(function(a){Number.prototype.map=function(a,b,c,e){return c+(e-c)*((this-a)/(b-a))};Number.prototype.limit=function(a,b){return Math.min(b,Math.max(a,this))};Number.prototype.round=function(a){a=Math.pow(10,a||0);return Math.round(this*a)/a};Number.prototype.floor=function(){return Math.floor(this)};Number.prototype.ceil=function(){return Math.ceil(this)};Number.prototype.toInt=function(){return this|0};Number.prototype.toRad=function(){return this/180*Math.PI};Number.prototype.toDeg=function(){return 180*
this/Math.PI};Array.prototype.erase=function(a){for(var b=this.length;b--;)this[b]===a&&this.splice(b,1);return this};Array.prototype.random=function(){return this[Math.floor(Math.random()*this.length)]};Function.prototype.bind=Function.prototype.bind||function(a){var b=this;return function(){var c=Array.prototype.slice.call(arguments);return b.apply(a||null,c)}};a.ig={game:null,debug:null,version:"1.20",global:a,modules:{},resources:[],ready:!1,baked:!1,nocache:"",ua:{},prefix:a.ImpactPrefix||"",
lib:"lib/",_current:null,_loadQueue:[],_waitForOnload:0,$:function(a){return"#"==a.charAt(0)?document.getElementById(a.substr(1)):document.getElementsByTagName(a)},$new:function(a){return document.createElement(a)},copy:function(a){if(!a||"object"!=typeof a||a instanceof HTMLElement||a instanceof ig.Class)return a;if(a instanceof Array)for(var b=[],c=0,e=a.length;c<e;c++)b[c]=ig.copy(a[c]);else for(c in b={},a)b[c]=ig.copy(a[c]);return b},merge:function(a,b){for(var c in b){var e=b[c];if("object"!=
typeof e||e instanceof HTMLElement||e instanceof ig.Class)a[c]=e;else{if(!a[c]||"object"!=typeof a[c])a[c]=e instanceof Array?[]:{};ig.merge(a[c],e)}}return a},ksort:function(a){if(!a||"object"!=typeof a)return[];var b=[],c=[],e;for(e in a)b.push(e);b.sort();for(e=0;e<b.length;e++)c.push(a[b[e]]);return c},module:function(a){if(ig._current)throw"Module '"+ig._current.name+"' defines nothing";if(ig.modules[a]&&ig.modules[a].body)throw"Module '"+a+"' is already defined";ig._current={name:a,requires:[],
loaded:!1,body:null};ig.modules[a]=ig._current;ig._loadQueue.push(ig._current);return ig},requires:function(){ig._current.requires=Array.prototype.slice.call(arguments);return ig},defines:function(a){ig._current.body=a;ig._current=null;ig._initDOMReady()},addResource:function(a){ig.resources.push(a)},setNocache:function(a){ig.nocache=a?"?"+Date.now():""},log:function(){},assert:function(){},show:function(){},mark:function(){},_loadScript:function(a,b){ig.modules[a]={name:a,requires:[],loaded:!1,body:null};
ig._waitForOnload++;var c=ig.prefix+ig.lib+a.replace(/\./g,"/")+".js"+ig.nocache,e=ig.$new("script");e.type="text/javascript";e.src=c;e.onload=function(){ig._waitForOnload--;ig._execModules()};e.onerror=function(){throw"Failed to load module "+a+" at "+c+" required from "+b;};ig.$("head")[0].appendChild(e)},_execModules:function(){for(var a=!1,b=0;b<ig._loadQueue.length;b++){for(var c=ig._loadQueue[b],e=!0,f=0;f<c.requires.length;f++){var j=c.requires[f];ig.modules[j]?ig.modules[j].loaded||(e=!1):
(e=!1,ig._loadScript(j,c.name))}e&&c.body&&(ig._loadQueue.splice(b,1),c.loaded=!0,c.body(),a=!0,b--)}if(a)ig._execModules();else if(!ig.baked&&0==ig._waitForOnload&&0!=ig._loadQueue.length){a=[];for(b=0;b<ig._loadQueue.length;b++){e=[];j=ig._loadQueue[b].requires;for(f=0;f<j.length;f++)c=ig.modules[j[f]],(!c||!c.loaded)&&e.push(j[f]);a.push(ig._loadQueue[b].name+" (requires: "+e.join(", ")+")")}throw"Unresolved (circular?) dependencies. Most likely there's a name/path mismatch for one of the listed modules:\n"+
a.join("\n");}},_DOMReady:function(){if(!ig.modules["dom.ready"].loaded){if(!document.body)return setTimeout(ig._DOMReady,13);ig.modules["dom.ready"].loaded=!0;ig._waitForOnload--;ig._execModules()}return 0},_boot:function(){document.location.href.match(/\?nocache/)&&ig.setNocache(!0);ig.ua.pixelRatio=a.devicePixelRatio||1;ig.ua.viewport={width:a.innerWidth,height:a.innerHeight};ig.ua.screen={width:a.screen.availWidth*ig.ua.pixelRatio,height:a.screen.availHeight*ig.ua.pixelRatio};ig.ua.iPhone=/iPhone/i.test(navigator.userAgent);
ig.ua.iPhone4=ig.ua.iPhone&&2==ig.ua.pixelRatio;ig.ua.iPad=/iPad/i.test(navigator.userAgent);ig.ua.android=/android/i.test(navigator.userAgent);ig.ua.is_uiwebview=/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(navigator.userAgent);ig.ua.is_safari_or_uiwebview=/(iPhone|iPod|iPad).*AppleWebKit/i.test(navigator.userAgent);ig.ua.iOS=ig.ua.iPhone||ig.ua.iPad;ig.ua.iOS6_tag=/OS 6_/i.test(navigator.userAgent);ig.ua.iOS6=(ig.ua.iPhone||ig.ua.iPad)&&ig.ua.iOS6_tag;ig.ua.mobile=ig.ua.iOS||ig.ua.android||
ig.ua.iOS6},_initDOMReady:function(){ig.modules["dom.ready"]?ig._execModules():(ig._boot(),ig.modules["dom.ready"]={requires:[],loaded:!1,body:null},ig._waitForOnload++,"complete"===document.readyState?ig._DOMReady():(document.addEventListener("DOMContentLoaded",ig._DOMReady,!1),a.addEventListener("load",ig._DOMReady,!1)))}};for(var b=["ms","moz","webkit","o"],c=0;c<b.length&&!a.requestAnimationFrame;c++)a.requestAnimationFrame=a[b[c]+"RequestAnimationFrame"];if(a.requestAnimationFrame){var f=1,e=
{};a.ig.setAnimation=function(b,c){var j=f++;e[j]=!0;var p=function(){e[j]&&(a.requestAnimationFrame(p,c),b())};a.requestAnimationFrame(p,c);return j};a.ig.clearAnimation=function(a){delete e[a]}}else a.ig.setAnimation=function(b){return a.setInterval(b,1E3/60)},a.ig.clearAnimation=function(b){a.clearInterval(b)};var j=!1,p=/xyz/.test(function(){xyz})?/\bparent\b/:/.*/;a.ig.Class=function(){};var q=function(a){var b=this.prototype,c={},e;for(e in a)"function"==typeof a[e]&&"function"==typeof b[e]&&
p.test(a[e])?(c[e]=b[e],b[e]=function(a,b){return function(){var e=this.parent;this.parent=c[a];var f=b.apply(this,arguments);this.parent=e;return f}}(e,a[e])):b[e]=a[e]};a.ig.Class.extend=function(b){function c(){if(!j){if(this.staticInstantiate){var a=this.staticInstantiate.apply(this,arguments);if(a)return a}for(var b in this)"object"==typeof this[b]&&(this[b]=ig.copy(this[b]));this.init&&this.init.apply(this,arguments)}return this}var e=this.prototype;j=!0;var f=new this;j=!1;for(var r in b)f[r]=
"function"==typeof b[r]&&"function"==typeof e[r]&&p.test(b[r])?function(a,b){return function(){var c=this.parent;this.parent=e[a];var f=b.apply(this,arguments);this.parent=c;return f}}(r,b[r]):b[r];c.prototype=f;c.constructor=c;c.extend=a.ig.Class.extend;c.inject=q;return c}})(window);ig.baked=!0;
ig.module("impact.image").defines(function(){ig.Image=ig.Class.extend({data:null,width:0,height:0,loaded:!1,failed:!1,loadCallback:null,path:"",staticInstantiate:function(a){return ig.Image.cache[a]||null},init:function(a){this.path=a;this.load()},load:function(a){this.loaded?a&&a(this.path,!0):(!this.loaded&&ig.ready?(this.loadCallback=a||null,this.data=new Image,this.data.onload=this.onload.bind(this),this.data.onerror=this.onerror.bind(this),this.data.src=ig.prefix+this.path+ig.nocache):ig.addResource(this),
ig.Image.cache[this.path]=this)},reload:function(){this.loaded=!1;this.data=new Image;this.data.onload=this.onload.bind(this);this.data.src=this.path+"?"+Date.now()},onload:function(){this.width=this.data.width;this.height=this.data.height;this.loaded=!0;1!=ig.system.scale&&this.resize(ig.system.scale);this.loadCallback&&this.loadCallback(this.path,!0)},onerror:function(){this.failed=!0;this.loadCallback&&this.loadCallback(this.path,!1)},resize:function(a){var b=this.width*a,c=this.height*a,f=ig.$new("canvas");
f.width=this.width;f.height=this.height;f=f.getContext("2d");f.drawImage(this.data,0,0,this.width,this.height,0,0,this.width,this.height);var f=f.getImageData(0,0,this.width,this.height),e=ig.$new("canvas");e.width=b;e.height=c;for(var j=e.getContext("2d"),p=j.getImageData(0,0,b,c),q=0;q<c;q++)for(var m=0;m<b;m++){var t=4*(Math.floor(q/a)*this.width+Math.floor(m/a)),u=4*(q*b+m);p.data[u]=f.data[t];p.data[u+1]=f.data[t+1];p.data[u+2]=f.data[t+2];p.data[u+3]=f.data[t+3]}j.putImageData(p,0,0);this.data=
e},draw:function(a,b,c,f,e,j){if(this.loaded){var p=ig.system.scale;e=(e?e:this.width)*p;j=(j?j:this.height)*p;ig.system.context.drawImage(this.data,c?c*p:0,f?f*p:0,e,j,ig.system.getDrawPos(a),ig.system.getDrawPos(b),e,j);ig.Image.drawCount++}},drawTile:function(a,b,c,f,e,j,p){e=e?e:f;if(this.loaded&&!(f>this.width||e>this.height)){var q=ig.system.scale,m=Math.floor(f*q),t=Math.floor(e*q),u=j?-1:1,s=p?-1:1;if(j||p)ig.system.context.save(),ig.system.context.scale(u,s);ig.system.context.drawImage(this.data,
Math.floor(c*f)%this.width*q,Math.floor(c*f/this.width)*e*q,m,t,ig.system.getDrawPos(a)*u-(j?m:0),ig.system.getDrawPos(b)*s-(p?t:0),m,t);(j||p)&&ig.system.context.restore();ig.Image.drawCount++}}});ig.Image.drawCount=0;ig.Image.cache={};ig.Image.reloadCache=function(){for(var a in ig.Image.cache)ig.Image.cache[a].reload()}});ig.baked=!0;
ig.module("impact.font").requires("impact.image").defines(function(){ig.Font=ig.Image.extend({widthMap:[],indices:[],firstChar:32,alpha:1,letterSpacing:1,lineSpacing:0,onload:function(a){this._loadMetrics(this.data);this.parent(a)},widthForString:function(a){if(-1!==a.indexOf("\n")){a=a.split("\n");for(var b=0,c=0;c<a.length;c++)b=Math.max(b,this._widthForLine(a[c]));return b}return this._widthForLine(a)},_widthForLine:function(a){for(var b=0,c=0;c<a.length;c++)b+=this.widthMap[a.charCodeAt(c)-this.firstChar]+
this.letterSpacing;return b},heightForString:function(a){return a.split("\n").length*(this.height+this.lineSpacing)},draw:function(a,b,c,f){"string"!=typeof a&&(a=a.toString());if(-1!==a.indexOf("\n")){a=a.split("\n");for(var e=this.height+this.lineSpacing,j=0;j<a.length;j++)this.draw(a[j],b,c+j*e,f)}else{if(f==ig.Font.ALIGN.RIGHT||f==ig.Font.ALIGN.CENTER)j=this._widthForLine(a),b-=f==ig.Font.ALIGN.CENTER?j/2:j;1!==this.alpha&&(ig.system.context.globalAlpha=this.alpha);for(j=0;j<a.length;j++)f=a.charCodeAt(j),
b+=this._drawChar(f-this.firstChar,b,c);1!==this.alpha&&(ig.system.context.globalAlpha=1);ig.Image.drawCount+=a.length}},_drawChar:function(a,b,c){if(!this.loaded||0>a||a>=this.indices.length)return 0;var f=ig.system.scale,e=this.widthMap[a]*f,j=(this.height-2)*f;ig.system.context.drawImage(this.data,this.indices[a]*f,0,e,j,ig.system.getDrawPos(b),ig.system.getDrawPos(c),e,j);return this.widthMap[a]+this.letterSpacing},_loadMetrics:function(a){this.height=a.height-1;this.widthMap=[];this.indices=
[];var b=ig.$new("canvas");b.width=a.width;b.height=a.height;b=b.getContext("2d");b.drawImage(a,0,0);for(var b=b.getImageData(0,a.height-1,a.width,1),c=0,f=0,e=0;e<a.width;e++){var j=4*e+3;0!=b.data[j]?f++:0==b.data[j]&&f&&(this.widthMap.push(f),this.indices.push(e-f),c++,f=0)}this.widthMap.push(f);this.indices.push(e-f)}});ig.Font.ALIGN={LEFT:0,RIGHT:1,CENTER:2}});ig.baked=!0;
ig.module("impact.sound").defines(function(){ig.SoundManager=ig.Class.extend({clips:{},volume:1,format:null,init:function(){for(var a=new Audio,b=0;b<ig.Sound.use.length;b++){var c=ig.Sound.use[b];if(a.canPlayType(c.mime)){this.format=c;break}}this.format||(ig.Sound.enabled=!1)},load:function(a,b,c){var f=ig.prefix+a.replace(/[^\.]+$/,this.format.ext)+ig.nocache;if(this.clips[a]){if(b&&this.clips[a].length<ig.Sound.channels)for(b=this.clips[a].length;b<ig.Sound.channels;b++){var e=new Audio(f);e.load();
this.clips[a].push(e)}return this.clips[a][0]}var j=new Audio(f);c&&(j.addEventListener("canplaythrough",function q(b){j.removeEventListener("canplaythrough",q,!1);c(a,!0,b)},!1),j.addEventListener("error",function(b){c(a,!0,b)},!1));j.preload="auto";j.load();this.clips[a]=[j];if(b)for(b=1;b<ig.Sound.channels;b++)e=new Audio(f),e.load(),this.clips[a].push(e);return j},get:function(a){a=this.clips[a];for(var b=0,c;c=a[b++];)if(c.paused||c.ended)return c.ended&&(c.currentTime=0),c;a[0].pause();a[0].currentTime=
0;return a[0]}});ig.Music=ig.Class.extend({tracks:[],namedTracks:{},currentTrack:null,currentIndex:0,random:!1,_volume:1,_loop:!1,_fadeInterval:0,_fadeTimer:null,_endedCallbackBound:null,init:function(){this._endedCallbackBound=this._endedCallback.bind(this);Object.defineProperty?(Object.defineProperty(this,"volume",{get:this.getVolume.bind(this),set:this.setVolume.bind(this)}),Object.defineProperty(this,"loop",{get:this.getLooping.bind(this),set:this.setLooping.bind(this)})):this.__defineGetter__&&
(this.__defineGetter__("volume",this.getVolume.bind(this)),this.__defineSetter__("volume",this.setVolume.bind(this)),this.__defineGetter__("loop",this.getLooping.bind(this)),this.__defineSetter__("loop",this.setLooping.bind(this)))},add:function(a,b){if(ig.Sound.enabled){var c=ig.soundManager.load(a instanceof ig.Sound?a.path:a,!1);c.loop=this._loop;c.volume=this._volume;c.addEventListener("ended",this._endedCallbackBound,!1);this.tracks.push(c);b&&(this.namedTracks[b]=c);this.currentTrack||(this.currentTrack=
c)}},next:function(){this.tracks.length&&(this.stop(),this.currentIndex=this.random?Math.floor(Math.random()*this.tracks.length):(this.currentIndex+1)%this.tracks.length,this.currentTrack=this.tracks[this.currentIndex],this.play())},pause:function(){this.currentTrack&&this.currentTrack.pause()},stop:function(){if(this.currentTrack){this.currentTrack.pause();try{this.currentTrack.currentTime=0}catch(a){console.log(a)}}},play:function(a){if(a&&this.namedTracks[a])a=this.namedTracks[a],a!=this.currentTrack&&
(this.stop(),this.currentTrack=a);else if(!this.currentTrack)return;this.currentTrack.play()},getLooping:function(){return this._loop},setLooping:function(a){this._loop=a;for(var b in this.tracks)this.tracks[b].loop=a},getVolume:function(){return this._volume},setVolume:function(a){this._volume=a.limit(0,1);for(var b in this.tracks)this.tracks[b].volume=this._volume},fadeOut:function(a){this.currentTrack&&(clearInterval(this._fadeInterval),this.fadeTimer=new ig.Timer(a),this._fadeInterval=setInterval(this._fadeStep.bind(this),
50))},_fadeStep:function(){var a=this.fadeTimer.delta().map(-this.fadeTimer.target,0,1,0).limit(0,1)*this._volume;0.01>=a?(this.stop(),this.currentTrack.volume=this._volume,clearInterval(this._fadeInterval)):this.currentTrack.volume=a},_endedCallback:function(){this._loop?this.play():this.next()}});ig.Sound=ig.Class.extend({path:"",volume:1,currentClip:null,multiChannel:!0,init:function(a,b){this.path=a;this.multiChannel=!1!==b;this.load()},load:function(a){ig.Sound.enabled?ig.ready?ig.soundManager.load(this.path,
this.multiChannel,a):ig.addResource(this):a&&a(this.path,!0)},play:function(){ig.Sound.enabled&&(this.currentClip=ig.soundManager.get(this.path),this.currentClip.volume=ig.soundManager.volume*this.volume,this.currentClip.play())},stop:function(){this.currentClip&&(this.currentClip.pause(),this.currentClip.currentTime=0)}});ig.Sound.FORMAT={MP3:{ext:"mp3",mime:"audio/mpeg"},M4A:{ext:"m4a",mime:"audio/mp4; codecs=mp4a"},OGG:{ext:"ogg",mime:"audio/ogg; codecs=vorbis"},WEBM:{ext:"webm",mime:"audio/webm; codecs=vorbis"},
CAF:{ext:"caf",mime:"audio/x-caf"}};ig.Sound.use=[ig.Sound.FORMAT.MP3,ig.Sound.FORMAT.OGG];ig.Sound.channels=4;ig.Sound.enabled=!0});ig.baked=!0;
ig.module("impact.loader").requires("impact.image","impact.font","impact.sound").defines(function(){ig.Loader=ig.Class.extend({resources:[],gameClass:null,status:0,done:!1,_unloaded:[],_drawStatus:0,_intervalId:0,_loadCallbackBound:null,init:function(a,b){this.gameClass=a;this.resources=b;this._loadCallbackBound=this._loadCallback.bind(this);for(var c=0;c<this.resources.length;c++)this._unloaded.push(this.resources[c].path)},load:function(){ig.system.clear("#000");if(this.resources.length){for(var a=
0;a<this.resources.length;a++)this.loadResource(this.resources[a]);this._intervalId=setInterval(this.draw.bind(this),16)}else this.end()},loadResource:function(a){a.load(this._loadCallbackBound)},end:function(){this.done||(this.done=!0,clearInterval(this._intervalId))},draw:function(){},_loadCallback:function(a,b){if(b)this._unloaded.erase(a);else throw"Failed to load resource: "+a;this.status=1-this._unloaded.length/this.resources.length;0==this._unloaded.length&&setTimeout(this.end.bind(this),250)}})});
ig.baked=!0;
ig.module("impact.timer").defines(function(){ig.Timer=ig.Class.extend({target:0,base:0,last:0,pausedAt:0,init:function(a){this.last=this.base=ig.Timer.time;this.target=a||0},set:function(a){this.target=a||0;this.base=ig.Timer.time;this.pausedAt=0},reset:function(){this.base=ig.Timer.time;this.pausedAt=0},tick:function(){var a=ig.Timer.time-this.last;this.last=ig.Timer.time;return this.pausedAt?0:a},delta:function(){return(this.pausedAt||ig.Timer.time)-this.base-this.target},pause:function(){this.pausedAt||(this.pausedAt=
ig.Timer.time)},unpause:function(){this.pausedAt&&(this.base+=ig.Timer.time-this.pausedAt,this.pausedAt=0)}});ig.Timer._last=0;ig.Timer.time=0;ig.Timer.timeScale=1;ig.Timer.maxStep=0.05;ig.Timer.step=function(){var a=Date.now();ig.Timer.time+=Math.min((a-ig.Timer._last)/1E3,ig.Timer.maxStep)*ig.Timer.timeScale;ig.Timer._last=a}});ig.baked=!0;
ig.module("impact.system").requires("impact.timer","impact.image").defines(function(){ig.System=ig.Class.extend({fps:30,width:320,height:240,realWidth:320,realHeight:240,scale:1,tick:0,animationId:0,newGameClass:null,running:!1,delegate:null,clock:null,canvas:null,context:null,init:function(a,b,c,f,e){this.fps=b;this.clock=new ig.Timer;this.canvas=ig.$(a);this.resize(c,f,e);this.context=this.canvas.getContext("2d");this.getDrawPos=ig.System.drawMode},resize:function(a,b,c){this.width=a;this.height=
b;this.scale=c||this.scale;this.realWidth=this.width*this.scale;this.realHeight=this.height*this.scale;this.canvas.width=this.realWidth;this.canvas.height=this.realHeight},setGame:function(a){this.running?this.newGameClass=a:this.setGameNow(a)},setGameNow:function(a){ig.game=new a;ig.system.setDelegate(ig.game)},setDelegate:function(a){if("function"==typeof a.run)this.delegate=a,this.startRunLoop();else throw"System.setDelegate: No run() function in object";},stopRunLoop:function(){ig.clearAnimation(this.animationId);
this.running=!1},startRunLoop:function(){this.stopRunLoop();this.animationId=ig.setAnimation(this.run.bind(this),this.canvas);this.running=!0},clear:function(a){this.context.fillStyle=a;this.context.fillRect(0,0,this.realWidth,this.realHeight)},run:function(){ig.Timer.step();this.tick=this.clock.tick();this.delegate.run();ig.input.clearPressed();this.newGameClass&&(this.setGameNow(this.newGameClass),this.newGameClass=null)},getDrawPos:null});ig.System.DRAW={AUTHENTIC:function(a){return Math.round(a)*
this.scale},SMOOTH:function(a){return Math.round(a*this.scale)},SUBPIXEL:function(a){return a*this.scale}};ig.System.drawMode=ig.System.DRAW.SMOOTH});ig.baked=!0;
ig.module("impact.input").defines(function(){ig.KEY={MOUSE1:-1,MOUSE2:-3,MWHEEL_UP:-4,MWHEEL_DOWN:-5,BACKSPACE:8,TAB:9,ENTER:13,PAUSE:19,CAPS:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,INSERT:45,DELETE:46,_0:48,_1:49,_2:50,_3:51,_4:52,_5:53,_6:54,_7:55,_8:56,_9:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,NUMPAD_0:96,NUMPAD_1:97,NUMPAD_2:98,
NUMPAD_3:99,NUMPAD_4:100,NUMPAD_5:101,NUMPAD_6:102,NUMPAD_7:103,NUMPAD_8:104,NUMPAD_9:105,MULTIPLY:106,ADD:107,SUBSTRACT:109,DECIMAL:110,DIVIDE:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,SHIFT:16,CTRL:17,ALT:18,PLUS:187,COMMA:188,MINUS:189,PERIOD:190};ig.Input=ig.Class.extend({bindings:{},actions:{},presses:{},locks:{},delayedKeyup:{},isUsingMouse:!1,isUsingKeyboard:!1,isUsingAccelerometer:!1,mouse:{x:0,y:0},accel:{x:0,y:0,z:0},initMouse:function(){if(!this.isUsingMouse){this.isUsingMouse=
!0;var a=this.mousewheel.bind(this);ig.system.canvas.addEventListener("mousewheel",a,!1);ig.system.canvas.addEventListener("DOMMouseScroll",a,!1);ig.system.canvas.addEventListener("contextmenu",this.contextmenu.bind(this),!1);ig.system.canvas.addEventListener("mousedown",this.keydown.bind(this),!1);ig.system.canvas.addEventListener("mouseup",this.keyup.bind(this),!1);ig.system.canvas.addEventListener("mousemove",this.mousemove.bind(this),!1);ig.system.canvas.addEventListener("touchstart",this.keydown.bind(this),
!1);ig.system.canvas.addEventListener("touchend",this.keyup.bind(this),!1);ig.system.canvas.addEventListener("touchmove",this.mousemove.bind(this),!1)}},initKeyboard:function(){this.isUsingKeyboard||(this.isUsingKeyboard=!0,window.addEventListener("keydown",this.keydown.bind(this),!1),window.addEventListener("keyup",this.keyup.bind(this),!1))},initAccelerometer:function(){this.isUsingAccelerometer||window.addEventListener("devicemotion",this.devicemotion.bind(this),!1)},mousewheel:function(a){var b=
this.bindings[0<(a.wheelDelta?a.wheelDelta:-1*a.detail)?ig.KEY.MWHEEL_UP:ig.KEY.MWHEEL_DOWN];b&&(this.actions[b]=!0,this.presses[b]=!0,this.delayedKeyup[b]=!0,a.stopPropagation(),a.preventDefault())},mousemove:function(a){for(var b=ig.system.canvas,c=0,f=0;null!=b;)c+=b.offsetLeft,f+=b.offsetTop,b=b.offsetParent;var b=a.pageX,e=a.pageY;a.touches&&(b=a.touches[0].clientX,e=a.touches[0].clientY);this.mouse.x=(b-c)/ig.system.scale;this.mouse.y=(e-f)/ig.system.scale},contextmenu:function(a){this.bindings[ig.KEY.MOUSE2]&&
(a.stopPropagation(),a.preventDefault())},keydown:function(a){if("text"!=a.target.type){var b="keydown"==a.type?a.keyCode:2==a.button?ig.KEY.MOUSE2:ig.KEY.MOUSE1;("touchstart"==a.type||"mousedown"==a.type)&&this.mousemove(a);if(b=this.bindings[b])this.actions[b]=!0,this.locks[b]||(this.presses[b]=!0,this.locks[b]=!0),a.stopPropagation(),a.preventDefault()}},keyup:function(a){if("text"!=a.target.type){var b=this.bindings["keyup"==a.type?a.keyCode:2==a.button?ig.KEY.MOUSE2:ig.KEY.MOUSE1];b&&(this.delayedKeyup[b]=
!0,a.stopPropagation(),a.preventDefault())}},devicemotion:function(a){this.accel=a.accelerationIncludingGravity},bind:function(a,b){0>a?this.initMouse():0<a&&this.initKeyboard();this.bindings[a]=b},bindTouch:function(a,b){var c=ig.$(a),f=this;c.addEventListener("touchstart",function(a){f.touchStart(a,b)},!1);c.addEventListener("touchend",function(a){f.touchEnd(a,b)},!1)},unbind:function(a){this.delayedKeyup[this.bindings[a]]=!0;this.bindings[a]=null},unbindAll:function(){this.bindings={};this.actions=
{};this.presses={};this.locks={};this.delayedKeyup={}},state:function(a){return this.actions[a]},pressed:function(a){return this.presses[a]},released:function(a){return this.delayedKeyup[a]},clearPressed:function(){for(var a in this.delayedKeyup)this.actions[a]=!1,this.locks[a]=!1;this.delayedKeyup={};this.presses={}},touchStart:function(a,b){this.actions[b]=!0;this.presses[b]=!0;a.stopPropagation();a.preventDefault();return!1},touchEnd:function(a,b){this.delayedKeyup[b]=!0;a.stopPropagation();a.preventDefault();
return!1}})});ig.baked=!0;ig.module("impact.impact").requires("dom.ready","impact.loader","impact.system","impact.input","impact.sound").defines(function(){ig.main=function(a,b,c,f,e,j,p){ig.system=new ig.System(a,c,f,e,j||1);ig.input=new ig.Input;ig.soundManager=new ig.SoundManager;ig.music=new ig.Music;ig.ready=!0;(new (p||ig.Loader)(b,ig.resources)).load()}});ig.baked=!0;
ig.module("impact.animation").requires("impact.timer","impact.image").defines(function(){ig.AnimationSheet=ig.Class.extend({width:8,height:8,image:null,init:function(a,b,c){this.width=b;this.height=c;this.image=new ig.Image(a)}});ig.Animation=ig.Class.extend({sheet:null,timer:null,sequence:[],flip:{x:!1,y:!1},pivot:{x:0,y:0},frame:0,tile:0,loopCount:0,alpha:1,angle:0,init:function(a,b,c,f){this.sheet=a;this.pivot={x:a.width/2,y:a.height/2};this.timer=new ig.Timer;this.frameTime=b;this.sequence=c;
this.stop=!!f;this.tile=this.sequence[0]},rewind:function(){this.timer.reset();this.loopCount=0;this.tile=this.sequence[0];return this},gotoFrame:function(a){this.timer.set(this.frameTime*-a);this.update()},gotoRandomFrame:function(){this.gotoFrame(Math.floor(Math.random()*this.sequence.length))},update:function(){var a=Math.floor(this.timer.delta()/this.frameTime);this.loopCount=Math.floor(a/this.sequence.length);this.frame=this.stop&&0<this.loopCount?this.sequence.length-1:a%this.sequence.length;
this.tile=this.sequence[this.frame]},draw:function(a,b){var c=Math.max(this.sheet.width,this.sheet.height);a>ig.system.width||b>ig.system.height||(0>a+c||0>b+c)||(1!=this.alpha&&(ig.system.context.globalAlpha=this.alpha),0==this.angle?this.sheet.image.drawTile(a,b,this.tile,this.sheet.width,this.sheet.height,this.flip.x,this.flip.y):(ig.system.context.save(),ig.system.context.translate(ig.system.getDrawPos(a+this.pivot.x),ig.system.getDrawPos(b+this.pivot.y)),ig.system.context.rotate(this.angle),
this.sheet.image.drawTile(-this.pivot.x,-this.pivot.y,this.tile,this.sheet.width,this.sheet.height,this.flip.x,this.flip.y),ig.system.context.restore()),1!=this.alpha&&(ig.system.context.globalAlpha=1))}})});ig.baked=!0;
ig.module("impact.entity").requires("impact.animation","impact.impact").defines(function(){ig.Entity=ig.Class.extend({id:0,settings:{},size:{x:16,y:16},offset:{x:0,y:0},posMP:{x:0,y:0},posML:{x:0,y:0},enableReposition:!1,pos:{x:0,y:0},last:{x:0,y:0},vel:{x:0,y:0},accel:{x:0,y:0},friction:{x:0,y:0},maxVel:{x:100,y:100},zIndex:0,gravityFactor:1,standing:!1,bounciness:0,minBounceVelocity:40,anims:{},animSheet:null,currentAnim:null,health:10,type:0,checkAgainst:0,collides:0,_killed:!1,slopeStanding:{min:(44).toRad(),
max:(136).toRad()},init:function(a,b,c){this.id=++ig.Entity._lastId;this.pos.x=a;this.pos.y=b;ig.merge(this,c)},addAnim:function(a,b,c,f){if(!this.animSheet)throw"No animSheet to add the animation "+a+" to.";b=new ig.Animation(this.animSheet,b,c,f);this.anims[a]=b;this.currentAnim||(this.currentAnim=b);return b},update:function(){this.last.x=this.pos.x;this.last.y=this.pos.y;this.vel.y+=ig.game.gravity*ig.system.tick*this.gravityFactor;this.vel.x=this.getNewVelocity(this.vel.x,this.accel.x,this.friction.x,
this.maxVel.x);this.vel.y=this.getNewVelocity(this.vel.y,this.accel.y,this.friction.y,this.maxVel.y);var a=ig.game.collisionMap.trace(this.pos.x,this.pos.y,this.vel.x*ig.system.tick,this.vel.y*ig.system.tick,this.size.x,this.size.y);this.handleMovementTrace(a);this.currentAnim&&this.currentAnim.update()},getNewVelocity:function(a,b,c,f){return b?(a+b*ig.system.tick).limit(-f,f):c?(b=c*ig.system.tick,0<a-b?a-b:0>a+b?a+b:0):a.limit(-f,f)},handleMovementTrace:function(a){this.standing=!1;a.collision.y&&
(0<this.bounciness&&Math.abs(this.vel.y)>this.minBounceVelocity?this.vel.y*=-this.bounciness:(0<this.vel.y&&(this.standing=!0),this.vel.y=0));a.collision.x&&(this.vel.x=0<this.bounciness&&Math.abs(this.vel.x)>this.minBounceVelocity?this.vel.x*-this.bounciness:0);if(a.collision.slope){var b=a.collision.slope;if(0<this.bounciness){var c=this.vel.x*b.nx+this.vel.y*b.ny;this.vel.x=(this.vel.x-2*b.nx*c)*this.bounciness;this.vel.y=(this.vel.y-2*b.ny*c)*this.bounciness}else c=(this.vel.x*b.x+this.vel.y*
b.y)/(b.x*b.x+b.y*b.y),this.vel.x=b.x*c,this.vel.y=b.y*c,b=Math.atan2(b.x,b.y),b>this.slopeStanding.min&&b<this.slopeStanding.max&&(this.standing=!0)}this.pos=a.pos},reposition:function(){ig.ua.mobile&&this.enableReposition&&(portraitMode?(this.pos.x=this.posMP.x,this.pos.y=this.posMP.y):(this.pos.x=this.posML.x,this.pos.y=this.posML.y))},draw:function(){this.currentAnim&&this.currentAnim.draw(this.pos.x-this.offset.x-ig.game._rscreen.x,this.pos.y-this.offset.y-ig.game._rscreen.y)},kill:function(){ig.game.removeEntity(this)},
receiveDamage:function(a){this.health-=a;0>=this.health&&this.kill()},touches:function(a){return!(this.pos.x>=a.pos.x+a.size.x||this.pos.x+this.size.x<=a.pos.x||this.pos.y>=a.pos.y+a.size.y||this.pos.y+this.size.y<=a.pos.y)},distanceTo:function(a){var b=this.pos.x+this.size.x/2-(a.pos.x+a.size.x/2);a=this.pos.y+this.size.y/2-(a.pos.y+a.size.y/2);return Math.sqrt(b*b+a*a)},angleTo:function(a){return Math.atan2(a.pos.y+a.size.y/2-(this.pos.y+this.size.y/2),a.pos.x+a.size.x/2-(this.pos.x+this.size.x/
2))},check:function(){},collideWith:function(){},ready:function(){}});ig.Entity._lastId=0;ig.Entity.COLLIDES={NEVER:0,LITE:1,PASSIVE:2,ACTIVE:4,FIXED:8};ig.Entity.TYPE={NONE:0,A:1,B:2,BOTH:3};ig.Entity.checkPair=function(a,b){a.checkAgainst&b.type&&a.check(b);b.checkAgainst&a.type&&b.check(a);a.collides&&b.collides&&a.collides+b.collides>ig.Entity.COLLIDES.ACTIVE&&ig.Entity.solveCollision(a,b)};ig.Entity.solveCollision=function(a,b){var c=null;if(a.collides==ig.Entity.COLLIDES.LITE||b.collides==ig.Entity.COLLIDES.FIXED)c=
a;else if(b.collides==ig.Entity.COLLIDES.LITE||a.collides==ig.Entity.COLLIDES.FIXED)c=b;a.last.x+a.size.x>b.last.x&&a.last.x<b.last.x+b.size.x?(a.last.y<b.last.y?ig.Entity.seperateOnYAxis(a,b,c):ig.Entity.seperateOnYAxis(b,a,c),a.collideWith(b,"y"),b.collideWith(a,"y")):a.last.y+a.size.y>b.last.y&&a.last.y<b.last.y+b.size.y&&(a.last.x<b.last.x?ig.Entity.seperateOnXAxis(a,b,c):ig.Entity.seperateOnXAxis(b,a,c),a.collideWith(b,"x"),b.collideWith(a,"x"))};ig.Entity.seperateOnXAxis=function(a,b,c){var f=
a.pos.x+a.size.x-b.pos.x;c?(c.vel.x=-c.vel.x*c.bounciness+(a===c?b:a).vel.x,b=ig.game.collisionMap.trace(c.pos.x,c.pos.y,c==a?-f:f,0,c.size.x,c.size.y),c.pos.x=b.pos.x):(c=(a.vel.x-b.vel.x)/2,a.vel.x=-c,b.vel.x=c,c=ig.game.collisionMap.trace(a.pos.x,a.pos.y,-f/2,0,a.size.x,a.size.y),a.pos.x=Math.floor(c.pos.x),a=ig.game.collisionMap.trace(b.pos.x,b.pos.y,f/2,0,b.size.x,b.size.y),b.pos.x=Math.ceil(a.pos.x))};ig.Entity.seperateOnYAxis=function(a,b,c){var f=a.pos.y+a.size.y-b.pos.y;if(c){b=a===c?b:a;
c.vel.y=-c.vel.y*c.bounciness+b.vel.y;var e=0;c==a&&Math.abs(c.vel.y-b.vel.y)<c.minBounceVelocity&&(c.standing=!0,e=b.vel.x*ig.system.tick);a=ig.game.collisionMap.trace(c.pos.x,c.pos.y,e,c==a?-f:f,c.size.x,c.size.y);c.pos.y=a.pos.y;c.pos.x=a.pos.x}else ig.game.gravity&&(b.standing||0<a.vel.y)?(c=ig.game.collisionMap.trace(a.pos.x,a.pos.y,0,-(a.pos.y+a.size.y-b.pos.y),a.size.x,a.size.y),a.pos.y=c.pos.y,0<a.bounciness&&a.vel.y>a.minBounceVelocity?a.vel.y*=-a.bounciness:(a.standing=!0,a.vel.y=0)):(c=
(a.vel.y-b.vel.y)/2,a.vel.y=-c,b.vel.y=c,e=b.vel.x*ig.system.tick,c=ig.game.collisionMap.trace(a.pos.x,a.pos.y,e,-f/2,a.size.x,a.size.y),a.pos.y=c.pos.y,a=ig.game.collisionMap.trace(b.pos.x,b.pos.y,0,f/2,b.size.x,b.size.y),b.pos.y=a.pos.y)}});ig.baked=!0;
ig.module("impact.map").defines(function(){ig.Map=ig.Class.extend({tilesize:8,width:1,height:1,data:[[]],name:null,init:function(a,b){this.tilesize=a;this.data=b;this.height=b.length;this.width=b[0].length},getTile:function(a,b){var c=Math.floor(a/this.tilesize),f=Math.floor(b/this.tilesize);return 0<=c&&c<this.width&&0<=f&&f<this.height?this.data[f][c]:0},setTile:function(a,b,c){a=Math.floor(a/this.tilesize);b=Math.floor(b/this.tilesize);0<=a&&a<this.width&&0<=b&&b<this.height&&(this.data[b][a]=
c)}})});ig.baked=!0;
ig.module("impact.collision-map").requires("impact.map").defines(function(){ig.CollisionMap=ig.Map.extend({lastSlope:1,tiledef:null,init:function(a,b,e){this.parent(a,b);this.tiledef=e||ig.CollisionMap.defaultTileDef;for(var j in this.tiledef)j|0>this.lastSlope&&(this.lastSlope=j|0)},trace:function(a,b,e,j,p,q){var m={collision:{x:!1,y:!1,slope:!1},pos:{x:a,y:b},tile:{x:0,y:0}},t=Math.ceil(Math.max(Math.abs(e),Math.abs(j))/this.tilesize);if(1<t)for(var u=e/t,s=j/t,r=0;r<t&&(u||s)&&!(this._traceStep(m,
a,b,u,s,p,q,e,j,r),a=m.pos.x,b=m.pos.y,m.collision.x&&(e=u=0),m.collision.y&&(j=s=0),m.collision.slope);r++);else this._traceStep(m,a,b,e,j,p,q,e,j,0);return m},_traceStep:function(a,b,e,j,p,q,m,t,u,s){a.pos.x+=j;a.pos.y+=p;var r=0;if(j){var A=0<j?q:0,L=0>j?this.tilesize:0,r=Math.max(Math.floor(e/this.tilesize),0),I=Math.min(Math.ceil((e+m)/this.tilesize),this.height);j=Math.floor((a.pos.x+A)/this.tilesize);var F=Math.floor((b+A)/this.tilesize);if(0<s||j==F||0>F||F>=this.width)F=-1;if(0<=j&&j<this.width)for(var z=
r;z<I&&!(-1!=F&&(r=this.data[z][F],1<r&&r<=this.lastSlope&&this._checkTileDef(a,r,b,e,t,u,q,m,F,z)));z++)if(r=this.data[z][j],1==r||r>this.lastSlope||1<r&&this._checkTileDef(a,r,b,e,t,u,q,m,j,z)){if(1<r&&r<=this.lastSlope&&a.collision.slope)break;a.collision.x=!0;a.tile.x=r;b=a.pos.x=j*this.tilesize-A+L;t=0;break}}if(p){A=0<p?m:0;p=0>p?this.tilesize:0;r=Math.max(Math.floor(a.pos.x/this.tilesize),0);L=Math.min(Math.ceil((a.pos.x+q)/this.tilesize),this.width);z=Math.floor((a.pos.y+A)/this.tilesize);
I=Math.floor((e+A)/this.tilesize);if(0<s||z==I||0>I||I>=this.height)I=-1;if(0<=z&&z<this.height)for(j=r;j<L&&!(-1!=I&&(r=this.data[I][j],1<r&&r<=this.lastSlope&&this._checkTileDef(a,r,b,e,t,u,q,m,j,I)));j++)if(r=this.data[z][j],1==r||r>this.lastSlope||1<r&&this._checkTileDef(a,r,b,e,t,u,q,m,j,z)){if(1<r&&r<=this.lastSlope&&a.collision.slope)break;a.collision.y=!0;a.tile.y=r;a.pos.y=z*this.tilesize-A+p;break}}},_checkTileDef:function(a,b,e,j,p,q,m,t,u,s){var r=this.tiledef[b];if(!r)return!1;b=(r[2]-
r[0])*this.tilesize;var A=(r[3]-r[1])*this.tilesize,L=r[4];m=e+p+(0>A?m:0)-(u+r[0])*this.tilesize;t=j+q+(0<b?t:0)-(s+r[1])*this.tilesize;if(0<b*t-A*m){if(0>p*-A+q*b)return L;u=Math.sqrt(b*b+A*A);s=A/u;u=-b/u;var I=m*s+t*u,r=s*I,I=u*I;if(r*r+I*I>=p*p+q*q)return L||0.5>b*(t-q)-A*(m-p);a.pos.x=e+p-r;a.pos.y=j+q-I;a.collision.slope={x:b,y:A,nx:s,ny:u};return!0}return!1}});var a=1/3,b=2/3;ig.CollisionMap.defaultTileDef={5:[0,1,1,b,!0],6:[0,b,1,a,!0],7:[0,a,1,0,!0],3:[0,1,1,0.5,!0],4:[0,0.5,1,0,!0],2:[0,
1,1,0,!0],10:[0.5,1,1,0,!0],21:[0,1,0.5,0,!0],32:[b,1,1,0,!0],43:[a,1,b,0,!0],54:[0,1,a,0,!0],27:[0,0,1,a,!0],28:[0,a,1,b,!0],29:[0,b,1,1,!0],25:[0,0,1,0.5,!0],26:[0,0.5,1,1,!0],24:[0,0,1,1,!0],11:[0,0,0.5,1,!0],22:[0.5,0,1,1,!0],33:[0,0,a,1,!0],44:[a,0,b,1,!0],55:[b,0,1,1,!0],16:[1,a,0,0,!0],17:[1,b,0,a,!0],18:[1,1,0,b,!0],14:[1,0.5,0,0,!0],15:[1,1,0,0.5,!0],13:[1,1,0,0,!0],8:[0.5,1,0,0,!0],19:[1,1,0.5,0,!0],30:[a,1,0,0,!0],41:[b,1,a,0,!0],52:[1,1,b,0,!0],38:[1,b,0,1,!0],39:[1,a,0,b,!0],40:[1,0,
0,a,!0],36:[1,0.5,0,1,!0],37:[1,0,0,0.5,!0],35:[1,0,0,1,!0],9:[1,0,0.5,1,!0],20:[0.5,0,0,1,!0],31:[1,0,b,1,!0],42:[b,0,a,1,!0],53:[a,0,0,1,!0],12:[0,0,1,0,!1],23:[1,1,0,1,!1],34:[1,0,1,1,!1],45:[0,1,0,0,!1]};ig.CollisionMap.staticNoCollision={trace:function(a,b,e,j){return{collision:{x:!1,y:!1,slope:!1},pos:{x:a+e,y:b+j},tile:{x:0,y:0}}}}});ig.baked=!0;
ig.module("impact.background-map").requires("impact.map","impact.image").defines(function(){ig.BackgroundMap=ig.Map.extend({tiles:null,scroll:{x:0,y:0},distance:1,repeat:!1,tilesetName:"",foreground:!1,enabled:!0,preRender:!1,preRenderedChunks:null,chunkSize:512,debugChunks:!1,anims:{},init:function(a,b,c){this.parent(a,b);this.setTileset(c)},setTileset:function(a){this.tilesetName=a instanceof ig.Image?a.path:a;this.tiles=new ig.Image(this.tilesetName);this.preRenderedChunks=null},setScreenPos:function(a,
b){this.scroll.x=a/this.distance;this.scroll.y=b/this.distance},preRenderMapToChunks:function(){var a=this.width*this.tilesize*ig.system.scale,b=this.height*this.tilesize*ig.system.scale,c=Math.ceil(a/this.chunkSize),f=Math.ceil(b/this.chunkSize);this.preRenderedChunks=[];for(var e=0;e<f;e++){this.preRenderedChunks[e]=[];for(var j=0;j<c;j++)this.preRenderedChunks[e][j]=this.preRenderChunk(j,e,j==c-1?a-j*this.chunkSize:this.chunkSize,e==f-1?b-e*this.chunkSize:this.chunkSize)}},preRenderChunk:function(a,
b,c,f){var e=c/this.tilesize/ig.system.scale+1,j=f/this.tilesize/ig.system.scale+1,p=a*this.chunkSize/ig.system.scale%this.tilesize,q=b*this.chunkSize/ig.system.scale%this.tilesize;a=Math.floor(a*this.chunkSize/this.tilesize/ig.system.scale);b=Math.floor(b*this.chunkSize/this.tilesize/ig.system.scale);var m=ig.$new("canvas");m.width=c;m.height=f;c=ig.system.context;ig.system.context=m.getContext("2d");for(f=0;f<e;f++)for(var t=0;t<j;t++)if(f+a<this.width&&t+b<this.height){var u=this.data[t+b][f+a];
u&&this.tiles.drawTile(f*this.tilesize-p,t*this.tilesize-q,u-1,this.tilesize)}ig.system.context=c;return m},draw:function(){this.tiles.loaded&&this.enabled&&(this.preRender?this.drawPreRendered():this.drawTiled())},drawPreRendered:function(){this.preRenderedChunks||this.preRenderMapToChunks();var a=ig.system.getDrawPos(this.scroll.x),b=ig.system.getDrawPos(this.scroll.y);this.repeat&&(a%=this.width*this.tilesize*ig.system.scale,b%=this.height*this.tilesize*ig.system.scale);var c=Math.max(Math.floor(a/
this.chunkSize),0),f=Math.max(Math.floor(b/this.chunkSize),0),e=Math.ceil((a+ig.system.realWidth)/this.chunkSize),j=Math.ceil((b+ig.system.realHeight)/this.chunkSize),p=this.preRenderedChunks[0].length,q=this.preRenderedChunks.length;this.repeat||(e=Math.min(e,p),j=Math.min(j,q));for(var m=0;f<j;f++){for(var t=0,u=c;u<e;u++){var s=this.preRenderedChunks[f%q][u%p],r=-a+u*this.chunkSize-t,A=-b+f*this.chunkSize-m;ig.system.context.drawImage(s,r,A);ig.Image.drawCount++;this.debugChunks&&(ig.system.context.strokeStyle=
"#f0f",ig.system.context.strokeRect(r,A,this.chunkSize,this.chunkSize));this.repeat&&s.width<this.chunkSize&&r+s.width<ig.system.realWidth&&(t=this.chunkSize-s.width,e++)}this.repeat&&s.height<this.chunkSize&&A+s.height<ig.system.realHeight&&(m=this.chunkSize-s.height,j++)}},drawTiled:function(){for(var a=0,b=null,c=(this.scroll.x/this.tilesize).toInt(),f=(this.scroll.y/this.tilesize).toInt(),e=this.scroll.x%this.tilesize,j=this.scroll.y%this.tilesize,p=-e-this.tilesize,e=ig.system.width+this.tilesize-
e,q=ig.system.height+this.tilesize-j,m=-1,j=-j-this.tilesize;j<q;m++,j+=this.tilesize){var t=m+f;if(t>=this.height||0>t){if(!this.repeat)continue;t=0<t?t%this.height:(t+1)%this.height+this.height-1}for(var u=-1,s=p;s<e;u++,s+=this.tilesize){a=u+c;if(a>=this.width||0>a){if(!this.repeat)continue;a=0<a?a%this.width:(a+1)%this.width+this.width-1}if(a=this.data[t][a])(b=this.anims[a-1])?b.draw(s,j):this.tiles.drawTile(s,j,a-1,this.tilesize)}}}})});ig.baked=!0;
ig.module("impact.game").requires("impact.impact","impact.entity","impact.collision-map","impact.background-map").defines(function(){ig.Game=ig.Class.extend({clearColor:"#000000",gravity:0,screen:{x:0,y:0},_rscreen:{x:0,y:0},entities:[],namedEntities:{},collisionMap:ig.CollisionMap.staticNoCollision,backgroundMaps:[],backgroundAnims:{},autoSort:!1,sortBy:null,cellSize:64,_deferredKill:[],_levelToLoad:null,_doSortEntities:!1,staticInstantiate:function(){this.sortBy=this.sortBy||ig.Game.SORT.Z_INDEX;
ig.game=this;return null},loadLevelWithoutEntities:function(a){this.screen={x:0,y:0};this.collisionMap=ig.CollisionMap.staticNoCollision;this.backgroundMaps=[];for(var b=0;b<a.layer.length;b++){var c=a.layer[b];if("collision"==c.name)this.collisionMap=new ig.CollisionMap(c.tilesize,c.data);else{var f=new ig.BackgroundMap(c.tilesize,c.data,c.tilesetName);f.anims=this.backgroundAnims[c.tilesetName]||{};f.repeat=c.repeat;f.distance=c.distance;f.foreground=!!c.foreground;f.preRender=!!c.preRender;f.name=
c.name;this.backgroundMaps.push(f)}}},loadLevel:function(a){this.screen={x:0,y:0};this.entities=[];this.namedEntities={};for(var b=0;b<a.entities.length;b++){var c=a.entities[b];this.spawnEntity(c.type,c.x,c.y,c.settings)}this.sortEntities();this.collisionMap=ig.CollisionMap.staticNoCollision;this.backgroundMaps=[];for(b=0;b<a.layer.length;b++)if(c=a.layer[b],"collision"==c.name)this.collisionMap=new ig.CollisionMap(c.tilesize,c.data);else{var f=new ig.BackgroundMap(c.tilesize,c.data,c.tilesetName);
f.anims=this.backgroundAnims[c.tilesetName]||{};f.repeat=c.repeat;f.distance=c.distance;f.foreground=!!c.foreground;f.preRender=!!c.preRender;f.name=c.name;this.backgroundMaps.push(f)}for(b=0;b<this.entities.length;b++)this.entities[b].ready()},loadLevelDeferred:function(a){this._levelToLoad=a},getMapByName:function(a){if("collision"==a)return this.collisionMap;for(var b=0;b<this.backgroundMaps.length;b++)if(this.backgroundMaps[b].name==a)return this.backgroundMaps[b];return null},getEntityByName:function(a){return this.namedEntities[a]},
getEntitiesByType:function(a){a="string"===typeof a?ig.global[a]:a;for(var b=[],c=0;c<this.entities.length;c++){var f=this.entities[c];f instanceof a&&!f._killed&&b.push(f)}return b},spawnEntity:function(a,b,c,f){var e="string"===typeof a?ig.global[a]:a;if(!e)throw"Can't spawn entity of type "+a;a=new e(b,c,f||{});this.entities.push(a);a.name&&(this.namedEntities[a.name]=a);return a},sortEntities:function(){this.entities.sort(this.sortBy)},sortEntitiesDeferred:function(){this._doSortEntities=!0},
removeEntity:function(a){a.name&&delete this.namedEntities[a.name];a._killed=!0;a.type=ig.Entity.TYPE.NONE;a.checkAgainst=ig.Entity.TYPE.NONE;a.collides=ig.Entity.COLLIDES.NEVER;this._deferredKill.push(a)},run:function(){this.update();this.draw()},update:function(){this._levelToLoad&&(this.loadLevel(this._levelToLoad),this._levelToLoad=null);if(this._doSortEntities||this.autoSort)this.sortEntities(),this._doSortEntities=!1;this.updateEntities();this.checkEntities();for(var a=0;a<this._deferredKill.length;a++)this.entities.erase(this._deferredKill[a]);
this._deferredKill=[];for(var b in this.backgroundAnims){var a=this.backgroundAnims[b],c;for(c in a)a[c].update()}},updateEntities:function(){for(var a=0;a<this.entities.length;a++){var b=this.entities[a];b._killed||b.update()}},draw:function(){this.clearColor&&ig.system.clear(this.clearColor);this._rscreen.x=ig.system.getDrawPos(this.screen.x)/ig.system.scale;this._rscreen.y=ig.system.getDrawPos(this.screen.y)/ig.system.scale;var a;for(a=0;a<this.backgroundMaps.length;a++){var b=this.backgroundMaps[a];
if(b.foreground)break;b.setScreenPos(this.screen.x,this.screen.y);b.draw()}this.drawEntities();for(a;a<this.backgroundMaps.length;a++)b=this.backgroundMaps[a],b.setScreenPos(this.screen.x,this.screen.y),b.draw()},drawEntities:function(){for(var a=0;a<this.entities.length;a++)this.entities[a].draw()},checkEntities:function(){for(var a={},b=0;b<this.entities.length;b++){var c=this.entities[b];if(!(c.type==ig.Entity.TYPE.NONE&&c.checkAgainst==ig.Entity.TYPE.NONE&&c.collides==ig.Entity.COLLIDES.NEVER))for(var f=
{},e=Math.floor(c.pos.y/this.cellSize),j=Math.floor((c.pos.x+c.size.x)/this.cellSize)+1,p=Math.floor((c.pos.y+c.size.y)/this.cellSize)+1,q=Math.floor(c.pos.x/this.cellSize);q<j;q++)for(var m=e;m<p;m++)if(a[q])if(a[q][m]){for(var t=a[q][m],u=0;u<t.length;u++)c.touches(t[u])&&!f[t[u].id]&&(f[t[u].id]=!0,ig.Entity.checkPair(c,t[u]));t.push(c)}else a[q][m]=[c];else a[q]={},a[q][m]=[c]}}});ig.Game.SORT={Z_INDEX:function(a,b){return a.zIndex-b.zIndex},POS_X:function(a,b){return a.pos.x+a.size.x-(b.pos.x+
b.size.x)},POS_Y:function(a,b){return a.pos.y+a.size.y-(b.pos.y+b.size.y)}}});ig.baked=!0;
ig.module("impact.debug.menu").requires("dom.ready","impact.system").defines(function(){ig.System.inject({run:function(){ig.debug.beforeRun();this.parent();ig.debug.afterRun()},setGameNow:function(a){this.parent(a);ig.debug.ready()}});ig.Debug=ig.Class.extend({options:{},panels:{},numbers:{},container:null,panelMenu:null,activePanel:null,debugTime:0,debugTickAvg:0.016,debugRealTime:Date.now(),init:function(){this.container=ig.$new("div");this.container.className="ig_debug";ig.$("body")[0].appendChild(this.container);
this.panelMenu=ig.$new("div");this.panelMenu.innerHTML='<div class="ig_debug_head">Impact.Debug:</div>';this.panelMenu.className="ig_debug_panel_menu";this.container.appendChild(this.panelMenu);this.numberContainer=ig.$new("div");this.numberContainer.className="ig_debug_stats";this.panelMenu.appendChild(this.numberContainer);window.console&&window.console.log&&window.console.assert&&(ig.log=console.log.bind?console.log.bind(console):console.log,ig.assert=console.assert.bind?console.assert.bind(console):
console.assert);ig.show=this.showNumber.bind(this)},addNumber:function(a){var b=ig.$new("span");this.numberContainer.appendChild(b);this.numberContainer.appendChild(document.createTextNode(a));this.numbers[a]=b},showNumber:function(a,b,c){this.numbers[a]||this.addNumber(a,c);this.numbers[a].textContent=b},addPanel:function(a){var b=new a.type(a.name,a.label);if(a.options)for(var c=0;c<a.options.length;c++){var f=a.options[c];b.addOption(new ig.DebugOption(f.name,f.object,f.property))}this.panels[b.name]=
b;b.container.style.display="none";this.container.appendChild(b.container);a=ig.$new("div");a.className="ig_debug_menu_item";a.textContent=b.label;a.addEventListener("click",function(){this.togglePanel(b)}.bind(this),!1);b.menuItem=a;f=!1;for(c=1;c<this.panelMenu.childNodes.length;c++){var e=this.panelMenu.childNodes[c];if(e.textContent>b.label){this.panelMenu.insertBefore(a,e);f=!0;break}}f||this.panelMenu.appendChild(a)},showPanel:function(a){this.togglePanel(this.panels[a])},togglePanel:function(a){a!=
this.activePanel&&this.activePanel&&(this.activePanel.toggle(!1),this.activePanel.menuItem.className="ig_debug_menu_item",this.activePanel=null);var b="block"!=a.container.style.display;a.toggle(b);a.menuItem.className="ig_debug_menu_item"+(b?" active":"");b&&(this.activePanel=a)},ready:function(){for(var a in this.panels)this.panels[a].ready()},beforeRun:function(){var a=Date.now();this.debugTickAvg=0.8*this.debugTickAvg+0.2*(a-this.debugRealTime);this.debugRealTime=a;this.activePanel&&this.activePanel.beforeRun()},
afterRun:function(){var a=Date.now()-this.debugRealTime;this.debugTime=0.8*this.debugTime+0.2*a;this.activePanel&&this.activePanel.afterRun();this.showNumber("ms",this.debugTime.toFixed(2));this.showNumber("fps",Math.round(1E3/this.debugTickAvg));this.showNumber("draws",ig.Image.drawCount);ig.game&&ig.game.entities&&this.showNumber("entities",ig.game.entities.length);ig.Image.drawCount=0}});ig.DebugPanel=ig.Class.extend({active:!1,container:null,options:[],panels:[],label:"",name:"",init:function(a,
b){this.name=a;this.label=b;this.container=ig.$new("div");this.container.className="ig_debug_panel "+this.name},toggle:function(a){this.active=a;this.container.style.display=a?"block":"none"},addPanel:function(a){this.panels.push(a);this.container.appendChild(a.container)},addOption:function(a){this.options.push(a);this.container.appendChild(a.container)},ready:function(){},beforeRun:function(){},afterRun:function(){}});ig.DebugOption=ig.Class.extend({name:"",labelName:"",className:"ig_debug_option",
label:null,mark:null,container:null,active:!1,colors:{enabled:"#fff",disabled:"#444"},init:function(a,b,c){this.name=a;this.object=b;this.property=c;this.active=this.object[this.property];this.container=ig.$new("div");this.container.className="ig_debug_option";this.label=ig.$new("span");this.label.className="ig_debug_label";this.label.textContent=this.name;this.mark=ig.$new("span");this.mark.className="ig_debug_label_mark";this.container.appendChild(this.mark);this.container.appendChild(this.label);
this.container.addEventListener("click",this.click.bind(this),!1);this.setLabel()},setLabel:function(){this.mark.style.backgroundColor=this.active?this.colors.enabled:this.colors.disabled},click:function(a){this.active=!this.active;this.object[this.property]=this.active;this.setLabel();a.stopPropagation();a.preventDefault();return!1}});ig.debug=new ig.Debug});ig.baked=!0;
ig.module("impact.debug.entities-panel").requires("impact.debug.menu","impact.entity").defines(function(){ig.Entity.inject({colors:{names:"#fff",velocities:"#0f0",boxes:"#f00"},draw:function(){this.parent();ig.Entity._debugShowBoxes&&(ig.system.context.strokeStyle=this.colors.boxes,ig.system.context.lineWidth=1,ig.system.context.strokeRect(ig.system.getDrawPos(this.pos.x.round()-ig.game.screen.x)-0.5,ig.system.getDrawPos(this.pos.y.round()-ig.game.screen.y)-0.5,this.size.x*ig.system.scale,this.size.y*
ig.system.scale));if(ig.Entity._debugShowVelocities){var a=this.pos.x+this.size.x/2,b=this.pos.y+this.size.y/2;this._debugDrawLine(this.colors.velocities,a,b,a+this.vel.x,b+this.vel.y)}if(ig.Entity._debugShowNames&&(this.name&&(ig.system.context.fillStyle=this.colors.names,ig.system.context.fillText(this.name,ig.system.getDrawPos(this.pos.x-ig.game.screen.x),ig.system.getDrawPos(this.pos.y-ig.game.screen.y))),"object"==typeof this.target))for(var c in this.target)(a=ig.game.getEntityByName(this.target[c]))&&
this._debugDrawLine(this.colors.names,this.pos.x+this.size.x/2,this.pos.y+this.size.y/2,a.pos.x+a.size.x/2,a.pos.y+a.size.y/2)},_debugDrawLine:function(a,b,c,f,e){ig.system.context.strokeStyle=a;ig.system.context.lineWidth=1;ig.system.context.beginPath();ig.system.context.moveTo(ig.system.getDrawPos(b-ig.game.screen.x),ig.system.getDrawPos(c-ig.game.screen.y));ig.system.context.lineTo(ig.system.getDrawPos(f-ig.game.screen.x),ig.system.getDrawPos(e-ig.game.screen.y));ig.system.context.stroke();ig.system.context.closePath()}});
ig.Entity._debugEnableChecks=!0;ig.Entity._debugShowBoxes=!1;ig.Entity._debugShowVelocities=!1;ig.Entity._debugShowNames=!1;ig.Entity.oldCheckPair=ig.Entity.checkPair;ig.Entity.checkPair=function(a,b){ig.Entity._debugEnableChecks&&ig.Entity.oldCheckPair(a,b)};ig.debug.addPanel({type:ig.DebugPanel,name:"entities",label:"Entities",options:[{name:"Checks & Collisions",object:ig.Entity,property:"_debugEnableChecks"},{name:"Show Collision Boxes",object:ig.Entity,property:"_debugShowBoxes"},{name:"Show Velocities",
object:ig.Entity,property:"_debugShowVelocities"},{name:"Show Names & Targets",object:ig.Entity,property:"_debugShowNames"}]})});ig.baked=!0;
ig.module("impact.debug.maps-panel").requires("impact.debug.menu","impact.game","impact.background-map").defines(function(){ig.Game.inject({loadLevel:function(a){this.parent(a);ig.debug.panels.maps.load(this)}});ig.DebugMapsPanel=ig.DebugPanel.extend({maps:[],mapScreens:[],init:function(a,b){this.parent(a,b);this.load()},load:function(a){this.options=[];this.panels=[];if(!a||!a.backgroundMaps.length)this.container.innerHTML="<em>No Maps Loaded</em>";else{this.maps=a.backgroundMaps;this.mapScreens=
[];this.container.innerHTML="";for(a=0;a<this.maps.length;a++){var b=this.maps[a],c=new ig.DebugPanel(a,"Layer "+a),f=new ig.$new("strong");f.textContent=a+": "+b.tiles.path;c.container.appendChild(f);c.addOption(new ig.DebugOption("Enabled",b,"enabled"));c.addOption(new ig.DebugOption("Pre Rendered",b,"preRender"));c.addOption(new ig.DebugOption("Show Chunks",b,"debugChunks"));this.generateMiniMap(c,b,a);this.addPanel(c)}}},generateMiniMap:function(a,b,c){var f=ig.system.scale,e=ig.$new("canvas"),
j=e.getContext("2d"),p=b.tiles.width*f,q=b.tiles.height*f,m=p/b.tilesize;j.drawImage(b.tiles.data,0,0,p,q,0,0,m,q/b.tilesize);j=ig.$new("canvas");j.width=b.width*f;j.height=b.height*f;var t=j.getContext("2d");ig.game.clearColor&&(t.fillStyle=ig.game.clearColor,t.fillRect(0,0,p,q));for(q=p=0;q<b.width;q++)for(var u=0;u<b.height;u++)(p=b.data[u][q])&&t.drawImage(e,Math.floor((p-1)*f%m),Math.floor((p-1)*f/m)*f,f,f,q*f,u*f,f,f);e=ig.$new("div");e.className="ig_debug_map_container";e.style.width=b.width*
f+"px";e.style.height=b.height*f+"px";m=ig.$new("div");m.className="ig_debug_map_screen";m.style.width=ig.system.width/b.tilesize*f-2+"px";m.style.height=ig.system.height/b.tilesize*f-2+"px";this.mapScreens[c]=m;e.appendChild(j);e.appendChild(m);a.container.appendChild(e)},afterRun:function(){for(var a=ig.system.scale,b=0;b<this.maps.length;b++){var c=this.maps[b],f=this.mapScreens[b];if(c&&f){var e=c.scroll.x/c.tilesize,j=c.scroll.y/c.tilesize;c.repeat&&(e%=c.width,j%=c.height);f.style.left=e*a+
"px";f.style.top=j*a+"px"}}}});ig.debug.addPanel({type:ig.DebugMapsPanel,name:"maps",label:"Background Maps"})});ig.baked=!0;
ig.module("impact.debug.graph-panel").requires("impact.debug.menu","impact.system","impact.game","impact.image").defines(function(){ig.Game.inject({draw:function(){ig.graph.beginClock("draw");this.parent();ig.graph.endClock("draw")},update:function(){ig.graph.beginClock("update");this.parent();ig.graph.endClock("update")},checkEntities:function(){ig.graph.beginClock("checks");this.parent();ig.graph.endClock("checks")}});ig.DebugGraphPanel=ig.DebugPanel.extend({clocks:{},marks:[],textY:0,height:128,
ms:64,timeBeforeRun:0,init:function(a,b){this.parent(a,b);this.mark16ms=(this.height-16*(this.height/this.ms)).round();this.mark33ms=(this.height-33*(this.height/this.ms)).round();this.msHeight=this.height/this.ms;this.graph=ig.$new("canvas");this.graph.width=window.innerWidth;this.graph.height=this.height;this.container.appendChild(this.graph);this.ctx=this.graph.getContext("2d");this.ctx.fillStyle="#444";this.ctx.fillRect(0,this.mark16ms,this.graph.width,1);this.ctx.fillRect(0,this.mark33ms,this.graph.width,
1);this.addGraphMark("16ms",this.mark16ms);this.addGraphMark("33ms",this.mark33ms);this.addClock("draw","Draw","#13baff");this.addClock("update","Entity Update","#bb0fff");this.addClock("checks","Entity Checks & Collisions","#a2e908");this.addClock("lag","System Lag","#f26900");ig.mark=this.mark.bind(this);ig.graph=this},addGraphMark:function(a,b){var c=ig.$new("span");c.className="ig_debug_graph_mark";c.textContent=a;c.style.top=b.round()+"px";this.container.appendChild(c)},addClock:function(a,b,
c){var f=ig.$new("span");f.className="ig_debug_legend_color";f.style.backgroundColor=c;var e=ig.$new("span");e.className="ig_debug_legend_number";e.appendChild(document.createTextNode("0"));var j=ig.$new("span");j.className="ig_debug_legend";j.appendChild(f);j.appendChild(document.createTextNode(b+" ("));j.appendChild(e);j.appendChild(document.createTextNode("ms)"));this.container.appendChild(j);this.clocks[a]={description:b,color:c,current:0,start:Date.now(),avg:0,html:e}},beginClock:function(a,
b){this.clocks[a].start=Date.now()+(b||0)},endClock:function(a){a=this.clocks[a];a.current=Math.round(Date.now()-a.start);a.avg=0.8*a.avg+0.2*a.current},mark:function(a,b){this.active&&this.marks.push({msg:a,color:b||"#fff"})},beforeRun:function(){this.endClock("lag");this.timeBeforeRun=Date.now()},afterRun:function(){var a=Date.now()-this.timeBeforeRun;this.beginClock("lag",Math.max(1E3/ig.system.fps-a,0));var a=this.graph.width-1,b=this.height;this.ctx.drawImage(this.graph,-1,0);this.ctx.fillStyle=
"#000";this.ctx.fillRect(a,0,1,this.height);this.ctx.fillStyle="#444";this.ctx.fillRect(a,this.mark16ms,1,1);this.ctx.fillStyle="#444";this.ctx.fillRect(a,this.mark33ms,1,1);for(var c in this.clocks){var f=this.clocks[c];f.html.textContent=f.avg.toFixed(2);if(f.color&&0<f.current){this.ctx.fillStyle=f.color;var e=f.current*this.msHeight,b=b-e;this.ctx.fillRect(a,b,1,e);f.current=0}}this.ctx.textAlign="right";this.ctx.textBaseline="top";this.ctx.globalAlpha=0.5;for(c=0;c<this.marks.length;c++)b=this.marks[c],
this.ctx.fillStyle=b.color,this.ctx.fillRect(a,0,1,this.height),b.msg&&(this.ctx.fillText(b.msg,a-1,this.textY),this.textY=(this.textY+8)%32);this.ctx.globalAlpha=1;this.marks=[]}});ig.debug.addPanel({type:ig.DebugGraphPanel,name:"graph",label:"Performance"})});ig.baked=!0;ig.module("impact.debug.debug").requires("impact.debug.entities-panel","impact.debug.maps-panel","impact.debug.graph-panel").defines(function(){});ig.baked=!0;
ig.module("plugins.splash-loader").requires("impact.loader","impact.animation").defines(function(){ig.SplashLoader=ig.Loader.extend({splashDesktop:new ig.Image("media/graphics/splash/desktop/cover.jpg"),splashMobile:new ig.Image("media/graphics/splash/mobile/cover.jpg"),init:function(a,b){this.parent(a,b);ig.ua.mobile&&_SETTINGS.Ad.Mobile.Preroll.Enabled&&MobileAdInGamePreroll.Initialize()},end:function(){this.parent();var a=0<=document.URL.indexOf("localhost")?500:3E3;window.setTimeout("ig.system.setGame(MyGame)",
a)},setupCustomAnimation:function(){this.customAnim=new ig.Animation(this.customAnim,0.05,[0,1,2,3,4,5]);this.customAnim.currentFrame=0;ig.loadingScreen=this;ig.loadingScreen.animationTimer=window.setInterval("ig.loadingScreen.animate()",100)},animate:function(){this.customAnim.currentFrame<this.customAnim.sequence.length?this.customAnim.currentFrame++:this.customAnim.currentFrame=0;this.customAnim.gotoFrame(this.customAnim.currentFrame)},draw:function(){this._drawStatus+=(this.status-this._drawStatus)/
5;ig.system.context.fillStyle="#000";ig.system.context.fillRect(0,0,ig.system.width,ig.system.height);var a=ig.system.scale,b,c,f,e;ig.ua.mobile?(b=180,c=24,f=0.5*ig.system.width-b/2,e=320,this.splashMobile.draw(0,0)):(b=250,c=30,f=0.5*ig.system.width-b/2,e=280,this.splashDesktop.draw(0,0));ig.system.context.fillStyle="#fff";ig.system.context.fillRect(f*a,e*a,b*a,c*a);ig.system.context.fillStyle="#000";ig.system.context.fillRect(f*a+a,e*a+a,b*a-a-a,c*a-a-a);ig.system.context.fillStyle="#A00A2D";ig.system.context.fillRect(f*
a,e*a,b*a*this._drawStatus,c*a);ig.system.context.fillStyle="#ffffff";ig.system.context.font="16px Arial";b=_STRINGS.Splash.Loading;c=ig.system.width/2-ig.system.context.measureText(b).width/2;ig.system.context.fillText(b,c,e*a+18);ig.system.context.font="bold 14px Arial";ig.system.context.fillStyle="#000000";b=_STRINGS.Splash.LogoLine1;ig.ua.mobile?(c=ig.system.width/2-ig.system.context.measureText(b).width/2,a=380):(c=ig.system.width/2-ig.system.context.measureText(b).width/2,a=325);ig.system.context.font=
"bold 12px Arial";ig.system.context.fillText(b,c,a);b=_STRINGS.Splash.LogoLine2;ig.ua.mobile?(c=ig.system.width/2-ig.system.context.measureText(b).width/2,a=395):(c=ig.system.width/2-ig.system.context.measureText(b).width/2,a=340);ig.system.context.font="bold 12px Arial";ig.system.context.fillText(b,c,a)}})});ig.baked=!0;
ig.module("plugins.tween").requires("impact.entity").defines(function(){Array.prototype.indexOf||(Array.prototype.indexOf=function(a){for(var b=0;b<this.length;++b)if(this[b]===a)return b;return-1});ig.Entity.prototype.tweens=[];ig.Entity.prototype._preTweenUpdate=ig.Entity.prototype.update;ig.Entity.prototype.update=function(){this._preTweenUpdate();if(0<this.tweens.length){for(var a=[],b=0;b<this.tweens.length;b++)this.tweens[b].update(),this.tweens[b].complete||a.push(this.tweens[b]);this.tweens=
a}};ig.Entity.prototype.tween=function(a,b,c){a=new ig.Tween(this,a,b,c);this.tweens.push(a);return a};ig.Entity.prototype.pauseTweens=function(){for(var a=0;a<this.tweens.length;a++)this.tweens[a].pause()};ig.Entity.prototype.resumeTweens=function(){for(var a=0;a<this.tweens.length;a++)this.tweens[a].resume()};ig.Entity.prototype.stopTweens=function(a){for(var b=0;b<this.tweens.length;b++)this.tweens[b].stop(a)};ig.Tween=function(a,b,c,f){var e={},j={},p={},q=0,m=!1,t=!1,u=!1;this.duration=c;this.paused=
this.complete=!1;this.easing=ig.Tween.Easing.Linear.EaseNone;this.onComplete=!1;this.loop=this.delay=0;this.loopCount=-1;ig.merge(this,f);this.loopNum=this.loopCount;this.chain=function(a){u=a};this.initEnd=function(a,b,c){if("object"!==typeof b[a])c[a]=b[a];else for(subprop in b[a])c[a]||(c[a]={}),this.initEnd(subprop,b[a],c[a])};this.initStart=function(a,b,c,e){if("object"!==typeof c[a])"undefined"!==typeof b[a]&&(e[a]=c[a]);else for(subprop in c[a])e[a]||(e[a]={}),"undefined"!==typeof b[a]&&this.initStart(subprop,
b[a],c[a],e[a])};this.start=function(){this.paused=this.complete=!1;this.loopNum=this.loopCount;q=0;-1==a.tweens.indexOf(this)&&a.tweens.push(this);t=!0;m=new ig.Timer;for(var c in b)this.initEnd(c,b,j);for(c in j)this.initStart(c,j,a,e),this.initDelta(c,p,a,j)};this.initDelta=function(a,b,c,e){if("object"!==typeof e[a])b[a]=e[a]-c[a];else for(subprop in e[a])b[a]||(b[a]={}),this.initDelta(subprop,b[a],c[a],e[a])};this.propUpdate=function(a,b,c,e,f){if("object"!==typeof c[a])b[a]="undefined"!=typeof c[a]?
c[a]+e[a]*f:b[a];else for(subprop in c[a])this.propUpdate(subprop,b[a],c[a],e[a],f)};this.propSet=function(a,b,c){if("object"!==typeof b[a])c[a]=b[a];else for(subprop in b[a])c[a]||(c[a]={}),this.propSet(subprop,b[a],c[a])};this.update=function(){if(!t)return!1;if(this.delay){if(m.delta()<this.delay)return;this.delay=0;m.reset()}if(this.paused||this.complete)return!1;var b=(m.delta()+q)/this.duration,b=1<b?1:b,c=this.easing(b);for(property in p)this.propUpdate(property,a,e,p,c);if(1<=b){if(0==this.loopNum||
!this.loop){this.complete=!0;if(this.onComplete)this.onComplete();u&&u.start();return!1}if(this.loop==ig.Tween.Loop.Revert){for(property in e)this.propSet(property,e,a);q=0;m.reset();-1!=this.loopNum&&this.loopNum--}else if(this.loop==ig.Tween.Loop.Reverse){b={};c={};ig.merge(b,j);ig.merge(c,e);ig.merge(e,b);ig.merge(j,c);for(property in j)this.initDelta(property,p,a,j);q=0;m.reset();-1!=this.loopNum&&this.loopNum--}}};this.pause=function(){this.paused=!0;q+=m.delta()};this.resume=function(){this.paused=
!1;m.reset()};this.stop=function(a){a&&(this.loop=this.complete=this.paused=!1,q+=c,this.update());this.complete=!0}};ig.Tween.Loop={Revert:1,Reverse:2};ig.Tween.Easing={Linear:{},Quadratic:{},Cubic:{},Quartic:{},Quintic:{},Sinusoidal:{},Exponential:{},Circular:{},Elastic:{},Back:{},Bounce:{}};ig.Tween.Easing.Linear.EaseNone=function(a){return a};ig.Tween.Easing.Quadratic.EaseIn=function(a){return a*a};ig.Tween.Easing.Quadratic.EaseOut=function(a){return-a*(a-2)};ig.Tween.Easing.Quadratic.EaseInOut=
function(a){return 1>(a*=2)?0.5*a*a:-0.5*(--a*(a-2)-1)};ig.Tween.Easing.Cubic.EaseIn=function(a){return a*a*a};ig.Tween.Easing.Cubic.EaseOut=function(a){return--a*a*a+1};ig.Tween.Easing.Cubic.EaseInOut=function(a){return 1>(a*=2)?0.5*a*a*a:0.5*((a-=2)*a*a+2)};ig.Tween.Easing.Quartic.EaseIn=function(a){return a*a*a*a};ig.Tween.Easing.Quartic.EaseOut=function(a){return-(--a*a*a*a-1)};ig.Tween.Easing.Quartic.EaseInOut=function(a){return 1>(a*=2)?0.5*a*a*a*a:-0.5*((a-=2)*a*a*a-2)};ig.Tween.Easing.Quintic.EaseIn=
function(a){return a*a*a*a*a};ig.Tween.Easing.Quintic.EaseOut=function(a){return(a-=1)*a*a*a*a+1};ig.Tween.Easing.Quintic.EaseInOut=function(a){return 1>(a*=2)?0.5*a*a*a*a*a:0.5*((a-=2)*a*a*a*a+2)};ig.Tween.Easing.Sinusoidal.EaseIn=function(a){return-Math.cos(a*Math.PI/2)+1};ig.Tween.Easing.Sinusoidal.EaseOut=function(a){return Math.sin(a*Math.PI/2)};ig.Tween.Easing.Sinusoidal.EaseInOut=function(a){return-0.5*(Math.cos(Math.PI*a)-1)};ig.Tween.Easing.Exponential.EaseIn=function(a){return 0==a?0:Math.pow(2,
10*(a-1))};ig.Tween.Easing.Exponential.EaseOut=function(a){return 1==a?1:-Math.pow(2,-10*a)+1};ig.Tween.Easing.Exponential.EaseInOut=function(a){return 0==a?0:1==a?1:1>(a*=2)?0.5*Math.pow(2,10*(a-1)):0.5*(-Math.pow(2,-10*(a-1))+2)};ig.Tween.Easing.Circular.EaseIn=function(a){return-(Math.sqrt(1-a*a)-1)};ig.Tween.Easing.Circular.EaseOut=function(a){return Math.sqrt(1- --a*a)};ig.Tween.Easing.Circular.EaseInOut=function(a){return 1>(a/=0.5)?-0.5*(Math.sqrt(1-a*a)-1):0.5*(Math.sqrt(1-(a-=2)*a)+1)};ig.Tween.Easing.Elastic.EaseIn=
function(a){var b,c=0.1,f=0.4;if(0==a)return 0;if(1==a)return 1;f||(f=0.3);!c||1>c?(c=1,b=f/4):b=f/(2*Math.PI)*Math.asin(1/c);return-(c*Math.pow(2,10*(a-=1))*Math.sin(2*(a-b)*Math.PI/f))};ig.Tween.Easing.Elastic.EaseOut=function(a){var b,c=0.1,f=0.4;if(0==a)return 0;if(1==a)return 1;f||(f=0.3);!c||1>c?(c=1,b=f/4):b=f/(2*Math.PI)*Math.asin(1/c);return c*Math.pow(2,-10*a)*Math.sin(2*(a-b)*Math.PI/f)+1};ig.Tween.Easing.Elastic.EaseInOut=function(a){var b,c=0.1,f=0.4;if(0==a)return 0;if(1==a)return 1;
f||(f=0.3);!c||1>c?(c=1,b=f/4):b=f/(2*Math.PI)*Math.asin(1/c);return 1>(a*=2)?-0.5*c*Math.pow(2,10*(a-=1))*Math.sin(2*(a-b)*Math.PI/f):0.5*c*Math.pow(2,-10*(a-=1))*Math.sin(2*(a-b)*Math.PI/f)+1};ig.Tween.Easing.Back.EaseIn=function(a){return a*a*(2.70158*a-1.70158)};ig.Tween.Easing.Back.EaseOut=function(a){return(a-=1)*a*(2.70158*a+1.70158)+1};ig.Tween.Easing.Back.EaseInOut=function(a){return 1>(a*=2)?0.5*a*a*(3.5949095*a-2.5949095):0.5*((a-=2)*a*(3.5949095*a+2.5949095)+2)};ig.Tween.Easing.Bounce.EaseIn=
function(a){return 1-ig.Tween.Easing.Bounce.EaseOut(1-a)};ig.Tween.Easing.Bounce.EaseOut=function(a){return(a/=1)<1/2.75?7.5625*a*a:a<2/2.75?7.5625*(a-=1.5/2.75)*a+0.75:a<2.5/2.75?7.5625*(a-=2.25/2.75)*a+0.9375:7.5625*(a-=2.625/2.75)*a+0.984375};ig.Tween.Easing.Bounce.EaseInOut=function(a){return 0.5>a?0.5*ig.Tween.Easing.Bounce.EaseIn(2*a):0.5*ig.Tween.Easing.Bounce.EaseOut(2*a-1)+0.5}});ig.baked=!0;
ig.module("plugins.url-parameters").defines(function(){ig.UrlParameters=ig.Class.extend({init:function(){switch(getQueryVariable("iphone")){case "true":ig.ua.iPhone=!0,console.log("iPhone mode")}var a=getQueryVariable("webview");if(a)switch(a){case "true":ig.ua.is_uiwebview=!0,console.log("webview mode")}if(a=getQueryVariable("debug"))switch(a){case "true":ig.game.showDebugMenu(),console.log("debug mode")}switch(getQueryVariable("view")){case "stats":ig.game.resetPlayerStats(),ig.game.endGame()}getQueryVariable("ad")}})});
ig.baked=!0;ig.module("plugins.jukebox").defines(function(){ig.Jukebox=ig.Class.extend({init:function(){this.player=new jukebox.Player({resources:["media/sounds/mobile/spritemap.mp3","media/sounds/mobile/spritemap.ogg"],autoplay:"music",spritemap:{music:{start:3,end:86,loop:!0}}})}})});ig.baked=!0;
ig.module("plugins.facebook").defines(function(){ig.Facebook=ig.Class.extend({appId:null,callback:null,session:null,me:null,cache:{},getGameDirectory:function(a){return a.substr(0,a.lastIndexOf("/"))},init:function(a,b){this.appId=a;this.gameDirectory=this.getGameDirectory(document.URL);window.fbAsyncInit=function(){FB.init({appId:a,channelUrl:ig.game.facebook.gameDirectory+"/channel.html",status:!0,cookie:!0,xfbml:!0});ig.game.facebook.getLoginStatus(b)};var c=ig.$new("div");c.id="fb-root";document.body.appendChild(c);
c=ig.$new("script");c.type="text/javascript";switch(ig.game.language.selectedCode){case "tw":c.src="//connect.facebook.net/zh_tw/all.js";break;case "hk":c.src="//connect.facebook.net/zh_hk/all.js";break;default:c.src="//connect.facebook.net/en_US/all.js"}c.async=!0;ig.$("#fb-root").appendChild(c)},subscribeEvent:function(a){FB.Event.subscribe("auth.statusChange",a)},getLoginStatus:function(a){FB.getLoginStatus(a)},logout:function(){FB.logout()},loginUser:function(){FB.login(function(){},{scope:"email"})},
getUserInfo:function(a,b){"me"==a?FB.api("/me",b):FB.api("/"+a,b)},sendMultiInvite:function(a,b){FB.ui({method:"apprequests",message:a},b)},postToFeed:function(a,b,c,f,e,j){FB.ui({method:"feed",name:a,caption:b,description:c,link:f,picture:ig.game.facebook.gameDirectory+"/"+e},j)}})});ig.baked=!0;
ig.module("plugins.director").requires("impact.impact").defines(function(){ig.Director=ig.Class.extend({init:function(a,b){this.game=a;this.levels=[];this.currentLevel=0;this.append(b)},loadLevel:function(a){this.currentLevel=a;this.game.loadLevel(this.levels[a]);return!0},loadLevelWithoutEntities:function(a){this.currentLevel=a;this.game.loadLevelWithoutEntities(this.levels[a]);return!0},append:function(a){newLevels=[];return"object"===typeof a?(a.constructor===[].constructor?newLevels=a:newLevels[0]=
a,this.levels=this.levels.concat(newLevels),!0):!1},nextLevel:function(){return this.currentLevel+1<this.levels.length?this.loadLevel(this.currentLevel+1):!1},previousLevel:function(){return 0<=this.currentLevel-1?this.loadLevel(this.currentLevel-1):!1},jumpTo:function(a){var b=null;for(i=0;i<this.levels.length;i++)this.levels[i]==a&&(b=i);return 0<=b?this.loadLevel(b):!1},firstLevel:function(){return this.loadLevel(0)},lastLevel:function(){return this.loadLevel(this.levels.length-1)},reloadLevel:function(){return this.loadLevel(this.currentLevel)}})});
ig.baked=!0;
ig.module("plugins.video-manager").defines(function(){ig.Video=ig.Class.extend({playerIDs:null,players:[],currentID:null,muted:!1,playOnce:!0,playedPlayerIDs:[],init:function(){console.log("video plugin initialized ...")},load:function(a){var b=[];_V_.options.flash.swf="glue/videojs/video-js.swf";for(i=0;i<a.length;i++)console.log("setting up cutsceneID:",a[i]),_V_(a[i],{},function(){b[i]=this;console.log("ready: ",a[i]);b[i].addEvent("ended",ig.game.video.endVideo)});this.players=b;this.playerIDs=a},
lowerVideoResolution:function(){for(i=0;i<this.playerIDs.length;i++){var a=$("#"+this.playerIDs[i]+"_html5_api"),b=this.extractfilenameMinusExtension(a.attr("src")),c=this.extractFileType(a.attr("src"));a.attr("src",b+"-small."+c)}},extractfilenameMinusExtension:function(a){return a.split(".").shift()},extractFileType:function(a){return a.split(".").pop()},endVideo:function(){var a=ig.game.video;a.stopVideo(a.getPlayerByID(a.currentID));console.log("ended: ",a.currentID)},getPlayerByID:function(a){for(i=
0;i<this.players.length;i++)if(this.players[i].id==a)return this.players[i];return!1},skipVideo:function(){this.endVideo()},isPlayedBefore:function(a,b){for(i=0;i<b.length;i++)if(b[i]==a)return!0;return!1},playVideoByID:function(a){this.playVideo(this.getPlayerByID(a))},playVideo:function(a){ig.game.showOverlay(["skip"]);this.currentID=a.id;this.isPlayedBefore(a.id,this.playedPlayerIDs)?(console.log("previously played. Skipping"),this.skipVideo()):(console.log("first time play."),this.playedPlayerIDs.push(a.id),
this.expandDiv(a.id),this.showDiv(a.id),a.play(),ig.game.stopAllSounds(),ig.game.stopBackgroundMusic(),sizeHandler(),console.log("playing ",a.id))},muteVideo:function(a){a.volume(0);this.muted=!0},muteAllPlayers:function(){if(this.muted)for(i=0;i<this.players.length;i++)this.unmuteVideo(this.players[i]);else for(i=0;i<this.players.length;i++)this.muteVideo(this.players[i])},unmuteVideo:function(a){a.volume(1);this.muted=!1},stopVideo:function(a){ig.game.hideOverlay(["skip"]);this.shrinkDiv(a.id);
this.hideDiv(a.id);a.pause().currentTime(0);ig.game.stopAllSounds();ig.game.playBackgroundMusic();sizeHandler();console.log("playing ",a.id)},expandDiv:function(a){ig.ua.iPhone?($("#"+a).width(1),$("#"+a).height(1)):($("#"+a).width("100%"),$("#"+a).height("100%"));var b=$("#"+a).width(),c=$("#"+a).height();console.log("video div layer width:",b);console.log("video div layer height:",c);$("#"+a).css("left",w/2-b/2);$("#"+a).css("top",h/2-c/2);console.log("expanding div id",a)},shrinkDiv:function(a){$("#"+
a).width(1);$("#"+a).height(1);console.log("shrinking div id",a)},showDiv:function(a){document.getElementById(a).style.visibility="visible"},hideDiv:function(a){document.getElementById(a).style.visibility="hidden"}})});ig.baked=!0;
ig.module("plugins.impact-storage").requires("impact.game").defines(function(){ig.Storage=ig.Class.extend({staticInstantiate:function(){return!ig.Storage.instance?null:ig.Storage.instance},init:function(){ig.Storage.instance=this},isCapable:function(){return"undefined"!==typeof window.localStorage},isSet:function(a){return null!==this.get(a)},initUnset:function(a,b){null===this.get(a)&&this.set(a,b)},get:function(a){if(!this.isCapable())return null;try{return JSON.parse(localStorage.getItem(a))}catch(b){return window.localStorage.getItem(a)}},
getInt:function(a){return~~this.get(a)},getFloat:function(a){return parseFloat(this.get(a))},getBool:function(a){return!!this.get(a)},key:function(a){return this.isCapable()?window.localStorage.key(a):null},set:function(a,b){if(!this.isCapable())return null;try{window.localStorage.setItem(a,JSON.stringify(b))}catch(c){c==QUOTA_EXCEEDED_ERR&&console.log("localStorage quota exceeded")}},setHighest:function(a,b){b>this.getFloat(a)&&this.set(a,b)},remove:function(a){if(!this.isCapable())return null;window.localStorage.removeItem(a)},
clear:function(){if(!this.isCapable())return null;window.localStorage.clear()}})});ig.baked=!0;
ig.module("game.entities.pointer").requires("impact.entity").defines(function(){EntityPointer=ig.Entity.extend({type:ig.Entity.TYPE.A,checkAgainst:ig.Entity.TYPE.B,isClicking:!1,isHovering:!1,check:function(a){this.isHovering=!0;this.isClicking&&"function"==typeof a.clicked&&a.clicked();this.isHovering&&"function"==typeof a.hovered&&a.hovered()},update:function(){if(ig.ua.mobile){var a=window.innerHeight/mobileHeight;this.pos.x=ig.input.mouse.x/(window.innerWidth/mobileWidth)-this.size.x/2+ig.game.screen.x;
this.pos.y=ig.input.mouse.y/a-this.size.y/2}else this.pos.x=ig.input.mouse.x/multiplier-this.size.x/2+ig.game.screen.x,this.pos.y=ig.input.mouse.y/multiplier-this.size.y/2;this.isClicking=ig.input.pressed("click")}})});ig.baked=!0;ig.module("game.entities.pointer-selector").requires("game.entities.pointer").defines(function(){EntityPointerSelector=EntityPointer.extend({zIndex:1E3,_wmDrawBox:!0,_wmBoxColor:"rgba(0, 0, 255, 0.7)",size:{x:20,y:20},init:function(a,b,c){this.parent(a,b,c)}})});
ig.baked=!0;
ig.module("game.entities.select").requires("impact.entity").defines(function(){EntitySelect=ig.Entity.extend({type:ig.Entity.TYPE.B,checkAgainst:ig.Entity.TYPE.A,collides:ig.Entity.COLLIDES.NEVER,canSelect:!1,canSelectTimerDuration:0.35,zIndex:99999,isHovering:!1,isSelected:!1,init:function(a,b,c){this.parent(a,b,c);this.canSelectTimer=new ig.Timer(this.canSelectTimerDuration)},doesClickableLayerExist:function(a){for(k in dynamicClickableEntityDivs)if(k==a)return!0;return!1},checkClickableLayer:function(a,b,
c){"undefined"==typeof wm&&(this.doesClickableLayerExist(a)?(ig.game.showOverlay([a]),$("#"+a).find("[href]").attr("href",b)):this.createClickableOutboundLayer(a,b,"media/misc/invisible.png",c))},createClickableOutboundLayer:function(a,b,c,f){var e=ig.$new("div");e.id=a;document.body.appendChild(e);$("#"+e.id).css("float","left");$("#"+e.id).css("width",this.size.x*multiplier);$("#"+e.id).css("height",this.size.y*multiplier);$("#"+e.id).css("position","absolute");var j=w/2-destW/2,p=h/2-destH/2;w==
mobileWidth?($("#"+e.id).css("left",this.pos.x),$("#"+e.id).css("top",this.pos.y)):($("#"+e.id).css("left",j+this.pos.x*multiplier),$("#"+e.id).css("top",p+this.pos.y*multiplier));f?$("#"+e.id).html("<a target='_blank' href='"+b+"'><img style='width:100%;height:100%' src='"+c+"'></a>"):$("#"+e.id).html("<a href='"+b+"'><img style='width:100%;height:100%' src='"+c+"'></a>");dynamicClickableEntityDivs[a]={};dynamicClickableEntityDivs[a].width=$("#"+e.id).width();dynamicClickableEntityDivs[a].height=
$("#"+e.id).height();dynamicClickableEntityDivs[a].entity_pos_x=this.pos.x;dynamicClickableEntityDivs[a].entity_pos_y=this.pos.y},hovered:function(){this.isHovering=!0;this.dehoverOthers()},dehoverOthers:function(){var a=ig.game.getEntitiesByType(EntitySelect);for(i=0;i<a.length;i++)a[i]!=this&&(a[i].isHovering=!1)},deselectOthers:function(){var a=ig.game.getEntitiesByType(EntitySelect);for(i=0;i<a.length;i++)a[i]!=this&&(a[i].isSelected=!1)},update:function(){this.parent();this.canSelectTimer&&0<
this.canSelectTimer.delta()&&(this.canSelect=!0,this.canSelectTimer=null)}})});ig.baked=!0;
ig.module("game.levels.test-desktop").requires("impact.image").defines(function(){LevelTestDesktop={entities:[],layer:[{name:"background",width:40,height:30,linkWithCollision:!1,visible:1,tilesetName:"media/graphics/backgrounds/desktop/background.jpg",repeat:!1,preRender:!0,distance:"1",tilesize:16,foreground:!1,data:[[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40],[41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,
64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80],[81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120],[121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160],[161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,
197,198,199,200],[201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240],[241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256,257,258,259,260,261,262,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277,278,279,280],[281,282,283,284,285,286,287,288,289,290,291,292,293,294,295,296,297,298,299,300,301,302,303,304,305,306,307,308,309,310,311,312,313,314,315,316,317,318,319,320],
[321,322,323,324,325,326,327,328,329,330,331,332,333,334,335,336,337,338,339,340,341,342,343,344,345,346,347,348,349,350,351,352,353,354,355,356,357,358,359,360],[361,362,363,364,365,366,367,368,369,370,371,372,373,374,375,376,377,378,379,380,381,382,383,384,385,386,387,388,389,390,391,392,393,394,395,396,397,398,399,400],[401,402,403,404,405,406,407,408,409,410,411,412,413,414,415,416,417,418,419,420,421,422,423,424,425,426,427,428,429,430,431,432,433,434,435,436,437,438,439,440],[441,442,443,444,
445,446,447,448,449,450,451,452,453,454,455,456,457,458,459,460,461,462,463,464,465,466,467,468,469,470,471,472,473,474,475,476,477,478,479,480],[481,482,483,484,485,486,487,488,489,490,491,492,493,494,495,496,497,498,499,500,501,502,503,504,505,506,507,508,509,510,511,512,513,514,515,516,517,518,519,520],[521,522,523,524,525,526,527,528,529,530,531,532,533,534,535,536,537,538,539,540,541,542,543,544,545,546,547,548,549,550,551,552,553,554,555,556,557,558,559,560],[561,562,563,564,565,566,567,568,
569,570,571,572,573,574,575,576,577,578,579,580,581,582,583,584,585,586,587,588,589,590,591,592,593,594,595,596,597,598,599,600],[601,602,603,604,605,606,607,608,609,610,611,612,613,614,615,616,617,618,619,620,621,622,623,624,625,626,627,628,629,630,631,632,633,634,635,636,637,638,639,640],[641,642,643,644,645,646,647,648,649,650,651,652,653,654,655,656,657,658,659,660,661,662,663,664,665,666,667,668,669,670,671,672,673,674,675,676,677,678,679,680],[681,682,683,684,685,686,687,688,689,690,691,692,
693,694,695,696,697,698,699,700,701,702,703,704,705,706,707,708,709,710,711,712,713,714,715,716,717,718,719,720],[721,722,723,724,725,726,727,728,729,730,731,732,733,734,735,736,737,738,739,740,741,742,743,744,745,746,747,748,749,750,751,752,753,754,755,756,757,758,759,760],[761,762,763,764,765,766,767,768,769,770,771,772,773,774,775,776,777,778,779,780,781,782,783,784,785,786,787,788,789,790,791,792,793,794,795,796,797,798,799,800],[801,802,803,804,805,806,807,808,809,810,811,812,813,814,815,816,
817,818,819,820,821,822,823,824,825,826,827,828,829,830,831,832,833,834,835,836,837,838,839,840],[841,842,843,844,845,846,847,848,849,850,851,852,853,854,855,856,857,858,859,860,861,862,863,864,865,866,867,868,869,870,871,872,873,874,875,876,877,878,879,880],[881,882,883,884,885,886,887,888,889,890,891,892,893,894,895,896,897,898,899,900,901,902,903,904,905,906,907,908,909,910,911,912,913,914,915,916,917,918,919,920],[921,922,923,924,925,926,927,928,929,930,931,932,933,934,935,936,937,938,939,940,
941,942,943,944,945,946,947,948,949,950,951,952,953,954,955,956,957,958,959,960],[961,962,963,964,965,966,967,968,969,970,971,972,973,974,975,976,977,978,979,980,981,982,983,984,985,986,987,988,989,990,991,992,993,994,995,996,997,998,999,1E3],[1001,1002,1003,1004,1005,1006,1007,1008,1009,1010,1011,1012,1013,1014,1015,1016,1017,1018,1019,1020,1021,1022,1023,1024,1025,1026,1027,1028,1029,1030,1031,1032,1033,1034,1035,1036,1037,1038,1039,1040],[1041,1042,1043,1044,1045,1046,1047,1048,1049,1050,1051,
1052,1053,1054,1055,1056,1057,1058,1059,1060,1061,1062,1063,1064,1065,1066,1067,1068,1069,1070,1071,1072,1073,1074,1075,1076,1077,1078,1079,1080],[1081,1082,1083,1084,1085,1086,1087,1088,1089,1090,1091,1092,1093,1094,1095,1096,1097,1098,1099,1100,1101,1102,1103,1104,1105,1106,1107,1108,1109,1110,1111,1112,1113,1114,1115,1116,1117,1118,1119,1120],[1121,1122,1123,1124,1125,1126,1127,1128,1129,1130,1131,1132,1133,1134,1135,1136,1137,1138,1139,1140,1141,1142,1143,1144,1145,1146,1147,1148,1149,1150,1151,
1152,1153,1154,1155,1156,1157,1158,1159,1160],[1161,1162,1163,1164,1165,1166,1167,1168,1169,1170,1171,1172,1173,1174,1175,1176,1177,1178,1179,1180,1181,1182,1183,1184,1185,1186,1187,1188,1189,1190,1191,1192,1193,1194,1195,1196,1197,1198,1199,1200]]}]};LevelTestDesktopResources=[new ig.Image("media/graphics/backgrounds/desktop/background.jpg")]});ig.baked=!0;
ig.module("game.levels.test-mobile").requires("impact.image").defines(function(){LevelTestMobile={entities:[],layer:[{name:"background",width:30,height:40,linkWithCollision:!1,visible:1,tilesetName:"media/graphics/backgrounds/mobile/background.jpg",repeat:!1,preRender:!0,distance:"1",tilesize:16,foreground:!1,data:[[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30],[31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60],[61,62,63,
64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90],[91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120],[121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150],[151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180],[181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,
197,198,199,200,201,202,203,204,205,206,207,208,209,210],[211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240],[241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256,257,258,259,260,261,262,263,264,265,266,267,268,269,270],[271,272,273,274,275,276,277,278,279,280,281,282,283,284,285,286,287,288,289,290,291,292,293,294,295,296,297,298,299,300],[301,302,303,304,305,306,307,308,309,310,311,312,313,314,315,316,317,318,319,320,
321,322,323,324,325,326,327,328,329,330],[331,332,333,334,335,336,337,338,339,340,341,342,343,344,345,346,347,348,349,350,351,352,353,354,355,356,357,358,359,360],[361,362,363,364,365,366,367,368,369,370,371,372,373,374,375,376,377,378,379,380,381,382,383,384,385,386,387,388,389,390],[391,392,393,394,395,396,397,398,399,400,401,402,403,404,405,406,407,408,409,410,411,412,413,414,415,416,417,418,419,420],[421,422,423,424,425,426,427,428,429,430,431,432,433,434,435,436,437,438,439,440,441,442,443,444,
445,446,447,448,449,450],[451,452,453,454,455,456,457,458,459,460,461,462,463,464,465,466,467,468,469,470,471,472,473,474,475,476,477,478,479,480],[481,482,483,484,485,486,487,488,489,490,491,492,493,494,495,496,497,498,499,500,501,502,503,504,505,506,507,508,509,510],[511,512,513,514,515,516,517,518,519,520,521,522,523,524,525,526,527,528,529,530,531,532,533,534,535,536,537,538,539,540],[541,542,543,544,545,546,547,548,549,550,551,552,553,554,555,556,557,558,559,560,561,562,563,564,565,566,567,568,
569,570],[571,572,573,574,575,576,577,578,579,580,581,582,583,584,585,586,587,588,589,590,591,592,593,594,595,596,597,598,599,600],[601,602,603,604,605,606,607,608,609,610,611,612,613,614,615,616,617,618,619,620,621,622,623,624,625,626,627,628,629,630],[631,632,633,634,635,636,637,638,639,640,641,642,643,644,645,646,647,648,649,650,651,652,653,654,655,656,657,658,659,660],[661,662,663,664,665,666,667,668,669,670,671,672,673,674,675,676,677,678,679,680,681,682,683,684,685,686,687,688,689,690],[691,
692,693,694,695,696,697,698,699,700,701,702,703,704,705,706,707,708,709,710,711,712,713,714,715,716,717,718,719,720],[721,722,723,724,725,726,727,728,729,730,731,732,733,734,735,736,737,738,739,740,741,742,743,744,745,746,747,748,749,750],[751,752,753,754,755,756,757,758,759,760,761,762,763,764,765,766,767,768,769,770,771,772,773,774,775,776,777,778,779,780],[781,782,783,784,785,786,787,788,789,790,791,792,793,794,795,796,797,798,799,800,801,802,803,804,805,806,807,808,809,810],[811,812,813,814,815,
816,817,818,819,820,821,822,823,824,825,826,827,828,829,830,831,832,833,834,835,836,837,838,839,840],[841,842,843,844,845,846,847,848,849,850,851,852,853,854,855,856,857,858,859,860,861,862,863,864,865,866,867,868,869,870],[871,872,873,874,875,876,877,878,879,880,881,882,883,884,885,886,887,888,889,890,891,892,893,894,895,896,897,898,899,900],[901,902,903,904,905,906,907,908,909,910,911,912,913,914,915,916,917,918,919,920,921,922,923,924,925,926,927,928,929,930],[931,932,933,934,935,936,937,938,939,
940,941,942,943,944,945,946,947,948,949,950,951,952,953,954,955,956,957,958,959,960],[961,962,963,964,965,966,967,968,969,970,971,972,973,974,975,976,977,978,979,980,981,982,983,984,985,986,987,988,989,990],[991,992,993,994,995,996,997,998,999,1E3,1001,1002,1003,1004,1005,1006,1007,1008,1009,1010,1011,1012,1013,1014,1015,1016,1017,1018,1019,1020],[1021,1022,1023,1024,1025,1026,1027,1028,1029,1030,1031,1032,1033,1034,1035,1036,1037,1038,1039,1040,1041,1042,1043,1044,1045,1046,1047,1048,1049,1050],
[1051,1052,1053,1054,1055,1056,1057,1058,1059,1060,1061,1062,1063,1064,1065,1066,1067,1068,1069,1070,1071,1072,1073,1074,1075,1076,1077,1078,1079,1080],[1081,1082,1083,1084,1085,1086,1087,1088,1089,1090,1091,1092,1093,1094,1095,1096,1097,1098,1099,1100,1101,1102,1103,1104,1105,1106,1107,1108,1109,1110],[1111,1112,1113,1114,1115,1116,1117,1118,1119,1120,1121,1122,1123,1124,1125,1126,1127,1128,1129,1130,1131,1132,1133,1134,1135,1136,1137,1138,1139,1140],[1141,1142,1143,1144,1145,1146,1147,1148,1149,
1150,1151,1152,1153,1154,1155,1156,1157,1158,1159,1160,1161,1162,1163,1164,1165,1166,1167,1168,1169,1170],[1171,1172,1173,1174,1175,1176,1177,1178,1179,1180,1181,1182,1183,1184,1185,1186,1187,1188,1189,1190,1191,1192,1193,1194,1195,1196,1197,1198,1199,1200]]}]};LevelTestMobileResources=[new ig.Image("media/graphics/backgrounds/mobile/background.jpg")]});ig.baked=!0;
ig.module("game.main").requires("impact.game","impact.debug.debug","plugins.splash-loader","plugins.tween","plugins.url-parameters","plugins.jukebox","plugins.facebook","plugins.director","plugins.video-manager","plugins.impact-storage","game.entities.pointer","game.entities.pointer-selector","game.entities.select","game.levels.test-desktop","game.levels.test-mobile").defines(function(){MyGame=ig.Game.extend({init:function(){this.setupMarketJSAPI();this.setupControls();this.setupDesktopMusic();this.setupLocalStorage();
this.initializePrerollAd();this.removeLoadingWheel();this.injectMobileLink();this.setupURLParameters();this.finalize()},finalize:function(){ig.ua.mobile?ig.game.showOverlay(["play"]):ig.game.startGame();sizeHandler()},injectMobileLink:function(){$("#play").attr("onclick","ig.game.setupJukebox();ig.game.pressPlay();createjs.Sound.play('start');")},removeLoadingWheel:function(){try{$("#ajaxbar").css("background","none")}catch(a){console.log(a)}},initializePrerollAd:function(){ig.ua.mobile&&_SETTINGS.Ad.Mobile.Header.Enabled&&
MobileAdInGameHeader.Initialize()},showDebugMenu:function(){console.log("showing debug menu ...");ig.Entity._debugShowBoxes=!0;$(".ig_debug").show()},setupLocalStorage:function(){this.storage=new ig.Storage},setupDesktopMusic:function(){},setupMarketJSAPI:function(){MarketJS.Initialize("ahdkZXZ-bWFya2V0anMtZ2FtZWNlbnRlcnIRCxIER2FtZRiAgICAgICgCgw")},startGame:function(){this.resetPlayerStats();this.director=ig.ua.mobile?new ig.Director(this,[LevelTestMobile]):new ig.Director(this,[LevelTestDesktop]);
this.director.loadLevel(this.director.currentLevel);this.spawnEntity(EntityPointerSelector,50,50);_gaq.push(["_trackEvent",this.eventCategory,"StartGame"])},playBackgroundMusic:function(){ig.ua.mobile?this.pausePosition&&ig.game.jukebox.player.resume(this.pausePosition):ig.music.play()},stopBackgroundMusic:function(){ig.ua.mobile?this.pausePosition=ig.game.jukebox.player.pause():ig.music.pause()},fpsMultiplierFunction:function(){this.fpsTimer||(this.fpsTimer=new ig.Timer(1*ig.Timer.timeScale));this.fpsTimer&&
0>this.fpsTimer.delta()?null!=this.fpsCounter?this.fpsCounter++:this.fpsCounter=0:(ig.game.fps=this.fpsCounter,31>ig.game.fps?(ig.Timer.timeScale=0.75*(60/ig.game.fps),ig.game.fpsMultiplier=0.75*(60/ig.game.fps)):(ig.Timer.timeScale=1,ig.game.fpsMultiplier=1),this.fpsCounter=0,this.fpsTimer.set(1*ig.Timer.timeScale),this.fpsTimer.reset())},endGame:function(){console.log("End game");this.stopBackgroundMusic();_gaq.push(["_trackEvent",this.eventCategory,"EndGame"]);ig.ua.mobile&&_SETTINGS.Ad.Mobile.End.Enabled&&
MobileAdInGameEnd.Initialize()},resetPlayerStats:function(){ig.log("resetting player stats ...");this.playerStats={id:this.playerStats?this.playerStats.id:null}},setupControls:function(){ig.input.unbindAll();ig.input.initMouse();ig.input.bind(ig.KEY.MOUSE1,"click")},setupJukebox:function(){ig.ua.mobile&&(this.jukebox=new ig.Jukebox)},setupGoogleAnalytics:function(){_gaq.push(["_trackEvent","GAME_ID","Initialize"])},setupURLParameters:function(){this.setupURLParameters=new ig.UrlParameters},pressPlay:function(){this.hideOverlay(["play"]);
this.startGame();ig.ua.mobile&&_SETTINGS.Ad.Mobile.Footer.Enabled&&MobileAdInGameFooter.Initialize();ig.ua.mobile&&_SETTINGS.Ad.Mobile.Header.Enabled&&MobileAdInGameHeader.Initialize()},pauseGame:function(){ig.system.stopRunLoop.call(ig.system);console.log("Game Paused")},resumeGame:function(){ig.system.startRunLoop.call(ig.system);console.log("Game Resumed")},pressMute:function(){ig.Sound.enabled?($("#btn-mute").attr("src","media/buttons/button-sound-off3.png"),this.mute()):($("#btn-mute").attr("src",
"media/buttons/button-sound-on3.png"),this.unmute())},mute:function(){ig.game.stopAllSounds();ig.ua.mobile?ig.game.jukebox.player.setVolume(0.01):(ig.music.volume=0,ig.Sound.enabled=!1);ig.game.video.muteAllPlayer()},unmute:function(){ig.ua.mobile?ig.game.jukebox.player.setVolume(1):(ig.music.volume=1,ig.Sound.enabled=!0);ig.game.video.muteAllPlayer()},showOverlay:function(a){for(i=0;i<a.length;i++)$("#"+a[i]).fadeIn(200),document.getElementById(a[i]).style.visibility="visible"},hideOverlay:function(a){for(i=
0;i<a.length;i++)$("#"+a[i]).fadeOut(200),document.getElementById(a[i]).style.visibility="hidden"},stopAllSounds:function(){for(i=0;i<ig.resources.length;i++)ig.resources[i].multiChannel&&ig.resources[i].stop();console.log("all sounds stopped")},update:function(){if(this.paused)for(var a=0;a<this.entities.length;a++)this.entities[a].ignorePause&&this.entities[a].update();else this.parent()},submitStats:function(){$("#high-score-line2").text(this.playerStats.score);null==this.playerStats.id||0>=this.playerStats.score?
console.log("player not logged in, or score not enough"):(console.log("writing to leaderboard ..."),MarketJS.Leaderboard.Write(this.playerStats.id,"score",this.playerStats.score,!0))},getLeaderboard:function(){MarketJS.Leaderboard.Read("score",!1,10,function(a){console.log(a);a=a.data;for(var c in a)$("#facebook-leaderboard"+c+"-image").html("<img class='leaderboard-image' src='https://graph.facebook.com/"+a[c].fb_username+"/picture?type=square'>"),$("#facebook-leaderboard"+c+"-name").html("<a href='"+
a[c].fb_link+"' target='_blank'>"+a[c].fb_first_name+"</a>"),$("#facebook-leaderboard"+c+"-value").html(a[c].metric_value);ig.game.showOverlay(["facebook-leaderboard"])})},setupFacebookLogin:function(){this.localizeFacebookLogin();0<=document.URL.indexOf("amazonaws.com")?(console.log("FB APP ID FOR DEVELOPMENT SERVER USED"),this.facebook=new ig.Facebook("506169392784038",ig.game.FBStatusChangeCallback)):console.log("FB APP ID FOR PRODUCTION SERVER USED")},FBStatusChangeCallback:function(a){switch(a.status){case "connected":console.log("FBStatusChangeCallback connected ... now using that to login into MarketJS API");
ig.game.facebook.getUserInfo("me",ig.game.FBGetUserInfoCallback);ig.game.hideOverlay(["facebook-login"]);_gaq.push(["_trackEvent",ig.game.eventCategory,"LoggedIntoFacebook-Stage1"]);break;case "unknown":console.log("FBStatusChangeCallback unknown");ig.game.showOverlay(["facebook-login"]);break;case "not_authorized":console.log("FBStatusChangeCallback not authorized");ig.game.showOverlay(["facebook-login"]);break;default:console.log("FBStatusChangeCallback unknown status"),ig.game.showOverlay(["facebook-login"])}},
FBGetUserInfoCallback:function(a){console.log("accesssing MarketJS API with facebook id ...",a.id);ig.game.playerStats.id=a.id;MarketJS.Login.Facebook(a,ig.game.FBLoginCallback)},FBLoginCallback:function(a){a=JSON.parse(a);switch(a.status){case "RETURNING":console.log("returning player ... do something");ig.game.hideOverlay(["facebook-login"]);break;case "NEW":console.log("new player ... do something"),ig.game.hideOverlay(["facebook-login"])}},FBCallbackSendMultiInvite:function(a){console.log("response:",
a);ig.game.hideOverlay(["facebook-invite"])},FBCallbackPostToFeed:function(a){a&&a.post_id?(console.log("Post was published."),_gaq.push(["_trackEvent",ig.game.eventCategory,"PostedToFacebookFeed-Stage1"])):(console.log("Post was not published."),_gaq.push(["_trackEvent",ig.game.eventCategory,"DidNotPostToFacebookFeed-Stage1"]))}});var a=getQueryVariable("device");if(a)switch(a){case "mobile":console.log("serving mobile version ...");ig.ua.mobile=!0;break;case "desktop":console.log("serving desktop version ...");
ig.ua.mobile=!1;break;default:console.log("serving universal version ...")}else console.log("serving universal version ...");if(a=getQueryVariable("force-rotate"))switch(a){case "portrait":console.log("force rotate to portrait");window.orientation=0;break;case "landscape":console.log("force rotate to horizontal");window.orientation=90;break;default:alert("wrong command/type in param force-rotate. Defaulting value to portrait"),window.orientation=0}ig.ua.mobile?(ig.Sound.enabled=!1,ig.main("#canvas",
MyGame,60,mobileWidth,mobileHeight,1,ig.SplashLoader)):ig.main("#canvas",MyGame,60,desktopWidth,desktopHeight,1,ig.SplashLoader);ig.ua.mobile&&orientationHandler();sizeHandler()});
